{"version":3,"file":"warpview.js","sources":["ng://@senx/warpview/src/lib/model/dataModel.ts","ng://@senx/warpview/src/lib/utils/logger.ts","ng://@senx/warpview/src/lib/utils/gts.lib.ts","ng://@senx/warpview/src/lib/model/chartBounds.ts","ng://@senx/warpview/src/lib/utils/color-lib.ts","ng://@senx/warpview/src/lib/utils/chart-lib.ts","ng://@senx/warpview/src/lib/model/param.ts","ng://@senx/warpview/src/lib/plotly/plotly.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-component.ts","ng://@senx/warpview/src/lib/services/resize.service.ts","ng://@senx/warpview/src/lib/utils/timsort.ts","ng://@senx/warpview/src/lib/elements/warp-view-chart/warp-view-chart.component.ts","ng://@senx/warpview/src/lib/services/http-error-handler.service.ts","ng://@senx/warpview/src/lib/services/warp10.service.ts","ng://@senx/warpview/src/lib/elements/warp-view-tile/warp-view-tile.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-spinner/warp-view-spinner.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-toggle/warp-view-toggle.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-bar/warp-view-bar.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-bubble/warp-view-bubble.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-datagrid/warp-view-datagrid.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-datagrid/warp-view-paginable/warp-view-paginable.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-display/warp-view-display.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-drill-down/warp-view-drill-down.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-drill-down/model/datum.ts","ng://@senx/warpview/src/lib/elements/warp-view-drill-down/calendar-heatmap/calendar-heatmap.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-modal/warp-view-modal.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-gts-popup/warp-view-gts-popup.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-gts-tree/warp-view-gts-tree.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-gts-tree/warp-view-tree-view/warp-view-tree-view.component.ts","ng://@senx/warpview/src/lib/model/GTS.ts","ng://@senx/warpview/src/lib/elements/warp-view-gts-tree/warp-view-chip/warp-view-chip.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-image/warp-view-image.component.ts","ng://@senx/warpview/src/lib/utils/map-lib.ts","ng://@senx/warpview/src/lib/elements/warp-view-map/warp-view-map.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-map/warp-view-heatmap-sliders/warp-view-heatmap-sliders.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-pie/warp-view-pie.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-gauge/warp-view-gauge.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-annotation/warp-view-annotation.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-polar/warp-view-polar.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-radar/warp-view-radar.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-plot/warp-view-plot.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-resize/warp-view-resize.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-slider/warp-view-slider.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-range-slider/warp-view-range-slider.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-spectrum/warp-view-spectrum.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-box/warp-view-box.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-3d-line/warp-view-3d-line.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-globe/warp-view-globe.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-event-drop/warp-view-event-drop.component.ts","ng://@senx/warpview/src/lib/elements/warp-view-result-tile/warp-view-result-tile.component.ts","ng://@senx/warpview/src/lib/warp-view-angular.module.ts"],"sourcesContent":["/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Param} from './param';\n\nexport class DataModel {\n  data: any[] | string;\n  params?: Param[];\n  globalParams?: Param;\n  bounds?: {\n    xmin?: number,\n    xmax?: number,\n    ymin?: number,\n    ymax?: number\n  };\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\n/* tslint:disable:no-console */\n\nexport class Logger {\n\n  className: string;\n  isDebug = false;\n\n  constructor(className: any, isDebug: boolean = false) {\n    this.className = className.name;\n    this.isDebug = isDebug;\n  }\n\n  setDebug(debug: boolean) {\n    this.isDebug = debug;\n  }\n\n  log(level: LEVEL, methods: any[], args: any[]) {\n    let logChain = [];\n    logChain.push(`[${new Date().toISOString()} - [${this.className}] ${methods.join(' - ')}`);\n    logChain = logChain.concat(args);\n    switch (level) {\n      case LEVEL.DEBUG: {\n        if (this.isDebug) {\n          console.debug(...logChain);\n        }\n        break;\n      }\n      case LEVEL.ERROR: {\n        console.error(...logChain);\n        break;\n      }\n      case LEVEL.INFO: {\n        console.log(...logChain);\n        break;\n      }\n      case LEVEL.WARN: {\n        console.warn(...logChain);\n        break;\n      }\n      default: {\n        if (this.isDebug) {\n          console.log(...logChain);\n        }\n      }\n    }\n  }\n\n  debug(methods: any[], ...args: any[]) {\n    this.log(LEVEL.DEBUG, methods, args);\n  }\n\n  error(methods: any[], ...args: any[]) {\n    this.log(LEVEL.ERROR, methods, args);\n  }\n\n  warn(methods: any[], ...args: any[]) {\n    this.log(LEVEL.WARN, methods, args);\n  }\n\n  info(methods: any[], ...args: any[]) {\n    this.log(LEVEL.INFO, methods, args);\n  }\n}\n\nexport enum LEVEL {\n  DEBUG, ERROR, WARN, INFO\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {DataModel} from '../model/dataModel';\nimport {GTS} from '../model/GTS';\nimport {Logger} from './logger';\n\n// @dynamic\nexport class GTSLib {\n  private static LOG: Logger = new Logger(GTSLib);\n\n  static cleanArray(actual: any[]) {\n    return actual.filter((i) => !!i);\n  }\n\n  static unique(arr) {\n    const u = {};\n    const a = [];\n    for (let i = 0, l = arr.length; i < l; ++i) {\n      if (!u.hasOwnProperty(arr[i])) {\n        a.push(arr[i]);\n        u[arr[i]] = 1;\n      }\n    }\n    return a;\n  }\n\n  static isArray(value) {\n    return value && typeof value === 'object' && value instanceof Array && typeof value.length === 'number'\n      && typeof value.splice === 'function' && !(value.propertyIsEnumerable('length'));\n  }\n\n  static formatElapsedTime(elapsed: number) {\n    if (elapsed < 1000) {\n      return elapsed.toFixed(3) + ' ns';\n    }\n    if (elapsed < 1000000) {\n      return (elapsed / 1000).toFixed(3) + ' Î¼s';\n    }\n    if (elapsed < 1000000000) {\n      return (elapsed / 1000000).toFixed(3) + ' ms';\n    }\n    if (elapsed < 1000000000000) {\n      return (elapsed / 1000000000).toFixed(3) + ' s ';\n    }\n    // Max exec time for nice output: 999.999 minutes (should be OK, timeout should happen before that).\n    return (elapsed / 60000000000).toFixed(3) + ' m ';\n  }\n\n  static isValidResponse(data) {\n    let response;\n    try {\n      response = JSON.parse(data);\n    } catch (e) {\n      this.LOG.error(['isValidResponse'], 'Response non JSON compliant', data);\n      return false;\n    }\n    if (!GTSLib.isArray(response)) {\n      this.LOG.error(['isValidResponse'], 'Response isn\\'t an Array', response);\n      return false;\n    }\n    return true;\n  }\n\n  static isEmbeddedImage(item) {\n    return !(typeof item !== 'string' || !/^data:image/.test(item));\n  }\n\n  static isEmbeddedImageObject(item) {\n    return !((item === null) || (item.image === null) ||\n      (item.caption === null) || !GTSLib.isEmbeddedImage(item.image));\n  }\n\n  static isPositionArray(item) {\n    if (!item || !item.positions) {\n      return false;\n    }\n    if (GTSLib.isPositionsArrayWithValues(item) || GTSLib.isPositionsArrayWithTwoValues(item)) {\n      return true;\n    }\n    (item.positions || []).forEach(p => {\n      if (p.length < 2 || p.length > 3) {\n        return false;\n      }\n      for (const j in p) {\n        if (typeof p[j] !== 'number') {\n          return false;\n        }\n      }\n    });\n    return true;\n  }\n\n  static isPositionsArrayWithValues(item) {\n    if ((item === null) || (item.positions === null)) {\n      return false;\n    }\n    (item.positions || []).forEach(p => {\n      if (p.length !== 3) {\n        return false;\n      }\n      for (const j in p) {\n        if (typeof p[j] !== 'number') {\n          return false;\n        }\n      }\n    });\n    return true;\n  }\n\n  static isPositionsArrayWithTwoValues(item) {\n    if ((item === null) || (item.positions === null)) {\n      return false;\n    }\n    (item.positions || []).forEach(p => {\n      if (p.length !== 4) {\n        return false;\n      }\n      for (const j in p) {\n        if (typeof p[j] !== 'number') {\n          return false;\n        }\n      }\n    });\n    return true;\n  }\n\n  static gtsFromJSON(json, id) {\n    return {gts: {c: json.c, l: json.l, a: json.a, v: json.v, id}};\n  }\n\n  static gtsFromJSONList(jsonList, prefixId) {\n    const gtsList = [];\n    let id;\n    (jsonList || []).forEach((item, i) => {\n      let gts = item;\n      if (item.gts) {\n        gts = item.gts;\n      }\n      if ((prefixId !== undefined) && (prefixId !== '')) {\n        id = prefixId + '-' + i;\n      } else {\n        id = i;\n      }\n      if (GTSLib.isArray(gts)) {\n        gtsList.push(GTSLib.gtsFromJSONList(gts, id));\n      }\n      if (GTSLib.isGts(gts)) {\n        gtsList.push(GTSLib.gtsFromJSON(gts, id));\n      }\n      if (GTSLib.isEmbeddedImage(gts)) {\n        gtsList.push({image: gts, caption: 'Image', id});\n      }\n      if (GTSLib.isEmbeddedImageObject(gts)) {\n        gtsList.push({image: gts.image, caption: gts.caption, id});\n      }\n    });\n    return {\n      content: gtsList || [],\n    };\n  }\n\n  static flatDeep(arr1: any[]): any[] {\n    if (!GTSLib.isArray(arr1)) {\n      arr1 = [arr1];\n    }\n    return arr1.reduce((acc, val) => Array.isArray(val) ? acc.concat(GTSLib.flatDeep(val)) : acc.concat(val), []);\n  }\n\n  static flattenGtsIdArray(a: any[], r: number): { res: any[], r: number } {\n    const res = [];\n    if (GTSLib.isGts(a)) {\n      a = [a];\n    }\n    (a || []).forEach(d => {\n      if (GTSLib.isArray(d)) {\n        const walk = GTSLib.flattenGtsIdArray(d, r);\n        res.push(walk.res);\n        r = walk.r;\n      } else if (d && d.v) {\n        d.id = r;\n        res.push(d);\n        r++;\n      }\n    });\n    return {res, r};\n  }\n\n  static sanitizeNames(input: string): string {\n    return (input || '').replace(/{/g, '&#123;')\n      .replace(/}/g, '&#125;')\n      .replace(/,/g, '&#44;')\n      .replace(/>/g, '&#62;')\n      .replace(/</g, '&#60;')\n      .replace(/\"/g, '&#34;')\n      .replace(/'/g, '&#39;');\n  }\n\n  static serializeGtsMetadata(gts) {\n    const serializedLabels = [];\n    const serializedAttributes = [];\n    if (gts.l) {\n      Object.keys(gts.l).forEach((key) => {\n        serializedLabels.push(this.sanitizeNames(key + '=' + gts.l[key]));\n      });\n    }\n    if (gts.a) {\n      Object.keys(gts.a).forEach((key) => {\n        serializedAttributes.push(this.sanitizeNames(key + '=' + gts.a[key]));\n      });\n    }\n    // tslint:disable-next-line:max-line-length\n    return `${this.sanitizeNames(gts.c)}{${serializedLabels.join(',')}${serializedAttributes.length > 0 ? ',' : ''}${serializedAttributes.join(',')}}`;\n  }\n\n  static isGts(item) {\n    return !!item && (item.c === '' || !!item.c) && !!item.v && GTSLib.isArray(item.v);\n  }\n\n  static isGtsToPlot(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    // We look at the first non-null value, if it's a String or Boolean it's an annotation GTS,\n    // if it's a number it's a GTS to plot\n    return (gts.v || []).some(v => {\n      // noinspection JSPotentiallyInvalidConstructorUsage\n      return typeof v[v.length - 1] === 'number' || !!v[v.length - 1].constructor.prototype.toFixed;\n    });\n  }\n  static isGtsToPlotOnMap(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    // We look at the first non-null value, if it's a String or Boolean it's an annotation GTS,\n    // if it's a number it's a GTS to plot\n    return (gts.v || []).some(v => {\n      // noinspection JSPotentiallyInvalidConstructorUsage\n      return v.length >= 3 && (typeof v[v.length - 1] === 'number' || !!v[v.length - 1].constructor.prototype.toFixed);\n    });\n  }\n\n  static isSingletonGTS(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    return (gts.v || []).length === 1;\n  }\n\n  static isGtsToAnnotate(gts) {\n    if (!GTSLib.isGts(gts) || gts.v.length === 0) {\n      return false;\n    }\n    // We look at the first non-null value, if it's a String or Boolean it's an annotation GTS,\n    // if it's a number it's a GTS to plot\n    return (gts.v || []).some(v => {\n      if (v[v.length - 1] !== null) {\n        // noinspection JSPotentiallyInvalidConstructorUsage\n        return typeof (v[v.length - 1]) !== 'number' &&\n          (!!v[v.length - 1].constructor && v[v.length - 1].constructor.name !== 'Big') &&\n          v[v.length - 1].constructor.prototype.toFixed === undefined;\n      }\n    });\n  }\n\n  static gtsSort(gts) {\n    if (gts.isSorted) {\n      return;\n    }\n    gts.v = gts.v.sort((a, b) => a[0] - b[0]);\n    gts.isSorted = true;\n  }\n\n  static getData(data: any): DataModel {\n    if (typeof data === 'string') {\n      return GTSLib.getData(JSON.parse(data as string));\n    } else if (data && data.hasOwnProperty('data')) {\n      if (!GTSLib.isArray(data.data)) {\n        data.data = [data.data];\n      }\n      return data as DataModel;\n    } else if (GTSLib.isArray(data) && data.length > 0 && data[0].data) {\n      return data[0] as DataModel;\n    } else if (GTSLib.isArray(data)) {\n      return {data: data as GTS[]} as DataModel;\n    }\n    return new DataModel();\n  }\n\n  static getDivider(timeUnit: string): number {\n    let timestampDivider = 1000; // default for Âµs timeunit\n    if (timeUnit === 'ms') {\n      timestampDivider = 1;\n    }\n    if (timeUnit === 'ns') {\n      timestampDivider = 1000000;\n    }\n    return timestampDivider;\n  }\n\n  static formatLabel = (data: string): string => {\n    const serializedGTS = data.split('{');\n    let display = `<span class=\"gtsInfo\"><span class='gts-classname'>${serializedGTS[0]}</span>`;\n    if (serializedGTS.length > 1) {\n      display += `<span class='gts-separator'>{</span>`;\n      const labels = serializedGTS[1].substr(0, serializedGTS[1].length - 1).split(',');\n      if (labels.length > 0) {\n        labels.forEach((l, i) => {\n          const label = l.split('=');\n          if (l.length > 1) {\n            display += `<span><span class='gts-labelname'>${label[0]}</span>\n<span class='gts-separator'>=</span><span class='gts-labelvalue'>${label[1]}</span>`;\n            if (i !== labels.length - 1) {\n              display += `<span>, </span>`;\n            }\n          }\n        });\n      }\n      display += `<span class='gts-separator'>}</span>`;\n    }\n    if (serializedGTS.length > 2) {\n      display += `<span class='gts-separator'>{</span>`;\n      const labels = serializedGTS[2].substr(0, serializedGTS[2].length - 1).split(',');\n      if (labels.length > 0) {\n        labels.forEach((l, i) => {\n          const label = l.split('=');\n          if (l.length > 1) {\n            display += `<span><span class='gts-attrname'>${label[0]}</span>\n<span class='gts-separator'>=</span><span class='gts-attrvalue'>${label[1]}</span>`;\n            if (i !== labels.length - 1) {\n              display += `<span>, </span>`;\n            }\n          }\n        });\n      }\n      display += `<span class='gts-separator'>}</span>`;\n    }\n    display += '</span>';\n    return display;\n  };\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nexport class ChartBounds {\n  tsmin = 0;\n  tsmax = 0;\n  msmin = '';\n  msmax = '';\n  marginLeft = 0;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n// @dynamic\nexport class ColorLib {\n  static color = {\n    COHESIVE: [\n      '#F2D354',\n      '#E4612F',\n      '#D32C2E',\n      '#6D2627',\n      '#6C7F55',\n      '#934FC6',\n      '#F07A5D',\n      '#ED8371',\n      '#94E751',\n      '#C457F7',\n      '#973AF7',\n      '#B6FF7A',\n      '#C7FFD5',\n      '#90E4D0',\n      '#E09234',\n      '#D2FF91',\n      '#17B201'\n    ],\n    COHESIVE_2: [\n      '#6F694E',\n      '#65D0B2',\n      '#D8F546',\n      '#FF724B',\n      '#D6523E',\n      '#F9F470',\n      '#F4BC78',\n      '#B1D637',\n      '#FFCFC8',\n      '#56CDAB',\n      '#CFDD22',\n      '#B3F5D2',\n      '#97DB29',\n      '#9DC5EE',\n      '#CFC0F5',\n      '#EDEA29',\n      '#5EC027',\n      '#386C94'\n    ],\n    BELIZE: [\n      '#5899DA',\n      '#E8743B',\n      '#19A979',\n      '#ED4A7B',\n      '#945ECF',\n      '#13A4B4',\n      '#525DF4',\n      '#BF399E',\n      '#6C8893',\n      '#EE6868',\n      '#2F6497'\n    ],\n    VIRIDIS: [\n      '#440154',\n      '#481f70',\n      '#443983',\n      '#3b528b',\n      '#31688e',\n      '#287c8e',\n      '#21918c',\n      '#20a486',\n      '#35b779',\n      '#5ec962',\n      '#90d743',\n      '#c8e020',\n    ],\n    MAGMA: [\n      '#000004',\n      '#100b2d',\n      '#2c115f',\n      '#51127c',\n      '#721f81',\n      '#932b80',\n      '#b73779',\n      '#d8456c',\n      '#f1605d',\n      '#fc8961',\n      '#feb078',\n      '#fed799',\n    ],\n    INFERNO: [\n      '#000004',\n      '#110a30',\n      '#320a5e',\n      '#57106e',\n      '#781c6d',\n      '#9a2865',\n      '#bc3754',\n      '#d84c3e',\n      '#ed6925',\n      '#f98e09',\n      '#fbb61a',\n      '#f4df53',\n    ],\n    PLASMA: [\n      '#0d0887',\n      '#3a049a',\n      '#5c01a6',\n      '#7e03a8',\n      '#9c179e',\n      '#b52f8c',\n      '#cc4778',\n      '#de5f65',\n      '#ed7953',\n      '#f89540',\n      '#fdb42f',\n      '#fbd524',\n    ],\n    YL_OR_RD: [\n      '#ffffcc',\n      '#ffeda0',\n      '#fed976',\n      '#feb24c',\n      '#fd8d3c',\n      '#fc4e2a',\n      '#e31a1c',\n      '#bd0026',\n      '#800026',\n    ],\n    YL_GN_BU: [\n      '#ffffd9',\n      '#edf8b1',\n      '#c7e9b4',\n      '#7fcdbb',\n      '#41b6c4',\n      '#1d91c0',\n      '#225ea8',\n      '#253494',\n      '#081d58',\n    ],\n    BU_GN: [\n      '#f7fcfd',\n      '#ebf7fa',\n      '#dcf2f2',\n      '#c8eae4',\n      '#aadfd2',\n      '#88d1bc',\n      '#68c2a3',\n      '#4eb485',\n      '#37a266',\n      '#228c49',\n      '#0d7635',\n      '#025f27',\n    ],\n    WARP10: [\n      '#ff9900',\n      '#004eff',\n      '#E53935',\n      '#7CB342',\n      '#F4511E',\n      '#039BE5',\n      '#D81B60',\n      '#C0CA33',\n      '#6D4C41',\n      '#8E24AA',\n      '#00ACC1',\n      '#FDD835',\n      '#5E35B1',\n      '#00897B',\n      '#FFB300',\n      '#3949AB',\n      '#43A047',\n      '#1E88E5',\n    ],\n    NINETEEN_EIGHTY_FOUR: ['#31C0F6', '#A500A5', '#FF7E27'],\n    ATLANTIS: ['#74D495', '#3F3FBA', '#FF4D9E'],\n    DO_ANDROIDS_DREAM: ['#8F8AF4', '#A51414', '#F4CF31'],\n    DELOREAN: ['#FD7A5D', '#5F1CF2', '#4CE09A'],\n    CTHULHU: ['#FDC44F', '#007C76', '#8983FF'],\n    ECTOPLASM: ['#DA6FF1', '#00717A', '#ACFF76'],\n    T_MAX_400_FILM: ['#F6F6F8', '#A4A8B6', '#545667']\n  };\n\n  static getColor(i: number, scheme: string) {\n    return ColorLib.color[scheme][i % ColorLib.color[scheme].length];\n  }\n\n  static getColorGradient(id: number, scheme: string) {\n    return [\n      [0, ColorLib.transparentize(ColorLib.getColor(id, scheme), 0)],\n      [1, ColorLib.transparentize(ColorLib.getColor(id, scheme), 0.7)]\n    ];\n  }\n\n  static getBlendedColorGradient(id: number, scheme: string, bg = '#000000') {\n    return [\n      [0, ColorLib.blend_colors(bg, ColorLib.getColor(id, scheme), 0)],\n      [1, ColorLib.blend_colors(bg, ColorLib.getColor(id, scheme), 1)]\n    ];\n  }\n\n  static getColorScale(scheme: string) {\n    return ColorLib.color[scheme].map((c, i) => [i, c]);\n  }\n\n  static hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? [\n      parseInt(result[1], 16),\n      parseInt(result[2], 16),\n      parseInt(result[3], 16)\n    ] : null;\n  }\n\n  static transparentize(color, alpha = 0.5): string {\n    return 'rgba(' + ColorLib.hexToRgb(color).concat(alpha).join(',') + ')';\n  }\n\n  static generateColors(num, scheme) {\n    const color = [];\n    for (let i = 0; i < num; i++) {\n      color.push(ColorLib.getColor(i, scheme));\n    }\n    return color;\n  }\n\n  static generateTransparentColors(num, scheme) {\n    const color = [];\n    for (let i = 0; i < num; i++) {\n      color.push(ColorLib.transparentize(ColorLib.getColor(i, scheme)));\n    }\n    return color;\n  }\n\n  static hsvGradientFromRgbColors(c1, c2, steps) {\n    const c1hsv = ColorLib.rgb2hsv(c1.r, c1.g, c1.b);\n    const c2hsv = ColorLib.rgb2hsv(c2.r, c2.g, c2.b);\n    c1.h = c1hsv[0];\n    c1.s = c1hsv[1];\n    c1.v = c1hsv[2];\n    c2.h = c2hsv[0];\n    c2.s = c2hsv[1];\n    c2.v = c2hsv[2];\n    const gradient = ColorLib.hsvGradient(c1, c2, steps);\n    for (const i in gradient) {\n      if (gradient[i]) {\n        gradient[i].rgb = ColorLib.hsv2rgb(gradient[i].h, gradient[i].s, gradient[i].v);\n        gradient[i].r = Math.floor(gradient[i].rgb[0]);\n        gradient[i].g = Math.floor(gradient[i].rgb[1]);\n        gradient[i].b = Math.floor(gradient[i].rgb[2]);\n      }\n    }\n    return gradient;\n  }\n\n  private static rgb2hsv(r: number, g: number, b: number) {\n    // Normalize\n    const normR = r / 255.0;\n    const normG = g / 255.0;\n    const normB = b / 255.0;\n    const M = Math.max(normR, normG, normB);\n    const m = Math.min(normR, normG, normB);\n    const d = M - m;\n    let h;\n    let s;\n    let v;\n    v = M;\n    if (d === 0) {\n      h = 0;\n      s = 0;\n    } else {\n      s = d / v;\n      switch (M) {\n        case normR:\n          h = ((normG - normB) + d * (normG < normB ? 6 : 0)) / 6 * d;\n          break;\n        case normG:\n          h = ((normB - normR) + d * 2) / 6 * d;\n          break;\n        case normB:\n          h = ((normR - normG) + d * 4) / 6 * d;\n          break;\n      }\n    }\n    return [h, s, v];\n  }\n\n  private static hsvGradient(c1: any, c2: any, steps: any) {\n    const gradient = new Array(steps);\n    // determine clockwise and counter-clockwise distance between hues\n    const distCCW = (c1.h >= c2.h) ? c1.h - c2.h : 1 + c1.h - c2.h;\n    const distCW = (c1.h >= c2.h) ? 1 + c2.h - c1.h : c2.h - c1.h;\n    // make gradient for this part\n    for (let i = 0; i < steps; i++) {\n      // interpolate h, s, b\n      let h = (distCW <= distCCW) ? c1.h + (distCW * i / (steps - 1)) : c1.h - (distCCW * i / (steps - 1));\n      if (h < 0) {\n        h = 1 + h;\n      }\n      if (h > 1) {\n        h = h - 1;\n      }\n      const s = (1 - i / (steps - 1)) * c1.s + i / (steps - 1) * c2.s;\n      const v = (1 - i / (steps - 1)) * c1.v + i / (steps - 1) * c2.v;\n      // add to gradient array\n      gradient[i] = {h, s, v};\n    }\n    return gradient;\n  }\n\n  private static hsv2rgb(h: any, s: any, v: any) {\n    let r;\n    let g;\n    let b;\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n        break;\n    }\n    return [r * 255, g * 255, b * 255];\n  }\n\n  static rgb2hex(r, g, b) {\n    function componentToHex(c) {\n      const hex = c.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    }\n\n    return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  }\n\n  static blend_colors(color1, color2, percentage) {\n    // check input\n    color1 = color1 || '#000000';\n    color2 = color2 || '#ffffff';\n    percentage = percentage || 0.5;\n    // 1: validate input, make sure we have provided a valid hex\n    if (color1.length !== 4 && color1.length !== 7) {\n      throw new Error('colors must be provided as hexes');\n    }\n    if (color2.length !== 4 && color2.length !== 7) {\n      throw new Error('colors must be provided as hexes');\n    }\n    if (percentage > 1 || percentage < 0) {\n      throw new Error('percentage must be between 0 and 1');\n    }\n    // 2: check to see if we need to convert 3 char hex to 6 char hex, else slice off hash\n    //      the three character hex is just a representation of the 6 hex where each character is repeated\n    //      ie: #060 => #006600 (green)\n    if (color1.length === 4) {\n      color1 = color1[1] + color1[1] + color1[2] + color1[2] + color1[3] + color1[3];\n    } else {\n      color1 = color1.substring(1);\n    }\n    if (color2.length === 4) {\n      color2 = color2[1] + color2[1] + color2[2] + color2[2] + color2[3] + color2[3];\n    } else {\n      color2 = color2.substring(1);\n    }\n    console.log('valid: c1 => ' + color1 + ', c2 => ' + color2);\n    // 3: we have valid input, convert colors to rgb\n    color1 = [parseInt(color1[0] + color1[1], 16), parseInt(color1[2] + color1[3], 16), parseInt(color1[4] + color1[5], 16)];\n    color2 = [parseInt(color2[0] + color2[1], 16), parseInt(color2[2] + color2[3], 16), parseInt(color2[4] + color2[5], 16)];\n    console.log('hex -> rgba: c1 => [' + color1.join(', ') + '], c2 => [' + color2.join(', ') + ']');\n    // 4: blend\n    const color3 = [\n      (1 - percentage) * color1[0] + percentage * color2[0],\n      (1 - percentage) * color1[1] + percentage * color2[1],\n      (1 - percentage) * color1[2] + percentage * color2[2]\n    ];\n    const color3Str = '#' + ColorLib.int_to_hex(color3[0]) + ColorLib.int_to_hex(color3[1]) + ColorLib.int_to_hex(color3[2]);\n    console.log(color3Str);\n    // return hex\n    return color3Str;\n  }\n\n  /*\n      convert a Number to a two character hex string\n      must round, or we will end up with more digits than expected (2)\n      note: can also result in single digit, which will need to be padded with a 0 to the left\n      @param: num         => the number to conver to hex\n      @returns: string    => the hex representation of the provided number\n  */\n  static int_to_hex(num: number) {\n    let hex = Math.round(num).toString(16);\n    if (hex.length === 1) {\n      hex = '0' + hex;\n    }\n    return hex;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\n// @dynamic\nexport class ChartLib {\n\n  static DEFAULT_WIDTH = 640;\n  static DEFAULT_HEIGHT = 480;\n\n  static mergeDeep<T>(base: T, extended: any) {\n    base = base || {} as T;\n    for (const prop in extended || {}) {\n      if (extended.hasOwnProperty(prop)) {\n        // If property is an object, merge properties\n        if (Object.prototype.toString.call(extended[prop]) === '[object Object]') {\n          base[prop] = ChartLib.mergeDeep<T>(base[prop], extended[prop]);\n        } else {\n          base[prop] = extended[prop];\n        }\n      }\n    }\n    return base as T;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nexport class Param {\n  scheme = 'WARP10';\n  bgColor?: string;\n  datasetColor?: string;\n  fontColor?: string;\n  borderColor?: string;\n  gridLineColor?: string;\n  showLegend?: boolean;\n  responsive?: boolean;\n  horizontal = false;\n  stacked = false;\n  key?: string;\n  unit?: string;\n  interpolate?: string;\n  type?: string;\n  showRangeSelector?: boolean;\n  autoRefresh?: number;\n  showControls = true;\n  showErrors = true;\n  showStatus = true;\n  showGTSTree?: boolean;\n  foldGTSTree?: boolean;\n  timeMode?: 'timestamp' | 'date' | 'custom' | 'duration';\n  showDots = false;\n  delta?: number;\n  timeUnit: 'us' | 'ms' | 'ns' = 'us';\n  minColor?: string;\n  maxColor?: string;\n  split?: 'Y' | 'M' | 'D' | 'h' | 'm' | 's';\n  popupButtonValidateClass?: string;\n  popupButtonValidateLabel?: string;\n  timeZone = 'UTC';\n  properties?: any;\n  map?: {\n    tiles?: string[];\n    heatRadius?: number;\n    heatBlur?: number;\n    heatOpacity?: number;\n    heatControls?: boolean;\n    dotsLimit?: number;\n    mapType?: string;\n    showTimeSlider?: boolean;\n    showTimeRange?: boolean;\n    timeSliderMin?: number;\n    timeSliderMax?: number;\n    timeSliderStep?: number;\n    timeSliderMode?: 'timestamp' | 'date' | 'custom';\n    timeStart?: number,\n    timeSpan?: number,\n    startLat?: number;\n    startLong?: number;\n    startZoom?: number;\n    timeSpanList?: any[]\n  } = {\n    tiles: [],\n    showTimeSlider: false,\n    showTimeRange: false,\n    timeSliderMode: 'timestamp'\n  };\n  bounds: {\n    minDate?: number;\n    maxDate?: number;\n    yRanges?: [number, number];\n  } = {};\n  histo?: {\n    histnorm: 'percent' | 'probability' | 'density' | 'probability density';\n    histfunc: 'count' | 'sum' | 'avg' | 'min' | 'max';\n  };\n}\n","import {\n  Component,\n  DoCheck,\n  ElementRef,\n  EventEmitter,\n  Input,\n  IterableDiffer,\n  IterableDiffers,\n  KeyValueDiffer,\n  KeyValueDiffers,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChange,\n  SimpleChanges,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport * as Plotlyjs from 'plotly.js/dist/plotly';\nimport {Config, Data, Layout, PlotlyHTMLElement, Plots} from 'plotly.js';\nimport {Logger} from '../utils/logger';\n\nexport interface Figure {\n  data: Data[];\n  layout: Partial<Layout>;\n  frames: Partial<Config>;\n}\n\n@Component({\n  selector: 'warpview-plotly',\n  templateUrl: './plotly.component.html',\n  styleUrls: ['./plotly.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class PlotlyComponent implements OnInit, OnChanges, OnDestroy, DoCheck {\n  protected defaultClassName = 'js-plotly-plot';\n  protected LOG: Logger;\n\n  public plotlyInstance: PlotlyHTMLElement;\n  public resizeHandler?: (instance: PlotlyHTMLElement) => void;\n  public layoutDiffer: KeyValueDiffer<string, any>;\n  public dataDiffer: IterableDiffer<Partial<any>>;\n\n  @ViewChild('plot', {static: true}) plotEl: ElementRef;\n\n  @Input() data?: Partial<any>[];\n  @Input() layout?: Partial<any>;\n  @Input() config?: Partial<Config>;\n  @Input() frames?: Partial<any>[];\n  @Input() style?: { [key: string]: string };\n\n  @Input() divId?: string;\n  @Input() revision = 0;\n  @Input() className?: string | string[];\n  @Input() debug = false;\n  @Input() useResizeHandler = false;\n\n  @Input() updateOnLayoutChange = true;\n  @Input() updateOnDataChange = true;\n  @Input() updateOnlyWithRevision = true;\n\n  @Output() initialized = new EventEmitter<PlotlyHTMLElement>();\n  @Output() update = new EventEmitter<Figure>();\n  @Output() purge = new EventEmitter<Figure>();\n  @Output() error = new EventEmitter<Error>();\n\n  @Output() afterExport = new EventEmitter();\n  @Output() afterPlot = new EventEmitter();\n  @Output() animated = new EventEmitter();\n  @Output() animatingFrame = new EventEmitter();\n  @Output() animationInterrupted = new EventEmitter();\n  @Output() autoSize = new EventEmitter();\n  @Output() beforeExport = new EventEmitter();\n  @Output() buttonClicked = new EventEmitter();\n  @Output() click = new EventEmitter();\n  @Output() plotly_click = new EventEmitter();\n  @Output() clickAnnotation = new EventEmitter();\n  @Output() deselect = new EventEmitter();\n  @Output() doubleClick = new EventEmitter();\n  @Output() framework = new EventEmitter();\n  @Output() hover = new EventEmitter();\n  @Output() legendClick = new EventEmitter();\n  @Output() legendDoubleClick = new EventEmitter();\n  @Output() relayout = new EventEmitter();\n  @Output() restyle = new EventEmitter();\n  @Output() redraw = new EventEmitter();\n  @Output() selected = new EventEmitter();\n  @Output() selecting = new EventEmitter();\n  @Output() sliderChange = new EventEmitter();\n  @Output() sliderEnd = new EventEmitter();\n  @Output() sliderStart = new EventEmitter();\n  @Output() transitioning = new EventEmitter();\n  @Output() transitionInterrupted = new EventEmitter();\n  @Output() unhover = new EventEmitter();\n  @Output() relayouting = new EventEmitter();\n\n  public eventNames = [\n    // 'afterExport',\n    //   'afterPlot', // 'animated', 'animatingFrame', 'animationInterrupted', 'autoSize',\n    // 'beforeExport', 'buttonClicked', 'clickAnnotation', 'deselect', 'doubleClick', 'framework',\n    'hover', 'unhover',\n    // 'legendClick', 'legendDoubleClick',\n    'relayout',\n    // 'restyle', 'redraw', 'selected', 'selecting', 'sliderChange',\n    // 'sliderEnd', 'sliderStart', 'transitioning', 'transitionInterrupted', 'relayouting'\n  ];\n  rect: any;\n\n  constructor(\n    public iterableDiffers: IterableDiffers,\n    public el: ElementRef,\n    public keyValueDiffers: KeyValueDiffers\n  ) {\n    this.LOG = new Logger(PlotlyComponent, this.debug);\n  }\n\n  ngOnInit() {\n    this.createPlot().then(() => {\n      const figure = this.createFigure();\n      this.LOG.debug(['figure'], figure);\n      this.initialized.emit(this.plotlyInstance);\n    });\n  }\n\n  ngOnDestroy() {\n    if (typeof this.resizeHandler === 'function') {\n      this.getWindow().removeEventListener('resize', this.resizeHandler as any);\n      this.resizeHandler = undefined;\n    }\n\n    const figure = this.createFigure();\n    this.purge.emit(figure);\n    this.remove(this.plotlyInstance);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.LOG.debug(['ngOnChanges'], changes);\n    const revision: SimpleChange = changes.revision;\n    if (changes.debug) {\n      this.debug = changes.debug.currentValue;\n    }\n    if ((revision && !revision.isFirstChange()) || !!changes.layout || !!changes.data || !!changes.config) {\n      this.updatePlot();\n    }\n    if (!!changes.debug) {\n      this.LOG.setDebug(changes.debug.currentValue);\n    }\n    this.updateWindowResizeHandler();\n    this.LOG.debug(['ngOnChanges'], changes);\n  }\n\n  ngDoCheck() {\n    if (this.updateOnlyWithRevision) {\n      return false;\n    }\n    let shouldUpdate = false;\n    if (this.updateOnLayoutChange) {\n      if (this.layoutDiffer) {\n        const layoutHasDiff = this.layoutDiffer.diff(this.layout);\n        if (layoutHasDiff) {\n          shouldUpdate = true;\n        }\n      } else if (this.layout) {\n        this.layoutDiffer = this.keyValueDiffers.find(this.layout).create();\n      } else {\n        this.layoutDiffer = undefined;\n      }\n    }\n\n    if (this.updateOnDataChange) {\n      if (this.dataDiffer) {\n        const dataHasDiff = this.dataDiffer.diff(this.data);\n        if (dataHasDiff) {\n          shouldUpdate = true;\n        }\n      } else if (Array.isArray(this.data)) {\n        this.dataDiffer = this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy);\n      } else {\n        this.dataDiffer = undefined;\n      }\n    }\n    if (shouldUpdate && this.plotlyInstance) {\n      this.updatePlot();\n    }\n  }\n\n  getWindow(): any {\n    return window;\n  }\n\n  getBoundingClientRect() {\n    return this.rect;\n  }\n\n  getClassName(): string {\n    let classes = [this.defaultClassName];\n    if (Array.isArray(this.className)) {\n      classes = classes.concat(this.className);\n    } else if (this.className) {\n      classes.push(this.className);\n    }\n\n    return classes.join(' ');\n  }\n\n  restyleChart(properties: any, curves: any[]) {\n    Plotlyjs.restyle(this.plotlyInstance, properties, curves);\n  }\n\n  createPlot(): Promise<void> {\n    this.LOG.debug(['createPlot'], this.data, this.layout, this.config, this.plotlyInstance);\n    return Plotlyjs.react(this.plotEl.nativeElement, this.data, this.layout, this.config).then(plotlyInstance => {\n      this.rect = this.el.nativeElement.getBoundingClientRect();\n      this.plotlyInstance = plotlyInstance;\n      this.LOG.debug(['plotlyInstance'], plotlyInstance);\n      this.getWindow().gd = this.debug ? plotlyInstance : undefined;\n\n      this.eventNames.forEach(name => {\n        const eventName = `plotly_${name.toLowerCase()}`;\n        // @ts-ignore\n        plotlyInstance.on(eventName, (data: any) => {\n          this.LOG.debug(['plotlyEvent', eventName], data);\n          (this[name] as EventEmitter<any>).emit(data);\n        });\n      });\n\n      plotlyInstance.on('plotly_click', (data: any) => {\n        this.click.emit(data);\n        this.plotly_click.emit(data);\n      });\n\n      this.updateWindowResizeHandler();\n      this.afterPlot.emit(plotlyInstance);\n    }, err => {\n      console.error('Error while plotting:', err);\n      this.error.emit(err);\n    });\n  }\n\n  createFigure(): Figure {\n    const p: any = this.plotlyInstance;\n    return {\n      data: p.data,\n      layout: p.layout,\n      frames: p._transitionData ? p._transitionData._frames : null\n    };\n  }\n\n  updatePlot() {\n    this.LOG.debug(['updatePlot'], this.data, this.layout, {...this.config});\n    if (!this.plotlyInstance) {\n      const error = new Error(`Plotly component wasn't initialized`);\n      this.error.emit(error);\n      return;\n    }\n    Plotlyjs.purge(this.plotlyInstance);\n    this.createPlot().then(() => {\n      const figure = this.createFigure();\n      this.update.emit(figure);\n    }, err => {\n      console.error('Error while updating plot:', err);\n      this.error.emit(err);\n    });\n  }\n\n  updateWindowResizeHandler() {\n    if (this.useResizeHandler) {\n      if (this.resizeHandler === undefined) {\n        this.resizeHandler = () => setTimeout(() => Plots.resize(this.plotlyInstance));\n        this.getWindow().addEventListener('resize', this.resizeHandler as any);\n      }\n    } else {\n      if (typeof this.resizeHandler === 'function') {\n        this.getWindow().removeEventListener('resize', this.resizeHandler as any);\n        this.resizeHandler = undefined;\n      }\n    }\n  }\n\n  dataDifferTrackBy(_: number, item: any): any {\n    const obj = Object.assign({}, item, {uid: ''});\n    return JSON.stringify(obj);\n  }\n\n\n  remove(div: PlotlyHTMLElement) {\n    Plotlyjs.purge(div);\n    delete this.plotlyInstance;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {ChartLib} from '../utils/chart-lib';\nimport {Param} from '../model/param';\nimport {Logger} from '../utils/logger';\nimport {DataModel} from '../model/dataModel';\nimport {GTS} from '../model/GTS';\nimport {GTSLib} from '../utils/gts.lib';\nimport * as moment from 'moment-timezone';\nimport {ElementRef, EventEmitter, Input, NgZone, Output, Renderer2, ViewChild} from '@angular/core';\nimport deepEqual from 'deep-equal';\nimport {Size, SizeService} from '../services/resize.service';\nimport {PlotlyComponent} from '../plotly/plotly.component';\nimport {Config} from 'plotly.js';\n\nexport type VisibilityState = 'unknown' | 'nothingPlottable' | 'plottablesAllHidden' | 'plottableShown';\n\nexport abstract class WarpViewComponent {\n  @ViewChild('toolTip', {static: true}) toolTip: ElementRef;\n  @ViewChild('graph', {static: false}) graph: PlotlyComponent;\n  @ViewChild('chartContainer', {static: true}) chartContainer: ElementRef;\n\n  @Input('width') width = ChartLib.DEFAULT_WIDTH;\n  @Input('height') height = ChartLib.DEFAULT_HEIGHT;\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('unit') set unit(unit: string) {\n    this._unit = unit;\n    this.update(undefined, false);\n  }\n\n  get unit() {\n    return this._unit;\n  }\n\n  @Input('debug') set debug(debug: boolean | string) {\n    if (typeof debug === 'string') {\n      debug = 'true' === debug;\n    }\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('showLegend') set showLegend(showLegend: boolean | string) {\n    if (typeof showLegend === 'string') {\n      showLegend = 'true' === showLegend;\n    }\n    this._showLegend = showLegend;\n  }\n\n  get showLegend() {\n    return this._showLegend;\n  }\n\n  @Input('responsive') set responsive(responsive: boolean | string) {\n    if (typeof responsive === 'string') {\n      responsive = 'true' === responsive;\n    }\n    this._responsive = responsive;\n  }\n\n  get responsive() {\n    return this._responsive;\n  }\n\n  @Input('options') set options(options: Param | string) {\n    this.LOG.debug(['onOptions'], options);\n    if (typeof options === 'string') {\n      options = JSON.parse(options);\n    }\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['onOptions', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n      this.update(this._options, false);\n    }\n  }\n\n  @Input('data') set data(data: DataModel | GTS[] | string) {\n    this.LOG.debug(['onData'], data);\n    if (data) {\n      this._data = GTSLib.getData(data);\n      this.update(this._options, true);\n      this.LOG.debug(['onData'], this._data);\n    }\n  }\n\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n\n  _options: Param = new Param();\n  protected LOG: Logger;\n  protected defOptions = ChartLib.mergeDeep(this._options, {\n    dotsLimit: 1000,\n    heatControls: false,\n    timeMode: 'date',\n    showRangeSelector: true,\n    gridLineColor: '#8e8e8e',\n    showDots: false,\n    timeZone: 'UTC',\n    timeUnit: 'us',\n    showControls: true,\n    bounds: {}\n  }) as Param;\n\n  protected _debug = false;\n  protected _showLegend = false;\n  protected _responsive = true;\n  protected _unit = '';\n  protected _data: DataModel;\n  protected _autoResize = true;\n  protected _hiddenData: number[] = [];\n  protected divider: number;\n\n  tooltipPosition: any = {top: '-10000px', left: '-1000px'};\n  loading = true;\n  noData = false;\n  layout: Partial<any> = {\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n  plotlyConfig: Partial<Config> = {\n    responsive: true,\n    showAxisDragHandles: true,\n    scrollZoom: true,\n    doubleClick: 'reset+autosize',\n    showTips: true,\n    plotGlPixelRatio: 1,\n    staticPlot: false,\n    displaylogo: false,\n    modeBarButtonsToRemove: [\n      'lasso2d', 'select2d', 'toggleSpikelines', 'toggleHover', 'hoverClosest3d', 'autoScale2d',\n      'hoverClosestGeo', 'hoverClosestGl2d', 'hoverClosestPie', 'toggleHover',\n      'hoverClosestCartesian', 'hoverCompareCartesian'\n    ]\n  };\n  plotlyData: Partial<any>[];\n  private hideTooltipTimer: number;\n  private rect: any;\n\n  protected constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    this.sizeService.sizeChanged$.subscribe((size: Size) => {\n      if ((el.nativeElement as HTMLElement).parentElement) {\n        const parentSize = (el.nativeElement as HTMLElement).parentElement.getBoundingClientRect();\n        if (this._responsive) {\n          this.height = parentSize.height;\n          this.width = parentSize.width;\n        }\n        if (!!this.graph && this._responsive && parentSize.height > 0) {\n          const layout = {\n            width: parentSize.width,\n            height: this._autoResize ? parentSize.height : this.layout.height\n          };\n          if (this.layout.width !== layout.width || this.layout.height !== layout.height) {\n            setTimeout(() => this.layout = {...this.layout, ...layout});\n            this.LOG.debug(['sizeChanged$'], this.layout.width, this.layout.height);\n            this.graph.updatePlot();\n          }\n        }\n      }\n    });\n  }\n\n  protected abstract update(options: Param, refresh: boolean): void;\n\n  protected abstract convert(data: DataModel): Partial<any>[];\n\n  protected legendFormatter(x, series, highlighted = -1): string {\n    const displayedCurves = [];\n    if (x === null) {\n      // This happens when there's no selection and {legend: 'always'} is set.\n      return `<br>\n      ${series.map(s => {\n        // FIXME :  if (!s.isVisible) return;\n        let labeledData = GTSLib.formatLabel(s.data.text || '') + ': ' + ((this._options.horizontal ? s.x : s.y) || s.r || '');\n        let color = s.data.line.color;\n        if (!!s.data.marker) {\n          if (GTSLib.isArray(s.data.marker.color)) {\n            color = s.data.marker.color[0];\n          } else {\n            color = s.data.marker.color;\n          }\n        }\n        if (s.curveNumber === highlighted) {\n          labeledData = `<i class=\"chip\"\n    style=\"background-color: ${color};border: 2px solid ${color};\"></i> ${labeledData}`;\n        }\n        return labeledData;\n      }).join('<br>')}`;\n    }\n\n    let html = '';\n    if (!!series[0]) {\n      x = series[0].x || series[0].theta;\n    }\n    html += `<b>${x}</b><br />`;\n    // put the highlighted one(s?) first, keep only visibles, keep only 50 first ones.\n    series = series.sort((sa, sb) => (sa.curveNumber === highlighted) ? -1 : 1);\n    series\n      // .filter(s => s.isVisible && s.yHTML)\n      .slice(0, 50)\n      .forEach((s, i) => {\n        if (displayedCurves.indexOf(s.curveNumber) <= -1) {\n          displayedCurves.push(s.curveNumber);\n          let value = series[0].data.orientation === 'h' ? s.x : s.y;\n          if (!value && value !== 0) {\n            value = s.r;\n          }\n          let labeledData = GTSLib.formatLabel(s.data.text || '') + ': ' + value;\n          if (s.curveNumber === highlighted) {\n            labeledData = `<b>${labeledData}</b>`;\n          }\n          let color = s.data.line ? s.data.line.color : '';\n          if (!!s.data.marker) {\n            if (GTSLib.isArray(s.data.marker.color)) {\n              color = s.data.marker.color[0];\n            } else {\n              color = s.data.marker.color;\n            }\n          }\n          html += `<i class=\"chip\" style=\"background-color: ${color};border: 2px solid ${color};\"></i>&nbsp;${labeledData}`;\n          if (i < series.length) {\n            html += '<br>';\n          }\n        }\n      });\n    return html;\n  }\n\n  protected initChart(el: ElementRef): boolean {\n    this.noData = false;\n    const parentSize = (el.nativeElement as HTMLElement).parentElement.parentElement.getBoundingClientRect();\n    if (this._responsive) {\n      this.height = parentSize.height;\n      this.width = parentSize.width;\n    }\n    this.LOG.debug(['initiChart', 'this._data'], this._data, this._options);\n    if (!this._data || !this._data.data || this._data.data.length === 0 || !this._options) {\n      this.loading = false;\n      this.LOG.debug(['initiChart', 'nodata']);\n      this.noData = true;\n      this.chartDraw.emit();\n      return false;\n    }\n    moment.tz.setDefault(this._options.timeZone);\n    this.loading = true;\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options || {}) as Param;\n    const dataModel = this._data;\n    this._options = ChartLib.mergeDeep(this._options || {}, this._data.globalParams) as Param;\n    this.LOG.debug(['initiChart', 'this._options'], this._options);\n    this._options.timeMode = this._options.timeMode || 'date';\n    this.divider = GTSLib.getDivider(this._options.timeUnit);\n    this.plotlyData = this.convert(dataModel);\n    this.plotlyConfig.responsive = this._responsive;\n    this.layout.paper_bgcolor = 'rgba(0,0,0,0)';\n    this.layout.plot_bgcolor = 'rgba(0,0,0,0)';\n    if (!this._responsive) {\n      this.layout.width = this.width || ChartLib.DEFAULT_WIDTH;\n      this.layout.height = this.height || ChartLib.DEFAULT_HEIGHT;\n    } else {\n      this.layout.width = parentSize.width;\n      this.layout.height = parentSize.height;\n    }\n    this.LOG.debug(['initChart', 'initSize'], this.layout.width, this.layout.height, this.width, this.height);\n    if (this._options.bounds && this._options.bounds.minDate && this._options.bounds.maxDate) {\n      dataModel.bounds = {\n        xmin: Math.floor(this._options.bounds.minDate),\n        xmax: Math.ceil(this._options.bounds.maxDate),\n        ymin: this._options.bounds.yRanges && this._options.bounds.yRanges.length > 0\n          ? Math.floor(this._options.bounds.yRanges[0])\n          : undefined,\n        ymax: this._options.bounds.yRanges && this._options.bounds.yRanges.length > 1\n          ? Math.ceil(this._options.bounds.yRanges[1])\n          : undefined\n      };\n      this.LOG.debug(['initChart', 'updateBounds'], dataModel.bounds.xmin, dataModel.bounds.xmax);\n      if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n        this.layout.xaxis.range = [dataModel.bounds.xmin, dataModel.bounds.xmax];\n      } else {\n        this.layout.xaxis.range = [\n          moment.tz(dataModel.bounds.xmin / this.divider, this._options.timeZone).toISOString(true),\n          moment.tz(dataModel.bounds.xmax / this.divider, this._options.timeZone).toISOString(true)];\n      }\n    }\n    this.LOG.debug(['initiChart', 'plotlyData'], this.plotlyData);\n    if (!this.plotlyData || this.plotlyData.length === 0) {\n      this.loading = false;\n      this.chartDraw.emit();\n      return false;\n    }\n    return !(!this.plotlyData || this.plotlyData.length === 0);\n  }\n\n  afterPlot(plotlyInstance?: any) {\n    this.LOG.debug(['afterPlot', 'plotlyInstance'], plotlyInstance);\n    this.chartDraw.emit();\n    this.loading = false;\n    this.rect = this.graph.getBoundingClientRect();\n  }\n\n  hideTooltip() {\n    if (!!this.hideTooltipTimer) {\n      clearTimeout(this.hideTooltipTimer);\n    }\n    this.hideTooltipTimer = setTimeout(() => {\n      this.toolTip.nativeElement.style.display = 'none';\n    }, 1000);\n  }\n\n  unhover(data?: any, point?: any) {\n    this.LOG.debug(['unhover'], data);\n    if (!!this.hideTooltipTimer) {\n      clearTimeout(this.hideTooltipTimer);\n    }\n  }\n\n  hover(data: any, point?: any) {\n    this.LOG.debug(['hover'], data);\n    this.toolTip.nativeElement.style.display = 'block';\n    if (!!this.hideTooltipTimer) {\n      clearTimeout(this.hideTooltipTimer);\n    }\n    let delta = Number.MAX_VALUE;\n    const curves = [];\n    if (!point) {\n      if (data.points[0] && data.points[0].data.orientation !== 'h') {\n        const y = (data.yvals || [''])[0];\n        data.points.forEach(p => {\n          curves.push(p.curveNumber);\n          const d = Math.abs((p.y || p.r) - y);\n          if (d < delta) {\n            delta = d;\n            point = p;\n          }\n        });\n      } else {\n        const x: number = (data.xvals || [''])[0];\n        data.points.forEach(p => {\n          curves.push(p.curveNumber);\n          const d = Math.abs((p.x || p.r) - x);\n          if (d < delta) {\n            delta = d;\n            point = p;\n          }\n        });\n      }\n    }\n    if (point) {\n      const content = this.legendFormatter(\n        this._options.horizontal ?\n          (data.yvals || [''])[0] :\n          (data.xvals || [''])[0]\n        , data.points, point.curveNumber);\n      let left = (data.event.offsetX + 20) + 'px';\n      if (data.event.offsetX > this.chartContainer.nativeElement.clientWidth / 2) {\n        left = Math.max(0, data.event.offsetX - this.toolTip.nativeElement.clientWidth - 20) + 'px';\n      }\n      const top = Math.min(\n        this.el.nativeElement.getBoundingClientRect().height - this.toolTip.nativeElement.getBoundingClientRect().height - 20,\n        data.event.y - 20 - this.rect.top) + 'px';\n      this.moveTooltip(top, left, content);\n    }\n  }\n\n  getTooltipPosition() {\n    return {\n      top: this.tooltipPosition.top,\n      left: this.tooltipPosition.left,\n    };\n  }\n\n  private moveTooltip(top, left, content) {\n    this.tooltipPosition = {top, left};\n    this.renderer.setProperty(this.toolTip.nativeElement, 'innerHTML', content);\n  }\n\n  relayout($event: any) {\n\n  }\n\n  protected getLabelColor(el: HTMLElement) {\n    return this.getCSSColor(el, '--warp-view-chart-label-color', '#8e8e8e').trim();\n  }\n\n  protected getGridColor(el: HTMLElement) {\n    return this.getCSSColor(el, '--warp-view-chart-grid-color', '#8e8e8e').trim();\n  }\n\n  protected getCSSColor(el: HTMLElement, property: string, defColor: string) {\n    const color = getComputedStyle(el).getPropertyValue(property).trim();\n    return color === '' ? defColor : color;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {EventEmitter} from '@angular/core';\n\nexport class Size {\n  constructor(public width: number, public height: number) {\n  }\n}\n\n\nexport class SizeService {\n  public sizeChanged$: EventEmitter<Size>;\n\n  constructor() {\n    this.sizeChanged$ = new EventEmitter();\n  }\n\n  public change(size: Size): void {\n    this.sizeChanged$.emit(size);\n  }\n}\n","/* tslint:disable:no-bitwise */\n\n/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nexport class Timsort {\n\n  /**\n   * Default minimum size of a run.\n   */\n  private static DEFAULT_MIN_MERGE = 32;\n\n  /**\n   * Minimum ordered subsequece required to do galloping.\n   */\n  private static DEFAULT_MIN_GALLOPING = 7;\n\n  /**\n   * Default tmp storage length. Can increase depending on the size of the\n   * smallest run to merge.\n   */\n  private static DEFAULT_TMP_STORAGE_LENGTH = 256;\n\n  /**\n   * Pre-computed powers of 10 for efficient lexicographic comparison of\n   * small integers.\n   */\n  private static POWERS_OF_TEN = [1e0, 1e1, 1e2, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9];\n\n  private readonly array = null;\n  private readonly compare = null;\n  private minGallop = Timsort.DEFAULT_MIN_GALLOPING;\n  private readonly length = 0;\n  private readonly tmpStorageLength = Timsort.DEFAULT_TMP_STORAGE_LENGTH;\n  private readonly stackLength: number = 0;\n  private readonly runStart = null;\n  private readonly runLength = null;\n  private stackSize = 0;\n  private readonly tmp: any;\n\n  constructor(array, compare) {\n    this.array = array;\n    this.compare = compare;\n    this.length = array.length;\n    if (this.length < 2 * Timsort.DEFAULT_TMP_STORAGE_LENGTH) {\n      this.tmpStorageLength = this.length >>> 1;\n    }\n    this.tmp = new Array(this.tmpStorageLength);\n    this.stackLength = (this.length < 120 ? 5 : this.length < 1542 ? 10 : this.length < 119151 ? 19 : 40);\n    this.runStart = new Array(this.stackLength);\n    this.runLength = new Array(this.stackLength);\n  }\n\n  private static log10(x) {\n    if (x < 1e5) {\n      if (x < 1e2) {\n        return x < 1e1 ? 0 : 1;\n      }\n      if (x < 1e4) {\n        return x < 1e3 ? 2 : 3;\n      }\n      return 4;\n    }\n    if (x < 1e7) {\n      return x < 1e6 ? 5 : 6;\n    }\n    if (x < 1e9) {\n      return x < 1e8 ? 7 : 8;\n    }\n    return 9;\n  }\n\n  private static minRunLength(n) {\n    let r = 0;\n    while (n >= Timsort.DEFAULT_MIN_MERGE) {\n      r |= (n & 1);\n      n >>= 1;\n    }\n    return n + r;\n  }\n\n  private static makeAscendingRun(array, lo, hi, compare) {\n    let runHi = lo + 1;\n    if (runHi === hi) {\n      return 1;\n    }\n    // Descending\n    if (compare(array[runHi++], array[lo]) < 0) {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n        runHi++;\n      }\n      Timsort.reverseRun(array, lo, runHi);\n      // Ascending\n    } else {\n      while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n        runHi++;\n      }\n    }\n    return runHi - lo;\n  }\n\n  private static reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n      const t = array[lo];\n      array[lo++] = array[hi];\n      array[hi--] = t;\n    }\n  }\n\n  private static binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n      start++;\n    }\n    for (; start < hi; start++) {\n      const pivot = array[start];\n      // Ranges of the array where pivot belongs\n      let left = lo;\n      let right = start;\n      while (left < right) {\n        const mid = (left + right) >>> 1;\n        if (compare(pivot, array[mid]) < 0) {\n          right = mid;\n        } else {\n          left = mid + 1;\n        }\n      }\n      let n = start - left;\n      // Switch is just an optimization for small arrays\n      switch (n) {\n        case 3:\n          array[left + 3] = array[left + 2];\n        /* falls through */\n        case 2:\n          array[left + 2] = array[left + 1];\n        /* falls through */\n        case 1:\n          array[left + 1] = array[left];\n          break;\n        default:\n          while (n > 0) {\n            array[left + n] = array[left + n - 1];\n            n--;\n          }\n      }\n      array[left] = pivot;\n    }\n  }\n\n  private static gallopLeft(value, array, start, length, hint, compare) {\n    let lastOffset = 0;\n    let maxOffset;\n    let offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n      maxOffset = length - hint;\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      lastOffset += hint;\n      offset += hint;\n      // value <= array[start + hint]\n    } else {\n      maxOffset = hint + 1;\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      const tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n      const m = lastOffset + ((offset - lastOffset) >>> 1);\n      if (compare(value, array[start + m]) > 0) {\n        lastOffset = m + 1;\n      } else {\n        offset = m;\n      }\n    }\n    return offset;\n  }\n\n  private static gallopRight(value, array, start, length, hint, compare) {\n    let lastOffset = 0;\n    let maxOffset;\n    let offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n      maxOffset = hint + 1;\n      while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      const tmp = lastOffset;\n      lastOffset = hint - offset;\n      offset = hint - tmp;\n      // value >= array[start + hint]\n    } else {\n      maxOffset = length - hint;\n      while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n        lastOffset = offset;\n        offset = (offset << 1) + 1;\n        if (offset <= 0) {\n          offset = maxOffset;\n        }\n      }\n      if (offset > maxOffset) {\n        offset = maxOffset;\n      }\n      // Make offsets relative to start\n      lastOffset += hint;\n      offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n      const m = lastOffset + ((offset - lastOffset) >>> 1);\n      if (compare(value, array[start + m]) < 0) {\n        offset = m;\n      } else {\n        lastOffset = m + 1;\n      }\n    }\n    return offset;\n  }\n\n  private static alphabeticalCompare(a, b) {\n    if (a === b) {\n      return 0;\n    }\n    if (~~a === a && ~~b === b) {\n      if (a === 0 || b === 0) {\n        return a < b ? -1 : 1;\n      }\n      if (a < 0 || b < 0) {\n        if (b >= 0) {\n          return -1;\n        }\n        if (a >= 0) {\n          return 1;\n        }\n        a = -a;\n        b = -b;\n      }\n      const al = Timsort.log10(a);\n      const bl = Timsort.log10(b);\n      let t = 0;\n      if (al < bl) {\n        a *= Timsort.POWERS_OF_TEN[bl - al - 1];\n        b /= 10;\n        t = -1;\n      } else if (al > bl) {\n        b *= Timsort.POWERS_OF_TEN[al - bl - 1];\n        a /= 10;\n        t = 1;\n      }\n      if (a === b) {\n        return t;\n      }\n      return a < b ? -1 : 1;\n    }\n    const aStr = String(a);\n    const bStr = String(b);\n    if (aStr === bStr) {\n      return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n  }\n\n  public static sort(array: any[], compare?: (a: any, b: any) => number, lo?: number, hi?: number) {\n    if (!Array.isArray(array)) {\n      throw new TypeError('Can only sort arrays');\n    }\n    if (!compare) {\n      compare = Timsort.alphabeticalCompare;\n    } else if (typeof compare !== 'function') {\n      hi = lo;\n      lo = compare;\n      compare = Timsort.alphabeticalCompare;\n    }\n    if (!lo) {\n      lo = 0;\n    }\n    if (!hi) {\n      hi = array.length;\n    }\n    let remaining = hi - lo;\n    // The array is already sorted\n    if (remaining < 2) {\n      return;\n    }\n    let runLength = 0;\n    // On small arrays binary sort can be used directly\n    if (remaining < Timsort.DEFAULT_MIN_MERGE) {\n      runLength = Timsort.makeAscendingRun(array, lo, hi, compare);\n      Timsort.binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n      return;\n    }\n    const ts = new Timsort(array, compare);\n    const minRun = Timsort.minRunLength(remaining);\n    do {\n      runLength = Timsort.makeAscendingRun(array, lo, hi, compare);\n      if (runLength < minRun) {\n        let force = remaining;\n        if (force > minRun) {\n          force = minRun;\n        }\n        Timsort.binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n        runLength = force;\n      }\n      // Push new run and merge if necessary\n      ts.pushRun(lo, runLength);\n      ts.mergeRuns();\n      // Go find next run\n      remaining -= runLength;\n      lo += runLength;\n    } while (remaining !== 0);\n    // Force merging of remaining runs\n    ts.forceMergeRuns();\n  }\n\n  pushRun(runStart, runLength) {\n    this.runStart[this.stackSize] = runStart;\n    this.runLength[this.stackSize] = runLength;\n    this.stackSize += 1;\n  }\n\n  mergeRuns() {\n    while (this.stackSize > 1) {\n      let n = this.stackSize - 2;\n      if ((n >= 1 && this.runLength[n - 1] <= this.runLength[n] + this.runLength[n + 1])\n        || (n >= 2 && this.runLength[n - 2] <= this.runLength[n] + this.runLength[n - 1])) {\n        if (this.runLength[n - 1] < this.runLength[n + 1]) {\n          n--;\n        }\n      } else if (this.runLength[n] > this.runLength[n + 1]) {\n        break;\n      }\n      this.mergeAt(n);\n    }\n  }\n\n  forceMergeRuns() {\n    while (this.stackSize > 1) {\n      let n = this.stackSize - 2;\n      if (n > 0 && this.runLength[n - 1] < this.runLength[n + 1]) {\n        n--;\n      }\n      this.mergeAt(n);\n    }\n  }\n\n  mergeAt(i) {\n    const compare = this.compare;\n    const array = this.array;\n    let start1 = this.runStart[i];\n    let length1 = this.runLength[i];\n    const start2 = this.runStart[i + 1];\n    let length2 = this.runLength[i + 1];\n    this.runLength[i] = length1 + length2;\n    if (i === this.stackSize - 3) {\n      this.runStart[i + 1] = this.runStart[i + 2];\n      this.runLength[i + 1] = this.runLength[i + 2];\n    }\n    this.stackSize--;\n    const k = Timsort.gallopRight(array[start2], array, start1, length1, 0, compare);\n    start1 += k;\n    length1 -= k;\n    if (length1 === 0) {\n      return;\n    }\n    length2 = Timsort.gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n    if (length2 === 0) {\n      return;\n    }\n    if (length1 <= length2) {\n      this.mergeLow(start1, length1, start2, length2);\n\n    } else {\n      this.mergeHigh(start1, length1, start2, length2);\n    }\n  }\n\n  mergeLow(start1, length1, start2, length2) {\n    const compare = this.compare;\n    const array = this.array;\n    const tmp = this.tmp;\n    let i;\n    for (i = 0; i < length1; i++) {\n      tmp[i] = array[start1 + i];\n    }\n    let cursor1 = 0;\n    let cursor2 = start2;\n    let dest = start1;\n    array[dest++] = array[cursor2++];\n    if (--length2 === 0) {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n      return;\n    }\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n      array[dest + length2] = tmp[cursor1];\n      return;\n    }\n    let minGallop = this.minGallop;\n    while (true) {\n      let count1 = 0;\n      let count2 = 0;\n      let exit = false;\n      do {\n        if (compare(array[cursor2], tmp[cursor1]) < 0) {\n          array[dest++] = array[cursor2++];\n          count2++;\n          count1 = 0;\n          if (--length2 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest++] = tmp[cursor1++];\n          count1++;\n          count2 = 0;\n          if (--length1 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < minGallop);\n      if (exit) {\n        break;\n      }\n      do {\n        count1 = Timsort.gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n        if (count1 !== 0) {\n          for (i = 0; i < count1; i++) {\n            array[dest + i] = tmp[cursor1 + i];\n          }\n          dest += count1;\n          cursor1 += count1;\n          length1 -= count1;\n          if (length1 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n          exit = true;\n          break;\n        }\n        count2 = Timsort.gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n        if (count2 !== 0) {\n          for (i = 0; i < count2; i++) {\n            array[dest + i] = array[cursor2 + i];\n          }\n          dest += count2;\n          cursor2 += count2;\n          length2 -= count2;\n          if (length2 === 0) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest++] = tmp[cursor1++];\n        if (--length1 === 1) {\n          exit = true;\n          break;\n        }\n        minGallop--;\n      } while (count1 >= Timsort.DEFAULT_MIN_GALLOPING || count2 >= Timsort.DEFAULT_MIN_GALLOPING);\n      if (exit) {\n        break;\n      }\n      if (minGallop < 0) {\n        minGallop = 0;\n      }\n      minGallop += 2;\n    }\n    this.minGallop = minGallop;\n    if (minGallop < 1) {\n      this.minGallop = 1;\n    }\n    if (length1 === 1) {\n      for (i = 0; i < length2; i++) {\n        array[dest + i] = array[cursor2 + i];\n      }\n      array[dest + length2] = tmp[cursor1];\n    } else if (length1 === 0) {\n      throw new Error('mergeLow preconditions were not respected');\n    } else {\n      for (i = 0; i < length1; i++) {\n        array[dest + i] = tmp[cursor1 + i];\n      }\n    }\n  }\n\n  mergeHigh(start1, length1, start2, length2) {\n    const compare = this.compare;\n    const array = this.array;\n    const tmp = this.tmp;\n    let i;\n    for (i = 0; i < length2; i++) {\n      tmp[i] = array[start2 + i];\n    }\n    let cursor1 = start1 + length1 - 1;\n    let cursor2 = length2 - 1;\n    let dest = start2 + length2 - 1;\n    let customCursor = 0;\n    let customDest = 0;\n    array[dest--] = array[cursor1--];\n    if (--length1 === 0) {\n      customCursor = dest - (length2 - 1);\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n      return;\n    }\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n      array[dest] = tmp[cursor2];\n      return;\n    }\n    let minGallop = this.minGallop;\n    while (true) {\n      let count1 = 0;\n      let count2 = 0;\n      let exit = false;\n      do {\n        if (compare(tmp[cursor2], array[cursor1]) < 0) {\n          array[dest--] = array[cursor1--];\n          count1++;\n          count2 = 0;\n          if (--length1 === 0) {\n            exit = true;\n            break;\n          }\n        } else {\n          array[dest--] = tmp[cursor2--];\n          count2++;\n          count1 = 0;\n          if (--length2 === 1) {\n            exit = true;\n            break;\n          }\n        }\n      } while ((count1 | count2) < minGallop);\n      if (exit) {\n        break;\n      }\n      do {\n        count1 = length1 - Timsort.gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n        if (count1 !== 0) {\n          dest -= count1;\n          cursor1 -= count1;\n          length1 -= count1;\n          customDest = dest + 1;\n          customCursor = cursor1 + 1;\n          for (i = count1 - 1; i >= 0; i--) {\n            array[customDest + i] = array[customCursor + i];\n          }\n          if (length1 === 0) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest--] = tmp[cursor2--];\n        if (--length2 === 1) {\n          exit = true;\n          break;\n        }\n        count2 = length2 - Timsort.gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n        if (count2 !== 0) {\n          dest -= count2;\n          cursor2 -= count2;\n          length2 -= count2;\n          customDest = dest + 1;\n          customCursor = cursor2 + 1;\n          for (i = 0; i < count2; i++) {\n            array[customDest + i] = tmp[customCursor + i];\n          }\n          if (length2 <= 1) {\n            exit = true;\n            break;\n          }\n        }\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n          exit = true;\n          break;\n        }\n        minGallop--;\n      } while (count1 >= Timsort.DEFAULT_MIN_GALLOPING || count2 >= Timsort.DEFAULT_MIN_GALLOPING);\n      if (exit) {\n        break;\n      }\n      if (minGallop < 0) {\n        minGallop = 0;\n      }\n      minGallop += 2;\n    }\n    this.minGallop = minGallop;\n    if (minGallop < 1) {\n      this.minGallop = 1;\n    }\n    if (length2 === 1) {\n      dest -= length1;\n      cursor1 -= length1;\n      customDest = dest + 1;\n      customCursor = cursor1 + 1;\n      for (i = length1 - 1; i >= 0; i--) {\n        array[customDest + i] = array[customCursor + i];\n      }\n      array[dest] = tmp[cursor2];\n    } else if (length2 === 0) {\n      throw new Error('mergeHigh preconditions were not respected');\n    } else {\n      customCursor = dest - (length2 - 1);\n      for (i = 0; i < length2; i++) {\n        array[customCursor + i] = tmp[i];\n      }\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, NgZone, OnInit, Output, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {DataModel} from '../../model/dataModel';\nimport {GTS} from '../../model/GTS';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\nimport {ChartBounds} from '../../model/chartBounds';\nimport {ColorLib} from '../../utils/color-lib';\nimport {VisibilityState, WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Subject} from 'rxjs';\nimport {debounceTime} from 'rxjs/operators';\nimport {Timsort} from '../../utils/timsort';\n\n@Component({\n  selector: 'warpview-chart',\n  templateUrl: './warp-view-chart.component.html',\n  styleUrls: ['./warp-view-chart.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewChartComponent extends WarpViewComponent implements OnInit {\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    const previousVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'previousVisibility'], previousVisibility);\n    this._hiddenData = hiddenData;\n    this.visibility = [];\n    this.visibleGtsId.forEach(id => this.visibility.push(hiddenData.indexOf(id) < 0 && (id !== -1)));\n    this.LOG.debug(['hiddenData', 'hiddendygraphfullv'], this.visibility);\n    const newVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'json'], previousVisibility, newVisibility, this._hiddenData);\n    if (previousVisibility !== newVisibility) {\n      const visible = [];\n      const hidden = [];\n      (this.gtsId || []).forEach((id, i) => {\n        if (this._hiddenData.indexOf(id) > -1) {\n          hidden.push(i);\n        } else {\n          visible.push(i);\n        }\n      });\n      if (visible.length > 0) {\n        this.graph.restyleChart({visible: true}, visible);\n      }\n      if (hidden.length > 0) {\n        this.graph.restyleChart({visible: false}, hidden);\n      }\n      this.LOG.debug(['hiddendygraphtrig', 'destroy'], 'redraw by visibility change', visible, hidden);\n    }\n  }\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  @Input('standalone') standalone = true;\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n\n  // tslint:disable-next-line:variable-name\n  private _type = 'line';\n  private visibility: boolean[] = [];\n  private maxTick = 0;\n  private minTick = 0;\n  private visibleGtsId = [];\n  private gtsId = [];\n  private dataHashset = {};\n  private chartBounds: ChartBounds = new ChartBounds();\n  private visibilityStatus: VisibilityState = 'unknown';\n  private afterBoundsUpdate = false;\n  private marginLeft: number;\n  private maxPlottable = 10000;\n  parsing = false;\n  unhighliteCurve = new Subject<number[]>();\n  highliteCurve = new Subject<{ on: number[], off: number[] }>();\n  layout: Partial<any> = {\n    showlegend: false,\n    autosize: true,\n    hovermode: 'x',\n    hoverdistance: 20,\n    xaxis: {\n      font: {}\n    },\n    yaxis: {\n      exponentformat: 'none',\n      fixedrange: true,\n      automargin: true,\n      showline: true,\n      font: {}\n    },\n    margin: {\n      t: 0,\n      b: 30,\n      r: 10,\n      l: 50\n    },\n  };\n  private highlighted: any;\n\n  update(options, refresh): void {\n    this.drawChart(refresh);\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewChartComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  public async getTimeClip(): Promise<ChartBounds> {\n    return new Promise<ChartBounds>(resolve => {\n      this.LOG.debug(['getTimeClip'], this.chartBounds);\n      resolve(this.chartBounds);\n    });\n  }\n\n  public resize(newHeight: number) {\n    this.height = newHeight;\n    this.layout.height = this.height;\n    if (this._options.showRangeSelector) {\n      this.layout.xaxis.rangeslider = {\n        bgcolor: 'transparent',\n        thickness: 40 / this.height\n      };\n    }\n  }\n\n  drawChart(reparseNewData: boolean = false) {\n    this.LOG.debug(['drawChart', 'this.layout', 'this.options'], this.layout, this._options);\n    if (!this.initChart(this.el)) {\n      this.LOG.debug(['drawChart', 'initChart'], this._options);\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    if (!!this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.type = 'linear';\n      this.layout.xaxis.tick0 = this.minTick / this.divider;\n    } else {\n      this.layout.xaxis.type = 'date';\n      this.layout.xaxis.tick0 = moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true);\n    }\n    this.layout.yaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.yaxis.zerolinecolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.zerolinecolor = this.getGridColor(this.el.nativeElement);\n    this.layout.margin.t = this.standalone ? 20 : 10;\n    this.layout.showlegend = this._showLegend;\n    if (!this._responsive) {\n      this.layout.width = this.width;\n      this.layout.height = this.height;\n    }\n    this.LOG.debug(['drawChart', 'this.options'], this.layout, this._options);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    if (this._options.showRangeSelector) {\n      this.layout.xaxis.rangeslider = {\n        bgcolor: 'transparent',\n        thickness: 40 / this.height\n      };\n    } else {\n      this.layout.margin.b = 30;\n    }\n    const x: any = {\n      tick0: undefined,\n      range: [],\n    };\n    this.LOG.debug(['drawChart', 'updateBounds'], this.chartBounds);\n    const min = this.chartBounds.tsmin || this.minTick;\n    const max = this.chartBounds.tsmax || this.maxTick;\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = min / this.divider;\n      x.range = [min, max];\n    } else {\n      x.tick0 = moment.tz(min / this.divider, this._options.timeZone).toISOString(true);\n      x.range = [\n        moment.tz(min / this.divider, this._options.timeZone).toISOString(true),\n        moment.tz(max / this.divider, this._options.timeZone).toISOString(true)\n      ];\n    }\n    this.layout.xaxis = x;\n    this.layout = {...this.layout};\n    this.loading = false;\n    this.highliteCurve.pipe(debounceTime(200)).subscribe(value => {\n      Promise.resolve().then(() => {\n        this.graph.restyleChart({opacity: 0.4}, value.off);\n        this.graph.restyleChart({opacity: 1}, value.on);\n      });\n    });\n    this.unhighliteCurve.pipe(debounceTime(200)).subscribe(value => {\n      Promise.resolve().then(() => {\n        this.graph.restyleChart({opacity: 1}, value);\n      });\n    });\n  }\n\n  private emitNewBounds(min, max, marginLeft) {\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.boundsDidChange.emit({bounds: {min, max, marginLeft}, source: 'chart'});\n    } else {\n      this.boundsDidChange.emit({\n        bounds: {\n          min: moment.tz(min, this._options.timeZone).valueOf(),\n          max: moment.tz(max, this._options.timeZone).valueOf(),\n          marginLeft\n        }, source: 'chart'\n      });\n    }\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    this.parsing = true;\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], this._options.timeMode);\n    this.LOG.debug(['convert', 'this._hiddenData'], this._hiddenData);\n    if (GTSLib.isArray(data.data)) {\n      let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n      this.maxTick = Number.NEGATIVE_INFINITY;\n      this.minTick = Number.POSITIVE_INFINITY;\n      this.visibleGtsId = [];\n      this.gtsId = [];\n      const nonPlottable = gtsList.filter(g => {\n        this.LOG.debug(['convert'], GTSLib.isGtsToPlot(g));\n        return (g.v && !GTSLib.isGtsToPlot(g));\n      });\n      gtsList = gtsList.filter(g => {\n        return (g.v && GTSLib.isGtsToPlot(g));\n      });\n      // initialize visibility status\n      if (this.visibilityStatus === 'unknown') {\n        this.visibilityStatus = gtsList.length > 0 ? 'plottableShown' : 'nothingPlottable';\n      }\n\n      this.LOG.debug(['convert'], this._options.timeMode);\n      let timestampMode = true;\n      const tsLimit = 100 * GTSLib.getDivider(this._options.timeUnit);\n      this.LOG.debug(['convert'], 'forEach GTS');\n      gtsList.forEach((gts: GTS) => {\n        const ticks = gts.v.map(t => t[0]);\n        const size = gts.v.length;\n        timestampMode = timestampMode && (ticks[0] > -tsLimit && ticks[0] < tsLimit);\n        timestampMode = timestampMode && (ticks[size - 1] > -tsLimit && ticks[size - 1] < tsLimit);\n      });\n      if (timestampMode || this._options.timeMode === 'timestamp') {\n        this.layout.xaxis.type = 'linear';\n      } else {\n        this.layout.xaxis.type = 'date';\n      }\n      gtsList.forEach((gts: GTS, i) => {\n        if (gts.v && GTSLib.isGtsToPlot(gts)) {\n          Timsort.sort(gts.v, (a, b) => a[0] - b[0]);\n          const size = gts.v.length;\n          this.LOG.debug(['convert'], gts);\n          const label = GTSLib.serializeGtsMetadata(gts);\n          const c = ColorLib.getColor(gts.id, this._options.scheme);\n          const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            type: this._type === 'spline' ? 'scatter' : 'scattergl',\n            mode: this._type === 'scatter' ? 'markers' : size > this.maxPlottable ? 'lines' : 'lines+markers',\n            // name: label,\n            text: label,\n            x: [],\n            y: [],\n            line: {color},\n            hoverinfo: 'none',\n            connectgaps: false,\n            visible: !(this._hiddenData.filter(h => h === gts.id).length > 0),\n          };\n          if (this._type === 'scatter' || size < this.maxPlottable) {\n            series.marker = {\n              size: 15,\n              color: new Array(size).fill(color),\n              line: {color, width: 3},\n              opacity: new Array(size).fill(this._type === 'scatter' || this._options.showDots ? 1 : 0)\n            };\n          }\n          switch (this._type) {\n            case 'spline':\n              series.line.shape = 'spline';\n              break;\n            case 'area':\n              series.fill = 'tozeroy';\n              series.fillcolor = ColorLib.transparentize(color, 0.3);\n              break;\n            case 'step':\n              series.line.shape = 'hvh';\n              break;\n            case 'step-before':\n              series.line.shape = 'vh';\n              break;\n            case 'step-after':\n              series.line.shape = 'hv';\n              break;\n          }\n          this.visibleGtsId.push(gts.id);\n          this.gtsId.push(gts.id);\n          this.LOG.debug(['convert'], 'forEach value');\n          const ticks = gts.v.map(t => t[0]);\n          const values = gts.v.map(t => t[t.length - 1]);\n\n          if (size > 0) {\n            this.minTick = this.minTick || ticks[0];\n            this.maxTick = this.maxTick || ticks[0];\n            for (let v = 1; v < size; v++) {\n              const val = ticks[v];\n              this.minTick = val <= this.minTick ? val : this.minTick;\n              this.maxTick = val >= this.maxTick ? val : this.maxTick;\n            }\n          }\n          if (timestampMode || this._options.timeMode === 'timestamp') {\n            series.x = ticks;\n          } else {\n            if (this._options.timeZone !== 'UTC') {\n              series.x = ticks.map(t => moment.utc(t / this.divider).tz(this._options.timeZone).toISOString());\n            } else {\n              series.x = ticks.map(t => moment.utc(t / this.divider).toISOString());\n            }\n          }\n          series.y = values;\n          this.LOG.debug(['convert'], 'forEach value end', this.minTick, this.maxTick);\n          dataset.push(series);\n        }\n      });\n      if (nonPlottable.length > 0 && gtsList.length === 0) {\n        nonPlottable.forEach(g => {\n          g.v.forEach(value => {\n            const ts = value[0];\n            if (ts < this.minTick) {\n              this.minTick = ts;\n            }\n            if (ts > this.maxTick) {\n              this.maxTick = ts;\n            }\n          });\n        });\n        // if there is not any plottable data, we must add a fake one with id -1. This one will always be hidden.\n        if (0 === gtsList.length) {\n          if (!this.dataHashset[this.minTick]) {\n            this.dataHashset[this.minTick] = [0];\n          }\n          if (!this.dataHashset[this.maxTick]) {\n            this.dataHashset[this.maxTick] = [0];\n          }\n          this.visibility.push(false);\n          this.visibleGtsId.push(-1);\n        }\n      }\n    }\n    this.parsing = false;\n    this.LOG.debug(['convert'], 'end', dataset);\n    this.noData = dataset.length === 0;\n    return dataset;\n  }\n\n  afterPlot(plotlyInstance) {\n    super.afterPlot(plotlyInstance);\n    this.marginLeft = parseInt((this.graph.plotEl.nativeElement as HTMLElement).querySelector('g.bglayer > rect').getAttribute('x'), 10);\n    this.LOG.debug(['plotly_afterPlot']);\n    if (this.chartBounds.tsmin !== this.minTick || this.chartBounds.tsmax !== this.maxTick) {\n      this.chartBounds.tsmin = this.minTick;\n      this.chartBounds.tsmax = this.maxTick;\n      this.chartBounds.marginLeft = this.marginLeft;\n      this.chartDraw.emit(this.chartBounds);\n      if (this.afterBoundsUpdate || this.standalone) {\n        this.LOG.debug(['afterPlot', 'updateBounds'], this.minTick, this.maxTick);\n        this.emitNewBounds(this.minTick, this.maxTick, this.marginLeft);\n        this.loading = false;\n        this.afterBoundsUpdate = false;\n      }\n    } else {\n      this.loading = false;\n    }\n  }\n\n  relayout(data: any) {\n    if (data['xaxis.range'] && data['xaxis.range'].length === 2) {\n      this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range'], data['xaxis.range']);\n      this.chartBounds.msmin = data['xaxis.range'][0];\n      this.chartBounds.msmax = data['xaxis.range'][1];\n      this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf() * this.divider;\n      this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf() * this.divider;\n    } else if (data['xaxis.range[0]'] && data['xaxis.range[1]']) {\n      this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range[x]'], data['xaxis.range[0]']);\n      this.chartBounds.msmin = data['xaxis.range[0]'];\n      this.chartBounds.msmax = data['xaxis.range[1]'];\n      this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf() * this.divider;\n      this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf() * this.divider;\n    } else if (data['xaxis.autorange']) {\n      this.LOG.debug(['relayout', 'updateBounds', 'autorange'], data, this.minTick, this.maxTick);\n      this.chartBounds.tsmin = this.minTick;\n      this.chartBounds.tsmax = this.maxTick;\n    }\n    this.LOG.debug(['relayout', 'updateBounds'], this.chartBounds);\n    this.emitNewBounds(this.chartBounds.tsmin, this.chartBounds.tsmax, this.marginLeft);\n    this.loading = false;\n    this.afterBoundsUpdate = false;\n\n  }\n\n  sliderChange($event: any) {\n    this.LOG.debug(['sliderChange'], $event);\n    console.log($event);\n  }\n\n  updateBounds(min, max) {\n    this.LOG.debug(['updateBounds'], min, max, this._options);\n    min = min || this.minTick / this.divider;\n    max = max || this.maxTick / this.divider;\n    this.layout.xaxis.autorange = false;\n    this.LOG.debug(['updateBounds'],\n      moment.tz(min, this._options.timeZone).toISOString(),\n      moment.tz(max, this._options.timeZone).toISOString());\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.range = [min, max];\n      this.layout.xaxis.tick0 = min;\n    } else {\n      this.layout.xaxis.range = [\n        moment.tz(min, this._options.timeZone).toISOString(),\n        moment.tz(max, this._options.timeZone).toISOString()\n      ];\n      this.layout.xaxis.tick0 = moment.tz(min, this._options.timeZone).toISOString();\n    }\n    this.layout = {...this.layout};\n    this.LOG.debug(['updateBounds'], this.layout);\n    this.afterBoundsUpdate = true;\n  }\n\n\n  setRealBounds(chartBounds: ChartBounds) {\n    this.afterBoundsUpdate = true;\n    this.minTick = chartBounds.tsmin;\n    this.maxTick = chartBounds.tsmax;\n    this._options.bounds = this._options.bounds || {};\n    this._options.bounds.minDate = this.minTick;\n    this._options.bounds.maxDate = this.maxTick;\n    const x: any = {\n      tick0: undefined,\n      range: [],\n    };\n    if (this._options.showRangeSelector) {\n      x.rangeslider = {\n        bgcolor: 'transparent',\n        thickness: 40 / this.height\n      };\n    }\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = this.minTick / this.divider;\n      x.range = [this.minTick, this.maxTick];\n    } else {\n      x.tick0 = moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true);\n      x.range = [\n        moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true),\n        moment.tz(this.maxTick / this.divider, this._options.timeZone).toISOString(true)\n      ];\n    }\n    this.layout.xaxis = x;\n    this.layout = {...this.layout};\n  }\n\n  hover(data: any) {\n    this.LOG.debug(['hover'], data);\n    let delta = Number.MAX_VALUE;\n    // tslint:disable-next-line:no-shadowed-variable\n    let point;\n    const curves = [];\n    this.toolTip.nativeElement.style.display = 'block';\n    if (data.points[0] && data.points[0].data.orientation !== 'h') {\n      const y = (data.yvals || [''])[0];\n      data.points.forEach(p => {\n        curves.push(p.curveNumber);\n        const d = Math.abs(p.y - y);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    } else {\n      const x: number = (data.xvals || [''])[0];\n      data.points.forEach(p => {\n        curves.push(p.curveNumber);\n        const d = Math.abs(p.x - x);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    }\n    if (point && this.highlighted !== point.curveNumber) {\n      this.highliteCurve.next({on: [point.curveNumber], off: curves});\n      this.highlighted = point.curveNumber;\n    }\n    super.hover(data, point);\n    this.pointHover.emit(data.event);\n    /*setTimeout(() => {\n      let pn = -1;\n      let tn = -1;\n      let color = [];\n      let line = {};\n      let opacity = [];\n      data.points.forEach(p => {\n        if (!!p.data.marker) {\n          color = p.data.marker.color;\n          opacity = p.data.marker.opacity;\n          line = p.data.marker.line;\n          pn = p.pointNumber;\n          tn = p.curveNumber;\n          if (pn >= 0) {\n            color[pn] = 'transparent';\n            opacity[pn] = 1;\n            const update = {marker: {color, opacity, line, size: 15}};\n            this.graph.restyleChart(update, [tn]);\n            this.LOG.debug(['hover'], 'restyleChart inner', update, [tn]);\n          }\n        }\n      });\n    })*/\n  }\n\n  unhover(data: any) {\n    let delta = Number.MAX_VALUE;\n    // tslint:disable-next-line:no-shadowed-variable\n    let point;\n    if (data.points[0] && data.points[0].data.orientation !== 'h') {\n      const y = (data.yvals || [''])[0];\n      data.points.forEach(p => {\n        const d = Math.abs(p.y - y);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    } else {\n      const x: number = (data.xvals || [''])[0];\n      data.points.forEach(p => {\n        const d = Math.abs(p.x - x);\n        if (d < delta) {\n          delta = d;\n          point = p;\n        }\n      });\n    }\n    if (!!point && this.highlighted !== point.curveNumber) {\n      this.unhighliteCurve.next([this.highlighted]);\n      this.highlighted = undefined;\n    }\n    super.unhover(data, point);\n    /*setTimeout(() => {\n      let pn = -1;\n      let tn = -1;\n      let color = [];\n      let line = {};\n      let opacity = [];\n      data.points.forEach(p => {\n        if (!!p.data.marker) {\n          pn = p.pointNumber;\n          tn = p.curveNumber;\n          color = p.data.marker.color;\n          opacity = p.data.marker.opacity;\n          line = p.data.marker.line;\n          if (pn >= 0) {\n            color[pn] = p.data.line.color;\n            opacity[pn] = this._options.showDots ? 1 : 0;\n            const update = {marker: {color, opacity, line, size: 15}};\n            this.graph.restyleChart(update, [tn]);\n          }\n        }\n      });\n    })*/\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Injectable} from '@angular/core';\nimport {HttpErrorResponse} from '@angular/common/http';\n\nimport {Observable} from 'rxjs/internal/Observable';\nimport {of} from 'rxjs/internal/observable/of';\nimport {Logger} from '../utils/logger';\n\n\n/** Type of the handleError function returned by HttpErrorHandler.createHandleError */\nexport type HandleError = (operation?: string) => (error: HttpErrorResponse) => Observable<string>;\n\n// noinspection UnterminatedStatementJS\n/** Handles HttpClient errors */\n@Injectable()\nexport class HttpErrorHandler {\n  private LOG: Logger;\n\n  /**\n   */\n  constructor() {\n    this.LOG = new Logger(HttpErrorHandler, true);\n  }\n\n  createHandleError = (serviceName = '') =>\n    // tslint:disable-next-line:semicolon\n    (operation = 'operation') => this.handleError(serviceName, operation);\n\n  handleError(serviceName = '', operation = 'operation') {\n    return (error: HttpErrorResponse): Observable<string> => {\n      this.LOG.error([serviceName], error);\n      this.LOG.error([serviceName], `${operation} failed: ${error.statusText}`);\n      const message = ((error.error || {}).message)\n        ? error.error.message\n        : error.status ? error.statusText : 'Server error';\n      this.LOG.error([serviceName], message);\n      return of(message);\n    };\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {HttpClient, HttpResponse} from '@angular/common/http';\nimport {Injectable} from '@angular/core';\nimport {catchError, tap} from 'rxjs/operators';\nimport {HandleError, HttpErrorHandler} from './http-error-handler.service';\nimport {Logger} from '../utils/logger';\nimport {Observable} from 'rxjs';\n\n@Injectable({providedIn: 'root'})\nexport class Warp10Service {\n\n  private LOG: Logger;\n  private readonly handleError: HandleError;\n\n  constructor(\n    private http: HttpClient,\n    private httpErrorHandler: HttpErrorHandler) {\n    this.LOG = new Logger(Warp10Service, true);\n    this.handleError = httpErrorHandler.createHandleError('Warp10Service');\n  }\n\n  exec(warpScript: string, url: string): Observable<HttpResponse<string>> {\n    this.LOG.debug(['exec', 'warpScript'], url, warpScript);\n    return this.http.post<string>(url, warpScript, {\n      // @ts-ignore\n      observe: 'response',\n      // @ts-ignore\n      responseType: 'text'\n    })\n      .pipe(\n        tap(r => this.LOG.debug(['exec', 'result'], r)),\n        catchError(this.handleError('exec'))\n      );\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {HttpErrorHandler} from '../../services/http-error-handler.service';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Warp10Service} from '../../services/warp10.service';\nimport {Logger} from '../../utils/logger';\nimport {HttpResponse} from '@angular/common/http';\n\n@Component({\n  selector: 'warpview-tile',\n  templateUrl: './warp-view-tile.component.html',\n  styleUrls: ['./warp-view-tile.component.scss'],\n  providers: [HttpErrorHandler],\n  // encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewTileComponent extends WarpViewComponent implements OnInit, AfterViewInit {\n  @ViewChild('warpRef', {static: true}) warpRef: ElementRef;\n  @Output('warpscriptResult') warpscriptResult = new EventEmitter<any>();\n  @Output('execStatus') execStatus = new EventEmitter<any>();\n  @Output('execError') execError = new EventEmitter<any>();\n\n  @Input('type') type = 'line';\n  @Input('chartTitle') chartTitle;\n  @Input('url') url = '';\n  @Input('isAlone') isAlone = false; // used by plot to manage its keyboard events\n  @Input('gtsFilter') set gtsFilter(gtsFilter: string) {\n    this._gtsFilter = gtsFilter;\n  }\n\n  @Input()\n  set warpscript(warpScript: string) {\n    if (!!warpScript && this._warpScript !== warpScript) {\n      this._warpScript = warpScript;\n      this.execute(true);\n    }\n  }\n\n  get warpscript(): string {\n    return this._warpScript;\n  }\n\n  loaderMessage = '';\n  error: any;\n  status: string;\n  loading = false;\n  execResult: string;\n\n  private timer: any;\n  private _autoRefresh;\n  private _gtsFilter = '';\n  private _warpScript = '';\n  private execUrl = '';\n  private timeUnit = 'us';\n\n  constructor(\n    public el: ElementRef,\n    public sizeService: SizeService,\n    public renderer: Renderer2,\n    public ngZone: NgZone,\n    private warp10Service: Warp10Service,\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewTileComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  ngAfterViewInit() {\n    this._warpScript = this._warpScript || this.warpRef.nativeElement.textContent.trim();\n    this.LOG.debug(['ngAfterViewInit', 'warpScript'], this._warpScript);\n    this.el.nativeElement.style.opacity = '1';\n    if (this.warpRef.nativeElement.textContent.trim() !== '') {\n      this.execute(false);\n    }\n  }\n\n  update(options: Param): void {\n    this.LOG.debug(['update', 'options'], options);\n  }\n\n  /* Listeners */\n  @HostListener('document:keyup', ['$event'])\n  // @HostListener('keydown', ['$event'])\n  handleKeyDown(event: KeyboardEvent) {\n    if (event.key === 'r') {\n      this.execute(false);\n    }\n  }\n\n  /** detect some VSCode special modifiers in the beginnig of the code:\n   * @endpoint xxxURLxxx\n   * @timeUnit ns\n   * warning : the first line is empty (to confirm with other browsers)\n   */\n  private detectWarpScriptSpecialComments() {\n    // analyse the first warpScript lines starting with //\n    const extraParamsPattern = /\\s*\\/\\/\\s*@(\\w*)\\s*(.*)$/g;\n    const warpscriptLines = this._warpScript.split('\\n');\n    for (let l = 1; l < warpscriptLines.length; l++) {\n      const currentLine = warpscriptLines[l];\n      if (currentLine === '' || currentLine.search('//') >= 0) {\n        // find and extract // @paramname parameters\n        let lineOnMatch: RegExpMatchArray | null;\n        const re = RegExp(extraParamsPattern);\n        // noinspection JSAssignmentUsedAsCondition\n        // tslint:disable-next-line:no-conditional-assignment JSAssignmentUsedAsCondition\n        // noinspection JSAssignmentUsedAsCondition\n        while (lineOnMatch = re.exec(currentLine)) {\n          const parameterName = lineOnMatch[1];\n          const parameterValue = lineOnMatch[2];\n          switch (parameterName) {\n            case 'endpoint':        //        // @endpoint http://mywarp10server/api/v0/exec\n              this.execUrl = parameterValue;\n              break;\n            case 'timeUnit':\n              this.timeUnit = parameterValue.toLowerCase();   // set the time unit for graphs\n              break;\n            default:\n              break;\n          }\n        }\n      } else {\n        break; // no more comments at the beginning of the file\n      }\n    }\n  }\n\n  private execute(isRefresh: boolean) {\n    if (!!this._warpScript && this._warpScript.trim() !== '') {\n      this.LOG.debug(['execute'], isRefresh);\n      this.error = undefined;\n      this.loading = !isRefresh;\n      this.execResult = undefined;\n      this.loaderMessage = 'Requesting data';\n      this.execUrl = this.url;\n      //  this.execResult = undefined;\n      this.detectWarpScriptSpecialComments();\n      this.LOG.debug(['execute', 'warpScript'], this._warpScript);\n      this.warp10Service.exec(this._warpScript, this.execUrl).subscribe((response: HttpResponse<string> | string) => {\n        this.loading = false;\n        this.LOG.debug(['execute'], response);\n        if ((response as HttpResponse<string>).body) {\n          try {\n            const body = (response as HttpResponse<string>).body;\n            this.warpscriptResult.emit(body);\n            const headers = (response as HttpResponse<string>).headers;\n            this.status = `Your script execution took\n ${GTSLib.formatElapsedTime(parseInt(headers.get('x-warp10-elapsed'), 10))}\n serverside, fetched\n ${headers.get('x-warp10-fetched')} datapoints and performed\n ${headers.get('x-warp10-ops')}  WarpScript operations.`;\n            this.execStatus.emit({\n              message: this.status,\n              ops: parseInt(headers.get('x-warp10-ops'), 10),\n              elapsed: parseInt(headers.get('x-warp10-elapsed'), 10),\n              fetched: parseInt(headers.get('x-warp10-fetched'), 10),\n            });\n            if (this._autoRefresh !== this._options.autoRefresh) {\n              this._autoRefresh = this._options.autoRefresh;\n              if (this.timer) {\n                window.clearInterval(this.timer);\n              }\n              if (this._autoRefresh && this._autoRefresh > 0) {\n                this.timer = window.setInterval(() => this.execute(true), this._autoRefresh * 1000);\n              }\n            }\n            setTimeout(() => {\n              this.execResult = body;\n              this.loading = false;\n            });\n          } catch (e) {\n            this.LOG.error(['execute'], e);\n            this.loading = false;\n          }\n        } else {\n          this.LOG.error(['execute'], response);\n          this.error = response;\n          this.loading = false;\n          this.execError.emit(response);\n        }\n      }, e => {\n        this.loading = false;\n        this.execError.emit(e);\n        this.LOG.error(['execute'], e);\n      });\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n  chartDrawn(event) {\n    this.chartDraw.emit(event);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, Input, ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'warpview-spinner',\n  templateUrl: './warp-view-spinner.component.html',\n  styleUrls: ['./warp-view-spinner.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewSpinnerComponent {\n  @Input('message') message = 'Loading and parsing data...';\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, OnInit, Output} from '@angular/core';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-toggle',\n  templateUrl: './warp-view-toggle.component.html',\n  styleUrls: ['./warp-view-toggle.component.scss']\n})\nexport class WarpViewToggleComponent implements OnInit {\n  @Input('checked') set checked(state: boolean) {\n    this.state = state;\n  }\n\n  get checked(): boolean {\n    return this.state;\n  }\n\n  @Input('text1') text1 = '';\n  @Input('text2') text2 = '';\n\n  @Output('stateChange') stateChange = new EventEmitter<any>();\n\n  state = false;\n\n  constructor(public el: ElementRef) {\n  }\n\n  ngOnInit() {\n    this.state = this.checked;\n  }\n\n  switched() {\n    this.state = !this.state;\n    this.stateChange.emit({state: this.state, id: this.el.nativeElement.id});\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {ColorLib} from '../../utils/color-lib';\nimport moment from 'moment-timezone';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Timsort} from '../../utils/timsort';\n\n@Component({\n  selector: 'warpview-bar',\n  templateUrl: './warp-view-bar.component.html',\n  styleUrls: ['./warp-view-bar.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewBarComponent extends WarpViewComponent implements OnInit {\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    yaxis: {\n      exponentformat: 'none',\n      fixedrange: true,\n      showline: true\n    },\n    margin: {\n      t: 10,\n      b: 40,\n      r: 10,\n      l: 50\n    }\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewBarComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    let gtsList = [];\n    if (GTSLib.isArray(data.data)) {\n      data.data = GTSLib.flatDeep(data.data as any[]);\n      this.LOG.debug(['convert', 'isArray']);\n      if (data.data.length > 0 && GTSLib.isGts(data.data[0])) {\n        this.LOG.debug(['convert', 'isArray 2']);\n        gtsList = GTSLib.flattenGtsIdArray(data.data as any[], 0).res;\n      } else {\n        this.LOG.debug(['convert', 'isArray 3']);\n        gtsList = data.data as any[];\n      }\n    } else {\n      this.LOG.debug(['convert', 'not array']);\n      gtsList = [data.data];\n    }\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    const dataset = [];\n    gtsList.forEach((gts, i) => {\n      this.LOG.debug(['convert', 'gts item'], gts);\n      if (gts.v) {\n        Timsort.sort(gts.v, (a, b) => a[0] - b[0]);\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: 'bar',\n          mode: 'lines+markers',\n          name: label,\n          text: label,\n          orientation: this._options.horizontal ? 'h' : 'v',\n          x: [],\n          y: [],\n          hoverinfo: 'none',\n          marker: {\n            color: ColorLib.transparentize(color),\n            line: {\n              color,\n              width: 1\n            }\n          }\n        };\n        gts.v.forEach(value => {\n          const ts = value[0];\n          if (!this._options.horizontal) {\n            series.y.push(value[value.length - 1]);\n            if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n              series.x.push(ts);\n            } else {\n              series.x.push(moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toISOString());\n            }\n          } else {\n            series.x.push(value[value.length - 1]);\n            if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n              series.y.push(ts);\n            } else {\n              series.y.push(moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toISOString());\n            }\n          }\n        });\n        dataset.push(series);\n      } else {\n        this._options.timeMode = 'custom';\n        this.LOG.debug(['convert', 'gts'], gts);\n        (gts.columns || []).forEach((label, index) => {\n          const c = ColorLib.getColor(gts.id || index, this._options.scheme);\n          const color = ((data.params || [])[index] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            type: 'bar',\n            mode: 'lines+markers',\n            name: label,\n            text: label,\n            orientation: this._options.horizontal ? 'h' : 'v',\n            x: [],\n            y: [],\n            hoverinfo: 'none',\n            marker: {\n              color: ColorLib.transparentize(color),\n              line: {\n                color,\n                width: 1\n              }\n            }\n          };\n          if (this._options.horizontal) {\n            (gts.rows || []).forEach(r => {\n              series.y.unshift(r[0]);\n              series.x.push(r[index + 1]);\n            });\n          } else {\n            (gts.rows || []).forEach(r => {\n              series.x.push(r[0]);\n              series.y.push(r[index + 1]);\n            });\n          }\n          dataset.push(series);\n        });\n      }\n    });\n    this.LOG.debug(['convert', 'dataset'], dataset, this._options.horizontal);\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['buildGraph', 'this.layout'], this.responsive);\n    this.LOG.debug(['buildGraph', 'this.layout'], this.layout);\n    this.LOG.debug(['buildGraph', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this._showLegend;\n    this.layout.barmode = this._options.stacked ? 'stack' : 'group';\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\n\n@Component({\n  selector: 'warpview-bubble',\n  templateUrl: './warp-view-bubble.component.html',\n  styleUrls: ['./warp-view-bubble.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewBubbleComponent extends WarpViewComponent implements OnInit {\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    hovermode: 'closest',\n    hoverdistance: 20,\n    yaxis: {},\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 50\n    }\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewBubbleComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset = [];\n    GTSLib.flatDeep(data.data as any []).forEach((gts, i) => {\n      const label = Object.keys(gts)[0];\n      const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n      const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n      const series: Partial<any> = {\n        type: 'scattergl',\n        mode: 'markers',\n        name: label,\n        text: label,\n        x: [],\n        y: [],\n        hoverinfo: 'none',\n        marker: {\n          color: ColorLib.transparentize(color),\n          line: {\n            color\n          },\n          size: []\n        }\n      };\n      if (GTSLib.isGts(gts)) {\n        const ticks = gts.v.map(t => t[0]);\n        const values = gts.v.map(t => t[t.length - 1]);\n        const sizes = new Array(gts.v.length).fill(10);\n        if (this._options.timeMode === 'timestamp') {\n          series.x = ticks;\n        } else {\n          if (this._options.timeZone !== 'UTC') {\n            series.x = ticks.map(t => moment.utc(t / this.divider).tz(this._options.timeZone).toISOString());\n          } else {\n            series.x = ticks.map(t => moment.utc(t / this.divider).toISOString());\n          }\n        }\n        series.y = values;\n        series.marker.size = sizes;\n      } else {\n        gts[label].forEach(value => {\n          series.y.push(value[0]);\n          series.x.push(value[1]);\n          series.marker.size.push(value[2]);\n        });\n      }\n      dataset.push(series);\n    });\n    this.noData = dataset.length === 0;\n    this.LOG.debug(['convert', 'dataset'], dataset);\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.responsive'], this._responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport moment from 'moment-timezone';\n\n@Component({\n  selector: 'warpview-datagrid',\n  templateUrl: './warp-view-datagrid.component.html',\n  styleUrls: ['./warp-view-datagrid.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewDatagridComponent extends WarpViewComponent implements OnInit {\n\n\n  @Input('elemsCount') elemsCount = 15;\n\n  // tslint:disable-next-line:variable-name\n  _tabularData: { name: string, values: any[], headers: string[] }[] = [];\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewDatagridComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    this.loading = false;\n    this.chartDraw.emit();\n    if (!this.initChart(this.el)) {\n      return;\n    }\n  }\n\n  private getHeaderParam(i: number, j: number, key: string, def: string): string {\n    return this._data.params && this._data.params[i] && this._data.params[i][key] && this._data.params[i][key][j]\n      ? this._data.params[i][key][j]\n      : this._data.globalParams && this._data.globalParams[key] && this._data.globalParams[key][j]\n        ? this._data.globalParams[key][j]\n        : def;\n  }\n\n  protected convert(data: DataModel): any[] {\n    if (GTSLib.isArray(data.data)) {\n      const dataList = GTSLib.flatDeep(this._data.data as any[]);\n      this.LOG.debug(['convert', 'isArray'], dataList);\n      if (data.data.length > 0 && GTSLib.isGts(dataList[0])) {\n        this._tabularData = this.parseData(dataList);\n      } else {\n        this._tabularData = this.parseCustomData(dataList);\n      }\n    } else {\n      this._tabularData = this.parseCustomData([data.data as any]);\n    }\n    return [];\n  }\n\n  private parseCustomData(data: any[]): { name: string, values: any[], headers: string[] }[] {\n    const flatData: { name: string, values: any[], headers: string[] }[] = [];\n    data.forEach(d => {\n      const dataSet: { name: string, values: any[], headers: string[] } = {\n        name: d.title || '',\n        values: d.rows,\n        headers: d.columns,\n      };\n      flatData.push(dataSet);\n    });\n    this.LOG.debug(['parseCustomData', 'flatData'], flatData);\n    return flatData;\n  }\n\n  protected parseData(data: any[]): { name: string, values: any[], headers: string[] }[] {\n    const flatData: { name: string, values: any[], headers: string[] }[] = [];\n    this.LOG.debug(['parseData'], data);\n    data.forEach((d, i) => {\n      const dataSet: { name: string, values: any[], headers: string[] } = {\n        name: '',\n        values: [],\n        headers: []\n      };\n      if (GTSLib.isGts(d)) {\n        this.LOG.debug(['parseData', 'isGts'], d);\n        dataSet.name = GTSLib.serializeGtsMetadata(d);\n        dataSet.values = d.v.map(v => [this.formatDate(v[0])].concat(v.slice(1, v.length)));\n      } else {\n        this.LOG.debug(['parseData', 'is not a Gts'], d);\n        dataSet.values = GTSLib.isArray(d) ? d : [d];\n      }\n      dataSet.headers = [this.getHeaderParam(i, 0, 'headers', 'Date')];\n      if (d.v && d.v.length > 0 && d.v[0].length > 2) {\n        dataSet.headers.push(this.getHeaderParam(i, 1, 'headers', 'Latitude'));\n      }\n      if (d.v && d.v.length > 0 && d.v[0].length > 3) {\n        dataSet.headers.push(this.getHeaderParam(i, 2, 'headers', 'Longitude'));\n      }\n      if (d.v && d.v.length > 0 && d.v[0].length > 4) {\n        dataSet.headers.push(this.getHeaderParam(i, 3, 'headers', 'Elevation'));\n      }\n      if (d.v && d.v.length > 0) {\n        dataSet.headers.push(this.getHeaderParam(i, d.v[0].length - 1, 'headers', 'Value'));\n      }\n      if (dataSet.values.length > 0) {\n        flatData.push(dataSet);\n      }\n    });\n    this.LOG.debug(['parseData', 'flatData'], flatData, this._options.timeMode);\n    return flatData;\n  }\n\n  formatDate(date: number): string {\n    return this._options.timeMode === 'date' ? moment.tz(date / this.divider, this._options.timeZone).toISOString() : date.toString();\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, Input, OnInit, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../../utils/logger';\nimport {Param} from '../../../model/param';\nimport {ChartLib} from '../../../utils/chart-lib';\nimport deepEqual from 'deep-equal';\nimport {GTSLib} from '../../../utils/gts.lib';\n\n@Component({\n  selector: 'warpview-paginable',\n  templateUrl: './warp-view-paginable.component.html',\n  styleUrls: ['./warp-view-paginable.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewPaginableComponent implements OnInit {\n  constructor() {\n    this.LOG = new Logger(WarpViewPaginableComponent, this.debug);\n  }\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('options') set options(options: Param) {\n    if (!deepEqual(options, this._options)) {\n      this.drawGridData();\n    }\n  }\n\n  @Input('data') set data(data: { name: string, values: any[], headers: string[] }) {\n    if (data) {\n      this._data = data;\n      this.drawGridData();\n    }\n  }\n\n  @Input('elemsCount') elemsCount = 15;\n  @Input('windowed') windowed = 5;\n\n  page = 0;\n  pages: number[] = [];\n  // tslint:disable-next-line:variable-name\n  _data: { name: string, values: any[], headers: string[] };\n  displayedValues: any[] = [];\n  private LOG: Logger;\n  // tslint:disable-next-line:variable-name\n  private _debug = false;\n  // tslint:disable-next-line:variable-name\n  private _options: Param = {\n    ...new Param(), ...{\n      timeMode: 'date',\n      timeZone: 'UTC',\n      timeUnit: 'us',\n      bounds: {}\n    }\n  };\n\n  goto(page: number) {\n    this.page = page;\n    this.drawGridData();\n  }\n\n  next() {\n    this.page = Math.min(this.page + 1, this._data.values.length - 1);\n    this.drawGridData();\n  }\n\n  prev() {\n    this.page = Math.max(this.page - 1, 0);\n    this.drawGridData();\n  }\n\n  private drawGridData() {\n    this._options = ChartLib.mergeDeep(this._options, this.options) as Param;\n    this.LOG.debug(['drawGridData', '_options'], this._options);\n    if (!this._data) {\n      return;\n    }\n    this.pages = [];\n    for (let i = 0; i < (this._data.values ||Â [] ).length / this.elemsCount; i++) {\n      this.pages.push(i);\n    }\n    this.displayedValues = (this._data.values ||Â [] ).slice(\n      Math.max(0, this.elemsCount * this.page),\n      Math.min(this.elemsCount * (this.page + 1), (this._data.values ||Â [] ).length)\n    );\n    this.LOG.debug(['drawGridData', '_data'], this._data);\n  }\n\n  decodeURIComponent(str: string): string {\n    return decodeURIComponent(str);\n  }\n\n  ngOnInit() {\n    this.drawGridData();\n  }\n\n  formatLabel(name: string) {\n    return GTSLib.formatLabel(name);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnDestroy, OnInit, Renderer2, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport fitty, {FittyInstance} from 'fitty';\nimport moment from 'moment-timezone';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-display',\n  templateUrl: './warp-view-display.component.html',\n  styleUrls: ['./warp-view-display.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewDisplayComponent extends WarpViewComponent implements OnInit, OnDestroy {\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  toDisplay = '';\n  defOptions = {\n    timeMode: 'custom'\n  } as Param;\n\n  private fitties: FittyInstance;\n  private timer;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewDisplayComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  ngOnDestroy(): void {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.drawChart();\n    this.flexFont();\n  }\n\n  private drawChart() {\n    this.LOG.debug(['drawChart'], this._options, this.defOptions);\n    this.initChart(this.el);\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options);\n    this.LOG.debug(['drawChart', 'afterInit'], this._options, this.defOptions, this.height);\n    this.LOG.debug(['drawChart'], this._data, this.toDisplay);\n    this.flexFont();\n    this.chartDraw.emit();\n  }\n\n  protected convert(data: DataModel): any[] {\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options);\n    this.LOG.debug(['convert'], this._options.timeMode);\n    let display: string;\n    if (this._data.data) {\n      display = GTSLib.isArray(this._data.data) ? this._data.data[0] : this._data.data;\n    } else {\n      display = GTSLib.isArray(this._data) ? this._data[0] : this._data;\n    }\n    switch (this._options.timeMode) {\n      case 'date':\n        this.toDisplay = moment.tz(parseInt(display, 10) / this.divider, this._options.timeZone).toISOString(true);\n        break;\n      case 'duration':\n        const start = moment.tz(parseInt(display, 10) / this.divider, this._options.timeZone);\n        this.displayDuration(start);\n        break;\n      case 'custom':\n      case 'timestamp':\n        this.toDisplay = display;\n    }\n    return [];\n  }\n\n  getStyle() {\n    if (!this._options) {\n      return {};\n    } else {\n      const style: any = {'background-color': this._options.bgColor || 'transparent'};\n      if (this._options.fontColor) {\n        style.color = this._options.fontColor;\n      }\n      return style;\n    }\n  }\n\n  flexFont() {\n    if (!!this.wrapper) {\n      this.LOG.debug(['flexFont'], this.height);\n      if (this.fitties) {\n        this.fitties.unsubscribe();\n      }\n      this.fitties = fitty(this.wrapper.nativeElement, {\n        maxSize: (this.el.nativeElement as HTMLElement).parentElement.clientHeight * 0.80,\n        minSize: 14\n      });\n      this.LOG.debug(['flexFont'], 'ok', (this.el.nativeElement as HTMLElement).parentElement.clientHeight);\n      this.fitties.fit();\n      this.loading = false;\n    }\n  }\n\n  private displayDuration(start: any) {\n    this.timer = setInterval(() => {\n      const now = moment();\n      this.toDisplay = moment.duration(start.diff(now)).humanize(true);\n    }, 1000);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, HostListener, NgZone, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport moment from 'moment';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {ColorLib} from '../../utils/color-lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-drill-down',\n  templateUrl: './warp-view-drill-down.component.html',\n  styleUrls: ['./warp-view-drill-down.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewDrillDownComponent extends WarpViewComponent implements AfterViewInit {\n\n  heatMapData: any;\n  private parentWidth = -1;\n  private resizeTimer;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewDrillDownComponent, this._debug);\n  }\n\n  ngAfterViewInit() {\n    this.drawChart();\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.drawChart();\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    if (this.el.nativeElement.parentElement.clientWidth !== this.parentWidth || this.parentWidth <= 0) {\n      this.parentWidth = this.el.nativeElement.parentElement.clientWidth;\n      clearTimeout(this.resizeTimer);\n      this.resizeTimer = setTimeout(() => {\n        if (this.el.nativeElement.parentElement.clientWidth > 0) {\n          this.LOG.debug(['onResize'], this.el.nativeElement.parentElement.clientWidth);\n          this.drawChart();\n        } else {\n          this.onResize();\n        }\n      }, 150);\n    }\n  }\n\n  private drawChart() {\n    this.loading = false;\n    this.chartDraw.emit();\n    if (!this.initChart(this.el)) {\n      return;\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    const dataList = this._data.data as any[];\n    this.heatMapData = this.parseData(GTSLib.flatDeep(dataList));\n    return [];\n  }\n\n  private parseData(dataList: any[]) {\n    const details = [];\n    const values = [];\n    const dates = [];\n    const data = {};\n    const reducer = (accumulator, currentValue) => accumulator + parseInt(currentValue, 10);\n    this.LOG.debug(['parseData'], dataList);\n    dataList.forEach((gts, i) => {\n      const name = GTSLib.serializeGtsMetadata(gts);\n      gts.v.forEach(v => {\n        const refDate = moment.utc(v[0] / 1000).startOf('day').toISOString();\n        if (!data[refDate]) {\n          data[refDate] = [];\n        }\n        if (!values[refDate]) {\n          values[refDate] = [];\n        }\n        dates.push(v[0] / 1000);\n        values[refDate].push(v[v.length - 1]);\n        data[refDate].push({\n          name,\n          date: v[0] / 1000,\n          value: v[v.length - 1],\n          color: ColorLib.getColor(i, this._options.scheme),\n          id: i\n        });\n      });\n    });\n    Object.keys(data).forEach((d: string) => {\n      details.push({\n        date: moment.utc(d),\n        total: values[d].reduce(reducer),\n        details: data[d],\n        summary: []\n      });\n    });\n    return details;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Moment} from 'moment';\n\n/**\n *\n */\nexport class Datum {\n  date: Moment;\n  summary?: Summary[];\n  total?: number;\n  details?: Detail[];\n}\n\n/**\n *\n */\nexport class Summary {\n  color?: string;\n  id?: number;\n  name: string;\n  total: number;\n  date?: Moment;\n}\n\n/**\n *\n */\nexport class Detail {\n  color?: string;\n  date: number;\n  id: number;\n  name: string;\n  value: number;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nimport {AfterViewInit, Component, ElementRef, EventEmitter, HostListener, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../../utils/logger';\nimport {Datum, Detail, Summary} from '../model/datum';\nimport {ChartLib} from '../../../utils/chart-lib';\nimport {easeLinear, max, range, scaleBand, scaleLinear, Selection, sum, timeDays} from 'd3';\nimport {event, select} from 'd3-selection';\nimport {ColorLib} from '../../../utils/color-lib';\nimport {GTSLib} from '../../../utils/gts.lib';\nimport moment, {Moment} from 'moment';\n\n@Component({\n  selector: 'calendar-heatmap',\n  templateUrl: './calendar-heatmap.component.html',\n  styleUrls: ['./calendar-heatmap.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class CalendarHeatmapComponent implements AfterViewInit {\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('data') set data(data: Datum[]) {\n    this.LOG.debug(['data'], data);\n    if (data) {\n      this._data = data;\n      this.calculateDimensions();\n    }\n  }\n\n  get data(): Datum[] {\n    return this._data;\n  }\n\n  @Input('minColor') set minColor(minColor: string) {\n    this._minColor = minColor;\n    this.calculateDimensions();\n  }\n\n  get minColor() {\n    return this._minColor;\n  }\n\n  @Input('maxColor') set maxColor(maxColor: string) {\n    this._maxColor = maxColor;\n    this.calculateDimensions();\n  }\n\n  get maxColor() {\n    return this._maxColor;\n  }\n\n  private static DEF_MIN_COLOR = '#ffffff';\n  private static DEF_MAX_COLOR = '#333333';\n\n  constructor(private el: ElementRef) {\n    this.LOG = new Logger(CalendarHeatmapComponent, this.debug);\n  }\n\n\n  @ViewChild('chart', {static: true}) div: ElementRef;\n\n  @Input('width') width = ChartLib.DEFAULT_WIDTH;\n  @Input('height') height = ChartLib.DEFAULT_HEIGHT;\n  @Input('overview') overview = 'global';\n\n  @Output('handler') handler = new EventEmitter<any>();\n  @Output('change') change = new EventEmitter<any>();\n\n  private LOG: Logger;\n  // tslint:disable-next-line:variable-name\n  private _data: Datum[];\n  // tslint:disable-next-line:variable-name\n  private _debug = false;\n  // tslint:disable-next-line:variable-name\n  private _minColor: string = CalendarHeatmapComponent.DEF_MIN_COLOR;\n  // tslint:disable-next-line:variable-name\n  private _maxColor: string = CalendarHeatmapComponent.DEF_MAX_COLOR;\n// Defaults\n  private gutter = 5;\n  private gWidth = 1000;\n  private gHeight = 200;\n  private itemSize = 10;\n  private labelPadding = 40;\n  private transitionDuration = 250;\n  private inTransition = false;\n  // Tooltip defaults\n  private tooltipWidth = 450;\n  private tooltipPadding = 15;\n  // Overview defaults\n  private history = ['global'];\n  private selected: Datum = new Datum();\n  // D3 related variables\n  private svg: Selection<SVGElement, {}, null, undefined>;\n  private items: Selection<SVGElement, {}, null, undefined>;\n  private labels: Selection<SVGElement, {}, null, undefined>;\n  private buttons: Selection<SVGElement, {}, null, undefined>;\n  private tooltip: Selection<HTMLDivElement, {}, null, undefined>;\n  private parentWidth = -1;\n  private chart: HTMLElement;\n  private resizeTimer;\n\n  static getNumberOfWeeks(): number {\n    const dayIndex = Math.round((+moment.utc() - +moment.utc().subtract(1, 'year').startOf('week')) / 86400000);\n    return Math.trunc(dayIndex / 7) + 1;\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    if (this.el.nativeElement.parentElement.clientWidth !== this.parentWidth) {\n      this.calculateDimensions();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.chart = this.div.nativeElement as HTMLElement;\n    // Initialize svg element\n    this.svg = select(this.chart).append('svg').attr('class', 'svg');\n    // Initialize main svg elements\n    this.items = this.svg.append('g');\n    this.labels = this.svg.append('g');\n    this.buttons = this.svg.append('g');\n    // Add tooltip to the same element as main svg\n    this.tooltip = select(this.chart)\n      .append('div')\n      .attr('class', 'heatmap-tooltip')\n      .style('opacity', 0);\n    // Calculate chart dimensions\n    this.calculateDimensions();\n    //  this.drawChart();\n  }\n\n  calculateDimensions() {\n    clearTimeout(this.resizeTimer);\n    this.resizeTimer = setTimeout(() => {\n      if (this.el.nativeElement.parentElement.clientWidth !== 0) {\n        this.gWidth = this.chart.clientWidth < 1000 ? 1000 : this.chart.clientWidth;\n        this.itemSize = ((this.gWidth - this.labelPadding) / CalendarHeatmapComponent.getNumberOfWeeks() - this.gutter);\n        this.gHeight = this.labelPadding + 7 * (this.itemSize + this.gutter);\n        this.svg.attr('width', this.gWidth).attr('height', this.gHeight);\n        this.LOG.debug(['calculateDimensions'], this._data);\n        if (!!this._data && !!this._data[0] && !!this._data[0].summary) {\n          this.drawChart();\n        }\n      } else {\n        this.calculateDimensions();\n      }\n    }, 250);\n  }\n\n\n  private groupBy(xs, key) {\n    return xs.reduce((rv, x) => {\n      (rv[x[key]] = rv[x[key]] || []).push(x);\n      return rv;\n    }, {});\n  }\n\n  updateDataSummary() {\n    // Get daily summary if that was not provided\n    if (!this._data[0].summary) {\n      this._data.map((d: Datum) => {\n        const summary = d.details.reduce((uniques: any, project: any) => {\n          if (!uniques[project.name]) {\n            uniques[project.name] = {value: project.value};\n          } else {\n            uniques[project.name].value += project.value;\n          }\n          return uniques;\n        }, {});\n        const unsortedSummary = Object.keys(summary).map((key) => {\n          return {\n            name: key,\n            total: summary[key].value\n          };\n        });\n        d.summary = unsortedSummary.sort((a, b) => {\n          return b.total - a.total;\n        });\n        return d;\n      });\n    }\n  }\n\n  drawChart() {\n    if (!this.svg || !this._data) {\n      return;\n    }\n    this.LOG.debug(['drawChart'], [this.overview, this.selected]);\n    switch (this.overview) {\n      case 'global':\n        this.drawGlobalOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this._data[0].date),\n          end: moment(this._data[this._data.length - 1].date),\n        });\n        break;\n      case 'year':\n        this.drawYearOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('year'),\n          end: moment(this.selected.date).endOf('year'),\n        });\n        break;\n      case 'month':\n        this.drawMonthOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('month'),\n          end: moment(this.selected.date).endOf('month'),\n        });\n        break;\n      case 'week':\n        this.drawWeekOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('week'),\n          end: moment(this.selected.date).endOf('week'),\n        });\n        break;\n      case 'day':\n        this.drawDayOverview();\n        this.change.emit({\n          overview: this.overview,\n          start: moment(this.selected.date).startOf('day'),\n          end: moment(this.selected.date).endOf('day'),\n        });\n        break;\n      default:\n        break;\n    }\n  }\n\n  drawGlobalOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define start and end of the dataset\n    const startPeriod: Moment = moment.utc(this._data[0].date.startOf('y'));\n    const endPeriod: Moment = moment.utc(this._data[this._data.length - 1].date.endOf('y'));\n    // Define array of years and total values\n    const yData: Datum[] = this._data.filter((d: Datum) => d.date.isBetween(startPeriod, endPeriod, null, '[]'));\n    yData.forEach((d: Datum) => {\n      const summary: Summary[] = [];\n      const group = this.groupBy(d.details, 'name');\n      Object.keys(group).forEach(k => {\n        summary.push({\n          name: k,\n          total: group[k].reduce((acc, o) => {\n            return acc + o.value;\n          }, 0),\n          color: group[k][0].color,\n          id: group[k][0].id,\n        });\n      });\n      d.summary = summary;\n    });\n    const duration = Math.ceil(moment.duration(endPeriod.diff(startPeriod)).asYears());\n    const scale = [];\n    for (let i = 0; i < duration; i++) {\n      const d = moment.utc().year(startPeriod.year() + i).month(0).date(1).startOf('y');\n      scale.push(d);\n    }\n    let yearData: Datum[] = yData.map((d: Datum) => {\n      const date: Moment = d.date;\n      return {\n        date,\n        total: yData.reduce((prev: number, current: any) => {\n          if ((current.date as Moment).year() === date.year()) {\n            prev += current.total;\n          }\n          return prev;\n        }, 0),\n        summary: (() => {\n          const summary: Summary = yData.reduce((s: any, data: any) => {\n            if ((data.date as Moment).year() === date.year()) {\n              data.summary.forEach(_summary => {\n                if (!s[_summary.name]) {\n                  s[_summary.name] = {\n                    total: _summary.total,\n                    color: _summary.color,\n                  };\n                } else {\n                  s[_summary.name].total += _summary.total;\n                }\n              });\n            }\n            return s;\n          }, {});\n          const unsortedSummary: Summary[] = Object.keys(summary).map((key) => {\n            return {\n              name: key,\n              total: summary[key].total,\n              color: summary[key].color,\n            };\n          });\n          return unsortedSummary.sort((a, b) => b.total - a.total);\n        })(),\n      };\n    });\n    // Calculate max value of all the years in the dataset\n    yearData = GTSLib.cleanArray(yearData);\n    const maxValue = max(yearData, (d: Datum) => d.total);\n    // Define year labels and axis\n    const yearLabels = scale.map((d: Moment) => d);\n    const yearScale = scaleBand()\n      .rangeRound([0, this.gWidth])\n      .padding(0.05)\n      .domain(yearLabels.map((d: Moment) => d.year().toString()));\n\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    // Add global data items to the overview\n    this.items.selectAll('.item-block-year').remove();\n    this.items.selectAll('.item-block-year')\n      .data(yearData)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-year')\n      .attr('width', () => (this.gWidth - this.labelPadding) / yearLabels.length - this.gutter * 5)\n      .attr('height', () => this.gHeight - this.labelPadding)\n      .attr('transform', (d: Datum) => 'translate(' + yearScale((d.date as Moment).year().toString()) + ',' + this.tooltipPadding * 2 + ')')\n      .attr('fill', (d: Datum) => color(d.total) || CalendarHeatmapComponent.DEF_MAX_COLOR)\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set in_transition flag\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview();\n        // Redraw the chart\n        this.overview = 'year';\n        this.drawChart();\n      })\n      .style('opacity', 0)\n      .on('mouseover', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Calculate tooltip position\n        let x = yearScale(d.date.year().toString()) + this.tooltipPadding * 2;\n        while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 5)) {\n          x -= 10;\n        }\n        const y = this.tooltipPadding * 4;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .transition()\n      .delay((d: any, i: number) => this.transitionDuration * (i + 1) / 10)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n    // Add year labels\n    this.labels.selectAll('.label-year').remove();\n    this.labels.selectAll('.label-year')\n      .data(yearLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-year')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Moment) => d.year())\n      .attr('x', (d: Moment) => yearScale(d.year().toString()))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (yearLabel: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Datum) => (d.date.year() === yearLabel.year()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('click', () => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set in_transition flag\n        this.inTransition = true;\n        // Set selected year to the one clicked on\n        this.selected = yearData[0];\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview();\n        // Redraw the chart\n        this.overview = 'year';\n        this.drawChart();\n      });\n  }\n\n\n  /**\n   * Draw year overview\n   */\n  drawYearOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define start and end date of the selected year\n    const startOfYear: Moment = moment(this.selected.date).startOf('year');\n    const endOfYear: Moment = moment(this.selected.date).endOf('year');\n    // Filter data down to the selected year\n    let yearData: Datum[] = this._data.filter((d: Datum) => d.date.isBetween(startOfYear, endOfYear, null, '[]'));\n    yearData.forEach((d: Datum) => {\n      const summary: Summary[] = [];\n      const group = this.groupBy(d.details, 'name');\n      Object.keys(group).forEach(k => {\n        summary.push({\n          name: k,\n          total: group[k].reduce((acc, o) => {\n            return acc + o.value;\n          }, 0),\n          color: group[k][0].color,\n          id: group[k][0].id,\n        });\n      });\n      d.summary = summary;\n    });\n    yearData = GTSLib.cleanArray(yearData);\n    // Calculate max value of the year data\n    const maxValue = max(yearData, (d: Datum) => d.total);\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    this.items.selectAll('.item-circle').remove();\n    this.items.selectAll('.item-circle')\n      .data(yearData)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-circle').style('opacity', 0)\n      .attr('x', (d: Datum) => this.calcItemX(d, startOfYear) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('y', (d: Datum) => this.calcItemY(d) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('rx', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Datum) => (d.total > 0) ? color(d.total) : 'transparent')\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Don't transition if there is no data to show\n        if (d.total === 0) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all year overview related items and labels\n        this.removeYearOverview();\n        // Redraw the chart\n        this.overview = 'day';\n        this.drawChart();\n      })\n      .on('mouseover', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Pulsating animation\n        const circle = select(event.currentTarget);\n        const repeat = () => {\n          circle.transition()\n            .duration(this.transitionDuration)\n            .ease(easeLinear)\n            .attr('x', (data: Datum) => this.calcItemX(data, startOfYear) - (this.itemSize * 1.1 - this.itemSize) / 2)\n            .attr('y', (data: Datum) => this.calcItemY(data) - (this.itemSize * 1.1 - this.itemSize) / 2)\n            .attr('width', this.itemSize * 1.1)\n            .attr('height', this.itemSize * 1.1)\n            .transition()\n            .duration(this.transitionDuration)\n            .ease(easeLinear)\n            .attr('x', (data: Datum) => this.calcItemX(data, startOfYear) + (this.itemSize - this.calcItemSize(data, maxValue)) / 2)\n            .attr('y', (data: Datum) => this.calcItemY(data) + (this.itemSize - this.calcItemSize(data, maxValue)) / 2)\n            .attr('width', (data: Datum) => this.calcItemSize(data, maxValue))\n            .attr('height', (data: Datum) => this.calcItemSize(data, maxValue))\n            .on('end', repeat);\n        };\n        repeat();\n        // Construct tooltip\n        // Calculate tooltip position\n        let x = this.calcItemX(d, startOfYear) + this.itemSize / 2;\n        if (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n          x -= this.tooltipWidth + this.tooltipPadding * 2;\n        }\n        const y = this.calcItemY(d) + this.itemSize / 2;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set circle radius back to what it's supposed to be\n        select(event.currentTarget).transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .attr('x', (d: Datum) => this.calcItemX(d, startOfYear) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n          .attr('y', (d: Datum) => this.calcItemY(d) + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n          .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n          .attr('height', (d: Datum) => this.calcItemSize(d, maxValue));\n        // Hide tooltip\n        this.hideTooltip();\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n    // Add month labels\n    const duration = Math.ceil(moment.duration(endOfYear.diff(startOfYear)).asMonths());\n    const monthLabels: Moment[] = [];\n    for (let i = 1; i < duration; i++) {\n      monthLabels.push(moment(this.selected.date).month((startOfYear.month() + i) % 12).startOf('month'));\n    }\n    const monthScale = scaleLinear().range([0, this.gWidth]).domain([0, monthLabels.length]);\n    this.labels.selectAll('.label-month').remove();\n    this.labels.selectAll('.label-month')\n      .data(monthLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-month')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Moment) => d.format('MMM'))\n      .attr('x', (d: Moment, i: number) => monthScale(i) + (monthScale(i) - monthScale(i - 1)) / 2)\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (d: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedMonth = moment(d);\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => moment(data.date).isSame(selectedMonth, 'month') ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('click', (d: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Check month data\n        const monthData = this._data.filter((e: Datum) => e.date.isBetween(\n          moment(d).startOf('month'),\n          moment(d).endOf('month'),\n          null, '[]'\n        ));\n        // Don't transition if there is no data to show\n        if (!monthData.length) {\n          return;\n        }\n        // Set selected month to the one clicked on\n        this.selected = {date: d};\n        this.inTransition = true;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all year overview related items and labels\n        this.removeYearOverview();\n        // Redraw the chart\n        this.overview = 'month';\n        this.drawChart();\n      });\n\n    // Add day labels\n    const dayLabels: Date[] = timeDays(\n      moment.utc().startOf('week').toDate(),\n      moment.utc().endOf('week').toDate()\n    );\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gHeight])\n      .domain(dayLabels.map((d: Date) => moment.utc(d).weekday().toString()));\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-day')\n      .data(dayLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .attr('x', this.labelPadding / 3)\n      .attr('y', (d: Date, i: number) => dayScale(i.toString()) + dayScale.bandwidth() / 1.75)\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Date) => moment.utc(d).format('dddd')[0])\n      .on('mouseenter', (d: Date) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedDay = moment.utc(d);\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => (moment(data.date).day() === selectedDay.day()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  drawMonthOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define beginning and end of the month\n    const startOfMonth: Moment = moment(this.selected.date).startOf('month');\n    const endOfMonth: Moment = moment(this.selected.date).endOf('month');\n    // Filter data down to the selected month\n    let monthData: Datum[] = [];\n    this._data.filter((data: Datum) => data.date.isBetween(startOfMonth, endOfMonth, null, '[]'))\n      .map((d: Datum) => {\n        const scale: Datum[] = [];\n        d.details.forEach((det: Detail) => {\n          const date: Moment = moment.utc(det.date);\n          const i = Math.floor(date.hours() / 3);\n          if (!scale[i]) {\n            scale[i] = {\n              date: date.startOf('hour'),\n              total: 0,\n              details: [],\n              summary: []\n            };\n          }\n          scale[i].total += det.value;\n          scale[i].details.push(det);\n        });\n        scale.forEach((s: Datum) => {\n          const group = this.groupBy(s.details, 'name');\n          Object.keys(group).forEach((k: string) => {\n            s.summary.push({\n              name: k,\n              total: sum(group[k], (data: any) => data.total),\n              color: group[k][0].color\n            });\n          });\n        });\n        monthData = monthData.concat(scale);\n      });\n    monthData = GTSLib.cleanArray(monthData);\n    this.LOG.debug(['drawMonthOverview'], [this.overview, this.selected, monthData]);\n    const maxValue: number = max(monthData, (d: any) => d.total);\n    // Define day labels and axis\n    const dayLabels: Date[] = timeDays(\n      moment(this.selected.date).startOf('week').toDate(),\n      moment(this.selected.date).endOf('week').toDate()\n    );\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gHeight])\n      .domain(dayLabels.map((d: Date) => moment.utc(d).weekday().toString()));\n\n    // Define week labels and axis\n    const weekLabels: Moment[] = [startOfMonth];\n    const incWeek = moment(startOfMonth);\n    while (incWeek.week() !== endOfMonth.week()) {\n      weekLabels.push(moment(incWeek.add(1, 'week')));\n    }\n    monthData.forEach((d: Datum) => {\n      const summary = [];\n      const group = this.groupBy(d.details, 'name');\n      Object.keys(group).forEach((k: string) => {\n        summary.push({\n          name: k,\n          total: group[k].reduce((acc, o) => acc + o.value, 0),\n          color: group[k][0].color,\n          id: group[k][0].id,\n        });\n      });\n      d.summary = summary;\n    });\n    const weekScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gWidth])\n      .padding(0.05)\n      .domain(weekLabels.map((weekday) => weekday.week() + ''));\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    // Add month data items to the overview\n    this.items.selectAll('.item-block-month').remove();\n    this.items.selectAll('.item-block-month')\n      .data(monthData)\n      .enter().append('rect')\n      .style('opacity', 0)\n      .attr('class', 'item item-block-month')\n      .attr('y', (d: Datum) => this.calcItemY(d)\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('x', (d: Datum) => this.calcItemXMonth(d, startOfMonth, weekScale(d.date.week().toString()))\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('rx', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Datum) => (d.total > 0) ? color(d.total) : 'transparent')\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Don't transition if there is no data to show\n        if (d.total === 0) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all month overview related items and labels\n        this.removeMonthOverview();\n        // Redraw the chart\n        this.overview = 'day';\n        this.drawChart();\n      })\n      .on('mouseover', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Construct tooltip\n        // Calculate tooltip position\n        let x = weekScale(d.date.week().toString()) + this.tooltipPadding;\n        while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n          x -= 10;\n        }\n        const y = dayScale(d.date.weekday().toString()) + this.tooltipPadding;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n    // Add week labels\n    this.labels.selectAll('.label-week').remove();\n    this.labels.selectAll('.label-week')\n      .data(weekLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-week')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Moment) => 'Week ' + d.week())\n      .attr('x', (d: Moment) => weekScale(d.week().toString()))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (weekday: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Datum) => {\n            return (moment(d.date).week() === weekday.week()) ? 1 : 0.1;\n          });\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('click', (d: Moment) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected month to the one clicked on\n        this.selected = {date: d};\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all year overview related items and labels\n        this.removeMonthOverview();\n        // Redraw the chart\n        this.overview = 'week';\n        this.drawChart();\n      });\n    // Add day labels\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-day')\n      .data(dayLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .attr('x', this.labelPadding / 3)\n      .attr('y', (d: Date, i: any) => dayScale(i) + dayScale.bandwidth() / 1.75)\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Date) => moment.utc(d).format('dddd')[0])\n      .on('mouseenter', (d: Date) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedDay = moment.utc(d);\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => (moment(data.date).day() === selectedDay.day()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  drawWeekOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Define beginning and end of the week\n    const startOfWeek: Moment = moment(this.selected.date).startOf('week');\n    const endOfWeek: Moment = moment(this.selected.date).endOf('week');\n    // Filter data down to the selected week\n    let weekData: Datum[] = [];\n    this._data.filter((d: Datum) => {\n      return d.date.isBetween(startOfWeek, endOfWeek, null, '[]');\n    }).map((d: Datum) => {\n      const scale: Datum[] = [];\n      d.details.forEach((det: Detail) => {\n        const date: Moment = moment(det.date);\n        const i = date.hours();\n        if (!scale[i]) {\n          scale[i] = {\n            date: date.startOf('hour'),\n            total: 0,\n            details: [],\n            summary: []\n          };\n        }\n        scale[i].total += det.value;\n        scale[i].details.push(det);\n      });\n      scale.forEach(s => {\n        const group = this.groupBy(s.details, 'name');\n        Object.keys(group).forEach(k =>\n          s.summary.push({\n            name: k,\n            total: sum(group[k], (data: any) => data.value),\n            color: group[k][0].color\n          }));\n      });\n      weekData = weekData.concat(scale);\n    });\n    weekData = GTSLib.cleanArray(weekData);\n    const maxValue: number = max(weekData, (d: Datum) => d.total);\n    // Define day labels and axis\n    const dayLabels = timeDays(moment.utc().startOf('week').toDate(), moment.utc().endOf('week').toDate());\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gHeight])\n      .domain(dayLabels.map((d: Date) => moment.utc(d).weekday().toString()));\n    // Define hours labels and axis\n    const hoursLabels: string[] = [];\n    range(0, 24).forEach(h => hoursLabels.push(moment.utc().hours(h).startOf('hour').format('HH:mm')));\n    const hourScale = scaleBand().rangeRound([this.labelPadding, this.gWidth]).padding(0.01).domain(hoursLabels);\n    const color = scaleLinear<string>()\n      .range([this.minColor || CalendarHeatmapComponent.DEF_MIN_COLOR, this.maxColor || CalendarHeatmapComponent.DEF_MAX_COLOR])\n      .domain([-0.15 * maxValue, maxValue]);\n    // Add week data items to the overview\n    this.items.selectAll('.item-block-week').remove();\n    this.items.selectAll('.item-block-week')\n      .data(weekData)\n      .enter()\n      .append('rect')\n      .style('opacity', 0)\n      .attr('class', 'item item-block-week')\n      .attr('y', (d: Datum) => this.calcItemY(d)\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('x', (d: Datum) => this.gutter\n        + hourScale(moment(d.date).startOf('hour').format('HH:mm'))\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('rx', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Datum) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Datum) => (d.total > 0) ? color(d.total) : 'transparent')\n      .on('click', (d: Datum) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Don't transition if there is no data to show\n        if (d.total === 0) {\n          return;\n        }\n        this.inTransition = true;\n        // Set selected date to the one clicked on\n        this.selected = d;\n        // Hide tooltip\n        this.hideTooltip();\n        // Remove all week overview related items and labels\n        this.removeWeekOverview();\n        // Redraw the chart\n        this.overview = 'day';\n        this.drawChart();\n      }).on('mouseover', (d: Datum) => {\n      if (this.inTransition) {\n        return;\n      }\n      // Calculate tooltip position\n      let x = hourScale(moment(d.date).startOf('hour').format('HH:mm')) + this.tooltipPadding;\n      while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n        x -= 10;\n      }\n      const y = dayScale(d.date.weekday().toString()) + this.tooltipPadding;\n      // Show tooltip\n      this.tooltip.html(this.getTooltip(d))\n        .style('left', x + 'px')\n        .style('top', y + 'px')\n        .transition()\n        .duration(this.transitionDuration / 2)\n        .ease(easeLinear)\n        .style('opacity', 1);\n    })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n\n    // Add week labels\n    this.labels.selectAll('.label-week').remove();\n    this.labels.selectAll('.label-week')\n      .data(hoursLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-week')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: string) => d)\n      .attr('x', (d: string) => hourScale(d))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (hour: string) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Datum) => (moment(d.date).startOf('hour').format('HH:mm') === hour) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add day labels\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-day')\n      .data(dayLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .attr('x', this.labelPadding / 3)\n      .attr('y', (d: Date, i: number) => dayScale(i.toString()) + dayScale.bandwidth() / 1.75)\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: Date) => moment.utc(d).format('dddd')[0])\n      .on('mouseenter', (d: Date) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selectedDay = moment.utc(d);\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (data: Datum) => (moment(data.date).day() === selectedDay.day()) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  drawDayOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview);\n    }\n    // Initialize selected date to today if it was not set\n    if (!Object.keys(this.selected).length) {\n      this.selected = this._data[this._data.length - 1];\n    }\n    const startOfDay: Moment = moment(this.selected.date).startOf('day');\n    const endOfDay: Moment = moment(this.selected.date).endOf('day');\n    // Filter data down to the selected month\n    let dayData: Datum[] = [];\n    this._data.filter((d: Datum) => {\n      return d.date.isBetween(startOfDay, endOfDay, null, '[]');\n    }).map((d: Datum) => {\n      const scale = [];\n      d.details.forEach((det: Detail) => {\n        const date: Moment = moment(det.date);\n        const i = date.hours();\n        if (!scale[i]) {\n          scale[i] = {\n            date: date.startOf('hour'),\n            total: 0,\n            details: [],\n            summary: []\n          };\n        }\n        scale[i].total += det.value;\n        scale[i].details.push(det);\n      });\n      scale.forEach(s => {\n        const group = this.groupBy(s.details, 'name');\n        Object.keys(group).forEach(k => {\n          s.summary.push({\n            name: k,\n            total: sum(group[k], (item: any) => item.value),\n            color: group[k][0].color\n          });\n        });\n      });\n      dayData = dayData.concat(scale);\n    });\n    const data: Summary[] = [];\n    dayData.forEach((d: Datum) => {\n      const date = d.date;\n      d.summary.forEach((s: Summary) => {\n        s.date = date;\n        data.push(s);\n      });\n    });\n    dayData = GTSLib.cleanArray(dayData);\n    const maxValue: number = max(data, (d: Summary) => d.total);\n    const gtsNames = this.selected.summary.map((summary: Summary) => summary.name);\n    const gtsNameScale = scaleBand().rangeRound([this.labelPadding, this.gHeight]).domain(gtsNames);\n    const hourLabels: string[] = [];\n    range(0, 24).forEach(h => hourLabels.push(moment.utc().hours(h).startOf('hour').format('HH:mm')));\n    const dayScale = scaleBand()\n      .rangeRound([this.labelPadding, this.gWidth])\n      .padding(0.01)\n      .domain(hourLabels);\n    this.items.selectAll('.item-block').remove();\n    this.items.selectAll('.item-block')\n      .data(data)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block')\n      .attr('x', (d: Summary) => this.gutter\n        + dayScale(moment(d.date).startOf('hour').format('HH:mm'))\n        + (this.itemSize - this.calcItemSize(d, maxValue)) / 2)\n      .attr('y', (d: Summary) => {\n        return (gtsNameScale(d.name) || 1) - (this.itemSize - this.calcItemSize(d, maxValue)) / 2;\n      })\n      .attr('rx', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('ry', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('width', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('height', (d: Summary) => this.calcItemSize(d, maxValue))\n      .attr('fill', (d: Summary) => {\n        const color = scaleLinear<string>()\n          .range(['#ffffff', d.color || CalendarHeatmapComponent.DEF_MIN_COLOR])\n          .domain([-0.5 * maxValue, maxValue]);\n        return color(d.total);\n      })\n      .style('opacity', 0)\n      .on('mouseover', (d: Summary) => {\n        if (this.inTransition) {\n          return;\n        }\n        // Calculate tooltip position\n        let x = dayScale(moment(d.date).startOf('hour').format('HH:mm')) + this.tooltipPadding;\n        while (this.gWidth - x < (this.tooltipWidth + this.tooltipPadding * 3)) {\n          x -= 10;\n        }\n        const y = gtsNameScale(d.name) + this.tooltipPadding;\n        // Show tooltip\n        this.tooltip.html(this.getTooltip(d))\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.transitionDuration / 2)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.hideTooltip();\n      })\n      .on('click', (d: Summary) => {\n        if (this.handler) {\n          this.handler.emit(d);\n        }\n      })\n      .transition()\n      .delay(() => (Math.cos(Math.PI * Math.random()) + 1) * this.transitionDuration)\n      .duration(() => this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1)\n      .call((transition: any, callback: any) => {\n        if (transition.empty()) {\n          callback();\n        }\n        let n = 0;\n        transition.each(() => ++n).on('end', function() {\n          if (!--n) {\n            callback.apply(this, arguments);\n          }\n        });\n      }, () => this.inTransition = false);\n\n    // Add time labels\n    this.labels.selectAll('.label-time').remove();\n    this.labels.selectAll('.label-time')\n      .data(hourLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-time')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: string) => d)\n      .attr('x', (d: string) => dayScale(d))\n      .attr('y', this.labelPadding / 2)\n      .on('mouseenter', (d: string) => {\n        if (this.inTransition) {\n          return;\n        }\n        const selected = d;\n        // const selected = itemScale(moment.utc(d));\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (item: any) => (item.date.format('HH:mm') === selected) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add project labels\n    const labelPadding = this.labelPadding;\n    this.labels.selectAll('.label-project').remove();\n    this.labels.selectAll('.label-project')\n      .data(gtsNames)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-project')\n      .attr('x', this.gutter)\n      .attr('y', (d: string) => gtsNameScale(d) + this.itemSize / 2)\n      .attr('min-height', () => gtsNameScale.bandwidth())\n      .style('text-anchor', 'left')\n      .attr('font-size', () => Math.floor(this.labelPadding / 3) + 'px')\n      .text((d: string) => d)\n      .each(function() {\n        const obj = select(this);\n        let textLength = obj.node().getComputedTextLength();\n        let text = obj.text();\n        while (textLength > (labelPadding * 1.5) && text.length > 0) {\n          text = text.slice(0, -1);\n          obj.text(text + '...');\n          textLength = obj.node().getComputedTextLength();\n        }\n      })\n      .on('mouseenter', (gtsName: string) => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', (d: Summary) => (d.name === gtsName) ? 1 : 0.1);\n      })\n      .on('mouseout', () => {\n        if (this.inTransition) {\n          return;\n        }\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.transitionDuration)\n          .ease(easeLinear)\n          .style('opacity', 1);\n      });\n    // Add button to switch back to previous overview\n    this.drawButton();\n  }\n\n  private calcItemX(d: Datum, startOfYear: Moment) {\n    const dayIndex = Math.round((+moment(d.date) - +startOfYear.startOf('week')) / 86400000);\n    const colIndex = Math.trunc(dayIndex / 7);\n    return colIndex * (this.itemSize + this.gutter) + this.labelPadding;\n  }\n\n  private calcItemXMonth(d: Datum, start: Moment, offset: number) {\n    const hourIndex = moment(d.date).hours();\n    const colIndex = Math.trunc(hourIndex / 3);\n    return colIndex * (this.itemSize + this.gutter) + offset;\n  }\n\n  private calcItemY(d: Datum) {\n    return this.labelPadding + d.date.weekday() * (this.itemSize + this.gutter);\n  }\n\n  private calcItemSize(d: Datum | Summary, m: number) {\n    if (m <= 0) {\n      return this.itemSize;\n    }\n    return this.itemSize * 0.75 + (this.itemSize * d.total / m) * 0.25;\n  }\n\n  private drawButton() {\n    this.buttons.selectAll('.button').remove();\n    const button = this.buttons.append('g')\n      .attr('class', 'button button-back')\n      .style('opacity', 0)\n      .on('click', () => {\n        if (this.inTransition) {\n          return;\n        }\n        // Set transition boolean\n        this.inTransition = true;\n        // Clean the canvas from whichever overview type was on\n        if (this.overview === 'year') {\n          this.removeYearOverview();\n        } else if (this.overview === 'month') {\n          this.removeMonthOverview();\n        } else if (this.overview === 'week') {\n          this.removeWeekOverview();\n        } else if (this.overview === 'day') {\n          this.removeDayOverview();\n        }\n        // Redraw the chart\n        this.history.pop();\n        this.overview = this.history.pop();\n        this.drawChart();\n      });\n    button.append('circle')\n      .attr('cx', this.labelPadding / 2.25)\n      .attr('cy', this.labelPadding / 2.5)\n      .attr('r', this.itemSize / 2);\n    button.append('text')\n      .attr('x', this.labelPadding / 2.25)\n      .attr('y', this.labelPadding / 2.5)\n      .attr('dy', () => {\n        return Math.floor(this.gWidth / 100) / 3;\n      })\n      .attr('font-size', () => {\n        return Math.floor(this.labelPadding / 3) + 'px';\n      })\n      .html('&#x2190;');\n    button.transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 1);\n  }\n\n  private removeGlobalOverview() {\n    this.items.selectAll('.item-block-year')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n    this.labels.selectAll('.label-year').remove();\n  }\n\n  private removeYearOverview() {\n    this.items.selectAll('.item-circle')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-month').remove();\n    this.hideBackButton();\n  }\n\n  private removeMonthOverview() {\n    this.items.selectAll('.item-block-month')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-week').remove();\n    this.hideBackButton();\n  }\n\n  private removeWeekOverview() {\n    this.items.selectAll('.item-block-week')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d: any, i: number) => (i % 2 === 0) ? -this.gWidth / 3 : this.gWidth / 3)\n      .remove();\n    this.labels.selectAll('.label-day').remove();\n    this.labels.selectAll('.label-week').remove();\n    this.hideBackButton();\n  }\n\n  private removeDayOverview() {\n    this.items.selectAll('.item-block')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d: any, i: number) => (i % 2 === 0) ? -this.gWidth / 3 : this.gWidth / 3)\n      .remove();\n    this.labels.selectAll('.label-time').remove();\n    this.labels.selectAll('.label-project').remove();\n    this.hideBackButton();\n  }\n\n  private hideTooltip() {\n    this.tooltip.transition()\n      .duration(this.transitionDuration / 2)\n      .ease(easeLinear)\n      .style('opacity', 0);\n  }\n\n  /**\n   * Helper function to hide the back button\n   */\n  private hideBackButton() {\n    this.buttons.selectAll('.button')\n      .transition()\n      .duration(this.transitionDuration)\n      .ease(easeLinear)\n      .style('opacity', 0)\n      .remove();\n  }\n\n  private getTooltip = (d: any) => {\n    let tooltipHtml = '<div class=\"header\"><strong>' + d.date.format('dddd, MMM Do YYYY HH:mm') + '</strong></div><ul>';\n    (d.summary || []).forEach(s => {\n      tooltipHtml += `<li>\n  <div class=\"round\" style=\"background-color:${ColorLib.transparentize(s.color)}; border-color:${s.color}\"></div>\n${GTSLib.formatLabel(s.name)}: ${s.total}</li>`;\n    });\n    if (d.total !== undefined && d.name) {\n      tooltipHtml += `<li><div class=\"round\"\nstyle=\"background-color: ${ColorLib.transparentize(d.color)}; border-color: ${d.color}\"\n></div> ${GTSLib.formatLabel(d.name)}: ${d.total}</li>`;\n    }\n    tooltipHtml += '</ul>';\n    return tooltipHtml;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, EventEmitter, HostListener, Input, Output, ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'warpview-modal',\n  templateUrl: './warp-view-modal.component.html',\n  styleUrls: ['./warp-view-modal.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewModalComponent implements AfterViewInit {\n\n\n  @Input('modalTitle') modalTitle = '';\n  @Input('kbdLastKeyPressed') kbdLastKeyPressed: string[] = [];\n\n  @Output('warpViewModalOpen') warpViewModalOpen = new EventEmitter<any>();\n  @Output('warpViewModalClose') warpViewModalClose = new EventEmitter<any>();\n\n  private opened = false;\n\n  public open() {\n    this.el.nativeElement.style.display = 'block';\n    this.el.nativeElement.style.zIndex = '999999';\n    this.opened = true;\n    this.warpViewModalOpen.emit({});\n  }\n\n  public close() {\n    this.el.nativeElement.style.display = 'none';\n    this.el.nativeElement.style.zIndex = '-1';\n    this.opened = false;\n    this.warpViewModalClose.emit({});\n  }\n\n  public isOpened(): Promise<boolean> {\n    return new Promise<boolean>(resolve => {\n      resolve(this.opened);\n    });\n  }\n\n  @HostListener('kbdLastKeyPressed', ['$event'])\n  handleKeyDown($event: string[]) {\n    if ('Escape' === $event[0]) {\n      this.close();\n    }\n  }\n\n  constructor(public el: ElementRef) {\n  }\n\n  ngAfterViewInit(): void {\n    this.el.nativeElement.addEventListener('click', (event: any) => {\n      if (event.path[0].nodeName === 'WARP-VIEW-MODAL') {\n        this.close();\n      }\n    });\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, EventEmitter, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {DataModel} from '../../model/dataModel';\nimport {Logger} from '../../utils/logger';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {WarpViewModalComponent} from '../warp-view-modal/warp-view-modal.component';\nimport {Param} from '../../model/param';\nimport deepEqual from 'deep-equal';\nimport {ChartLib} from '../../utils/chart-lib';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-gts-popup',\n  templateUrl: './warp-view-gts-popup.component.html',\n  styleUrls: ['./warp-view-gts-popup.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGtsPopupComponent implements AfterViewInit {\n  @ViewChild('modal', {static: true}) modal: WarpViewModalComponent;\n\n  @Input('options') set options(options: Param | string) {\n    this.LOG.debug(['onOptions'], options);\n    if (typeof options === 'string') {\n      options = JSON.parse(options);\n    }\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n      this.prepareData();\n    }\n  }\n\n  @Input('gtsList') set gtsList(gtsList: DataModel) {\n    this._gtsList = gtsList;\n    this.LOG.debug(['_gtsList'], this._gtsList);\n\n    this.prepareData();\n  }\n\n  get gtslist(): DataModel {\n    return this._gtsList;\n  }\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('data') set data(data: DataModel) {\n    this.LOG.debug(['data'], data);\n    if (data) {\n      this._data = data;\n    }\n  }\n\n  get data(): DataModel {\n    return this._data;\n  }\n\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n    this.prepareData();\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('maxToShow') maxToShow = 5;\n\n  @Input('kbdLastKeyPressed') set kbdLastKeyPressed(kbdLastKeyPressed: string[]) {\n    this._kbdLastKeyPressed = kbdLastKeyPressed;\n    if (kbdLastKeyPressed[0] === 's' && !this.modalOpenned) {\n      this.showPopup();\n    } else if (this.modalOpenned) {\n      switch (kbdLastKeyPressed[0]) {\n        case'ArrowUp':\n        case'j':\n          this.current = Math.max(0, this.current - 1);\n          this.prepareData();\n          break;\n        case 'ArrowDown':\n        case 'k':\n          this.current = Math.min(this._gts.length - 1, this.current + 1);\n          this.prepareData();\n          break;\n        case ' ':\n          this.warpViewSelectedGTS.emit({\n            gts: this._gts[this.current],\n            selected: this.hiddenData.indexOf(this._gts[this.current].id) > -1\n          });\n          break;\n        default:\n          return;\n      }\n    }\n  }\n\n  get kbdLastKeyPressed(): string[] {\n    return this._kbdLastKeyPressed;\n  }\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n  @Output('warpViewModalOpen') warpViewModalOpen = new EventEmitter<any>();\n  @Output('warpViewModalClose') warpViewModalClose = new EventEmitter<any>();\n\n  current = 0;\n  // tslint:disable-next-line:variable-name\n  _gts: any[] = [];\n  _options: Param = new Param();\n\n  // tslint:disable-next-line:variable-name\n  private _kbdLastKeyPressed: string[] = [];\n  // tslint:disable-next-line:variable-name\n  private _hiddenData: number[] = [];\n  // tslint:disable-next-line:variable-name\n  private _debug = false;\n  // tslint:disable-next-line:variable-name\n  private _gtsList: DataModel;\n  // tslint:disable-next-line:variable-name\n  private _data: DataModel;\n  private displayed: any[] = [];\n  private modalOpenned = false;\n  private LOG: Logger;\n\n  constructor() {\n    this.LOG = new Logger(WarpViewGtsPopupComponent, this.debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.prepareData();\n  }\n\n  onWarpViewModalOpen() {\n    this.modalOpenned = true;\n    this.warpViewModalOpen.emit({});\n  }\n\n  onWarpViewModalClose() {\n    this.modalOpenned = false;\n    this.warpViewModalClose.emit({});\n  }\n\n  public isOpened(): Promise<boolean> {\n    return this.modal.isOpened();\n  }\n\n  private showPopup() {\n    this.current = 0;\n    this.prepareData();\n    this.modal.open();\n  }\n\n  public close() {\n    this.modal.close();\n  }\n\n  private prepareData() {\n    if (this._gtsList && this._gtsList.data) {\n      this._gts = GTSLib.flatDeep([this._gtsList.data]);\n      this.displayed = this._gts.slice(\n        Math.max(0, Math.min(this.current - this.maxToShow, this._gts.length - 2 * this.maxToShow)),\n        Math.min(this._gts.length, this.current + this.maxToShow + Math.abs(Math.min(this.current - this.maxToShow, 0)))\n      ) as any[];\n      this.LOG.debug(['prepareData'], this.displayed);\n    }\n  }\n\n  isHidden(gts) {\n    return !this.displayed.find(g => !!gts ? gts.id === g.id : false);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {DataModel} from '../../model/dataModel';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Subject} from 'rxjs';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-gts-tree',\n  templateUrl: './warp-view-gts-tree.component.html',\n  styleUrls: ['./warp-view-gts-tree.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGtsTreeComponent extends WarpViewComponent implements AfterViewInit {\n  @ViewChild('root', {static: true}) root: ElementRef;\n\n  @Input('kbdLastKeyPressed') kbdLastKeyPressed: string[] = [];\n\n  @Input('gtsFilter') set gtsFilter(gtsFilter: string) {\n    this._gtsFilter = gtsFilter;\n  }\n\n  get gtsFilter() {\n    return this._gtsFilter;\n  }\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n\n  private _gtsFilter = 'x';\n  gtsList: any[] = [];\n  params: Param[] = [] as Param[];\n  expand = false;\n\n  initOpen: Subject<void> = new Subject<void>();\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewGtsTreeComponent, this._debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.LOG.debug(['componentDidLoad', 'data'], this._data);\n    if (this._data) {\n      this.doRender();\n    }\n    if (!!this._options.foldGTSTree && !this.expand) {\n      this.foldAll();\n    }\n    if (!this._options.foldGTSTree) {\n      this.initOpen.next();\n    }\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.doRender();\n    if (!!this._options.foldGTSTree && !this.expand) {\n      this.foldAll();\n    }\n  }\n\n  private doRender() {\n    this.LOG.debug(['doRender', 'gtsList'], this._data);\n    this._options = ChartLib.mergeDeep(this.defOptions, this._options) as Param;\n    if (!this._data) {\n      return;\n    }\n    const dataList = GTSLib.getData(this._data).data;\n    this.params = this._data.params || [];\n    this.LOG.debug(['doRender', 'gtsList', 'dataList'], dataList);\n    if (!dataList) {\n      return;\n    }\n    this.expand = !this._options.foldGTSTree;\n    this.gtsList = GTSLib.flattenGtsIdArray(dataList as any[], 0).res;\n    this.LOG.debug(['doRender', 'gtsList'], this.gtsList, this._options.foldGTSTree, this.expand);\n    this.loading = false;\n    this.chartDraw.emit();\n  }\n\n  private foldAll() {\n    if (!this.root) {\n      setTimeout(() => this.foldAll());\n    } else {\n      this.expand = false;\n    }\n  }\n\n  toggleVisibility() {\n    this.expand = !this.expand;\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n\n  warpViewSelectedGTSHandler(event) {\n    this.LOG.debug(['warpViewSelectedGTS'], event);\n    this.warpViewSelectedGTS.emit(event);\n  }\n\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../../utils/logger';\nimport {GTSLib} from '../../../utils/gts.lib';\nimport {Param} from '../../../model/param';\nimport {Observable, Subject, Subscription} from 'rxjs';\n\n@Component({\n  selector: 'warpview-tree-view',\n  templateUrl: './warp-view-tree-view.component.html',\n  styleUrls: ['./warp-view-tree-view.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewTreeViewComponent implements OnInit, OnDestroy {\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = [...hiddenData];\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('options') options: Param;\n  @Input('gtsFilter') gtsFilter = 'x';\n  @Input('gtsList') gtsList: any[];\n  @Input('params') params: Param[];\n  @Input('branch') branch = false;\n  @Input('hidden') hidden = false;\n  @Input() events: Observable<void>;\n\n  @Input('kbdLastKeyPressed') kbdLastKeyPressed: string[] = [];\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n\n  hide: any = {};\n  initOpen: Subject<void> = new Subject<void>();\n  private LOG: Logger;\n  private _debug = false;\n  private _hiddenData: number[] = [];\n  private eventsSubscription: Subscription;\n\n  constructor() {\n    this.LOG = new Logger(WarpViewTreeViewComponent, this.debug);\n  }\n\n  ngOnInit(): void {\n    this.LOG.debug(['ngOnInit'], this.gtsList);\n    this.gtsList.forEach((g, index) => {\n      this.hide[index + ''] = false;\n    });\n    this.eventsSubscription = this.events.subscribe(() => this.open());\n  }\n\n  ngOnDestroy() {\n    this.eventsSubscription.unsubscribe();\n  }\n\n  toggleVisibility(index: number) {\n    this.LOG.debug(['toggleVisibility'], index, this.hide);\n    this.hide[index + ''] = !this.hide[index + ''];\n  }\n\n  isHidden(index: number) {\n    if (!!this.hide[index + '']) {\n      return this.hide[index + ''];\n    } else {\n      return false;\n    }\n  }\n\n  isGts(node) {\n    return GTSLib.isGts(node);\n  }\n\n  warpViewSelectedGTSHandler(event) {\n    this.LOG.debug(['warpViewSelectedGTS'], event);\n    this.warpViewSelectedGTS.emit(event);\n  }\n\n  open() {\n    this.gtsList.forEach((g, index) => {\n      this.hide[index + ''] = true;\n    });\n    setTimeout(() => this.initOpen.next());\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Label} from './label';\n\nexport class GTS {\n  c: string;\n  l: Label[];\n  a: Label[];\n  v: any[][];\n  id?: number;\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {GTS} from '../../../model/GTS';\nimport {Logger} from '../../../utils/logger';\nimport {GTSLib} from '../../../utils/gts.lib';\nimport {ColorLib} from '../../../utils/color-lib';\nimport {Param} from '../../../model/param';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-chip',\n  templateUrl: './warp-view-chip.component.html',\n  styleUrls: ['./warp-view-chip.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewChipComponent implements OnInit, AfterViewInit {\n\n  @ViewChild('chip', {static: false}) chip: ElementRef;\n\n  @Input('name') name: string;\n  @Input('node') node: any;\n  @Input('param') param: Param = new Param();\n  @Input('options') options: Param = new Param();\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n    this.LOG.debug(['hiddenData'], hiddenData, this._node, this._node.gts, this._node.gts.c);\n    if (this._node && this._node.gts && this._node.gts.c) {\n      this._node = {\n        ...this._node,\n        selected: this.hiddenData.indexOf(this._node.gts.id) === -1,\n        label: GTSLib.serializeGtsMetadata(this._node.gts)\n      };\n      this.LOG.debug(['hiddenData'], this._node);\n      this.colorizeChip();\n    }\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Input('gtsFilter') set gtsFilter(gtsFilter: string) {\n    this._gtsFilter = gtsFilter;\n    if (this._gtsFilter.slice(1) !== '') {\n      this.setState(new RegExp(this._gtsFilter.slice(1), 'gi').test(GTSLib.serializeGtsMetadata(this._node.gts)));\n    } else {\n      this.setState(true);\n    }\n  }\n\n  get gtsFilter() {\n    return this._gtsFilter;\n  }\n\n  @Input('kbdLastKeyPressed') set kbdLastKeyPressed(kbdLastKeyPressed: string[]) {\n    this._kbdLastKeyPressed = kbdLastKeyPressed;\n    if (kbdLastKeyPressed[0] === 'a') {\n      this.setState(true);\n    }\n    if (kbdLastKeyPressed[0] === 'n') {\n      this.setState(false);\n    }\n  }\n\n  @Output('warpViewSelectedGTS') warpViewSelectedGTS = new EventEmitter<any>();\n\n  private LOG: Logger;\n  private refreshCounter = 0;\n  // the first character triggers change each filter apply to trigger events. it must be discarded.\n  private _gtsFilter = 'x';\n  private _debug = false;\n  private _kbdLastKeyPressed: string[] = [];\n  private _hiddenData: number[] = [];\n  _node: any = {\n    selected: true,\n    gts: GTS,\n  };\n\n  constructor() {\n    this.LOG = new Logger(WarpViewChipComponent, this.debug);\n  }\n\n  ngOnInit(): void {\n    this._node = {...this.node, selected: this.hiddenData.indexOf(this.node.gts.id) === -1};\n  }\n\n  ngAfterViewInit() {\n    if (this.gtsFilter.slice(1) !== '' && new RegExp(this.gtsFilter.slice(1), 'gi').test(GTSLib.serializeGtsMetadata(this._node.gts))\n      || this.hiddenData.indexOf(this._node.gts.id) > -1) {\n      this.setState(false);\n    }\n    this.colorizeChip();\n  }\n\n  private colorizeChip() {\n    if (this.chip) {\n      if (this._node.selected && this.chip.nativeElement) {\n        const c = ColorLib.getColor(this._node.gts.id, this.options.scheme);\n        const color = (this.param || {datasetColor: c}).datasetColor || c;\n        this.chip.nativeElement.style.setProperty('background-color', ColorLib.transparentize(color));\n        this.chip.nativeElement.style.setProperty('border-color', color);\n      } else {\n        this.chip.nativeElement.style.setProperty('background-color', '#eeeeee');\n      }\n      this.refreshCounter++;\n    }\n  }\n\n  toArray(obj) {\n    if (obj === undefined) {\n      return [];\n    }\n    return Object.keys(obj).map(key => ({name: key, value: obj[key]}));\n  }\n\n  switchPlotState(event: UIEvent) {\n    event.preventDefault();\n    this.setState(!this._node.selected);\n    return false;\n  }\n\n  private setState(state: boolean) {\n    if (this._node && this._node.gts) {\n      this._node = {\n        ...this._node,\n        selected: state,\n        label: GTSLib.serializeGtsMetadata(this._node.gts)\n      };\n      this.LOG.debug(['switchPlotState'], this._node);\n      this.colorizeChip();\n      this.warpViewSelectedGTS.emit(this._node);\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, HostListener, Input, NgZone, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-image',\n  templateUrl: './warp-view-image.component.html',\n  styleUrls: ['./warp-view-image.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewImageComponent extends WarpViewComponent implements AfterViewInit {\n  @Input('imageTitle') imageTitle = '';\n\n  toDisplay: string[];\n\n  private resizeTimer;\n  private parentWidth = -1;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewImageComponent, this._debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.LOG.debug(['ngAfterViewInit'], this._options);\n    this.drawChart();\n  }\n\n  update(options: Param, refresh: boolean): void {\n    this.drawChart();\n  }\n\n  @HostListener('window:resize')\n  onResize() {\n    if (this.el.nativeElement.parentElement.clientWidth !== this.parentWidth || this.parentWidth <= 0) {\n      this.parentWidth = this.el.nativeElement.parentElement.clientWidth;\n      clearTimeout(this.resizeTimer);\n      this.resizeTimer = setTimeout(() => {\n        if (this.el.nativeElement.parentElement.clientWidth > 0) {\n          this.LOG.debug(['onResize'], this.el.nativeElement.parentElement.clientWidth);\n          this.drawChart();\n        } else {\n          this.onResize();\n        }\n      }, 150);\n    }\n  }\n\n  private drawChart() {\n    if (!this._data || !this._data.data || this._data.data.length === 0) {\n      return;\n    }\n    this.initChart(this.el);\n    this.toDisplay = [];\n    let gts: DataModel = this._data;\n    this.LOG.debug(['drawChart', 'gts'], gts);\n    if (typeof gts === 'string') {\n      try {\n        gts = JSON.parse(gts as string);\n      } catch (error) {\n        // empty : it's a base64 string\n      }\n    }\n    if (gts.data && gts.data.length > 0 && GTSLib.isEmbeddedImage(gts.data[0])) {\n      this._options = ChartLib.mergeDeep(this._options, gts.globalParams || {}) as Param;\n      this.toDisplay.push(gts.data[0]);\n    } else if (gts.data && GTSLib.isEmbeddedImage(gts.data)) {\n      this.toDisplay.push(gts.data as string);\n    }\n    this.LOG.debug(['drawChart', 'this.data', 'this.toDisplay'], this.data, this.toDisplay);\n    this.loading = false;\n    this.chartDraw.emit();\n  }\n\n  getStyle() {\n    this.LOG.debug(['getStyle'], this._options);\n    if (!this._options) {\n      return {};\n    } else {\n      const style: any = {'background-color': this._options.bgColor || 'transparent', width: this.width, height: 'auto'};\n      if (this._options.fontColor) {\n        style.color = this._options.fontColor;\n      }\n      this.LOG.debug(['getStyle', 'style'], style);\n      return style;\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {GTSLib} from './gts.lib';\nimport {ColorLib} from './color-lib';\nimport {Logger} from './logger';\n\nexport class MapLib {\n  static BASE_RADIUS = 2;\n  private static LOG: Logger = new Logger(MapLib, true);\n\n  static mapTypes: any = {\n    NONE: undefined,\n    DEFAULT: {\n      link: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    },\n    HOT: {\n      link: 'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n      attribution: `&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Tiles\n style by <a href=\"https://www.hotosm.org/\" target=\"_blank\">Humanitarian OpenStreetMap Team</a> hosted by\n <a href=\"https://openstreetmap.fr/\" target=\"_blank\">OpenStreetMap France</a>`\n    },\n    TOPO: {\n      link: 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n      attribution: `Map data: &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors,\n <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a>\n  (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)`\n    },\n    TOPO2: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',\n      attribution: `Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN,\n       GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community`\n    },\n    SURFER: {\n      link: 'https://maps.heigit.org/openmapsurfer/tiles/roads/webmercator/{z}/{x}/{y}.png',\n      attribution: `Imagery from <a href=\"http://giscience.uni-hd.de/\">GIScience Research Group @ University of\n Heidelberg</a> | Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`\n    },\n    HYDRA: {\n      link: 'https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png',\n      attribution: `Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`\n    },\n    HYDRA2: {\n      link: 'https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png',\n      attribution: `Tiles courtesy of <a href=\"http://openstreetmap.se/\" target=\"_blank\">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`\n    },\n    TONER: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd'\n    },\n    TONER_LITE: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.png',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd',\n    },\n    TERRAIN: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd',\n    },\n    ESRI: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n      attribution: `Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan,\n METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012`\n    },\n    SATELLITE: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n      attribution: `Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN,\n IGP, UPR-EGP, and the GIS User Community`\n    },\n    OCEANS: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}',\n      attribution: 'Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri',\n    },\n    GRAY: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}',\n      attibs: ''\n    },\n    GRAYSCALE: {\n      link: 'https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}',\n      attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',\n    },\n    WATERCOLOR: {\n      link: 'https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg',\n      attribution: `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>,\n <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors`,\n      subdomains: 'abcd',\n    },\n    CARTODB: {\n      link: 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',\n      attribution: `&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy;\n <a href=\"https://carto.com/attributions\">CartoDB</a>`,\n      subdomains: 'abcd',\n    },\n    CARTODB_DARK: {\n      link: 'https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png',\n      attribution: `&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy;\n <a href=\"https://carto.com/attributions\">CartoDB</a>`,\n      subdomains: 'abcd',\n    },\n  };\n\n  static toLeafletMapPaths(data: { gts: any[]; params: any[] }, hiddenData: number[], divider: number = 1000, scheme: string) {\n    const paths = [];\n    const size = (data.gts || []).length;\n    for (let i = 0; i < size; i++) {\n      const gts = data.gts[i];\n      if (GTSLib.isGtsToPlotOnMap(gts) && (hiddenData || []).filter(id => id === gts.id).length === 0) {\n        const path: any = {};\n        path.path = MapLib.gtsToPath(gts, divider);\n        if (data.params && data.params[i] && data.params[i].key) {\n          path.key = data.params[i].key;\n        } else {\n          path.key = GTSLib.serializeGtsMetadata(gts);\n        }\n        if (data.params && data.params[i] && data.params[i].color) {\n          path.color = data.params[i].color;\n        } else {\n          path.color = ColorLib.getColor(i, scheme);\n        }\n        paths.push(path);\n      }\n    }\n    return paths;\n  }\n\n  static gtsToPath(gts, divider: number = 1000) {\n    const path = [];\n    const size = (gts.v || []).length;\n    for (let i = 0; i < size; i++) {\n      const v = gts.v[i];\n      const l = v.length;\n      if (l >= 4) {\n        // timestamp, lat, lon, elev?, value\n        path.push({ts: Math.floor(v[0] / divider), lat: v[1], lon: v[2], val: v[l - 1]});\n      }\n    }\n    return path;\n  }\n\n  static annotationsToLeafletPositions(data: { gts: any[]; params: any[] }, hiddenData: number[], divider: number = 1000, scheme: string) {\n    const annotations = [];\n    const size = (data.gts || []).length;\n    for (let i = 0; i < size; i++) {\n      const gts = data.gts[i];\n      if (GTSLib.isGtsToAnnotate(gts) && (hiddenData || []).filter(id => id === gts.id).length === 0) {\n        this.LOG.debug(['annotationsToLeafletPositions'], gts);\n        const annotation: any = {};\n        let params = (data.params || [])[i];\n        if (!params) {\n          params = {};\n        }\n        annotation.path = MapLib.gtsToPath(gts, divider);\n        MapLib.extractCommonParameters(annotation, params, i, scheme);\n        if (params.render) {\n          annotation.render = params.render;\n        }\n        if (annotation.render === 'marker') {\n          annotation.marker = (data.params && data.params[i]) ? data.params[i].marker : 'circle';\n        }\n        if (annotation.render === 'weightedDots') {\n          MapLib.validateWeightedDotsPositionArray(annotation, params);\n        }\n        this.LOG.debug(['annotationsToLeafletPositions', 'annotations'], annotation);\n        annotations.push(annotation);\n      }\n    }\n    return annotations;\n  }\n\n  private static extractCommonParameters(obj, params, index, scheme: string) {\n    params = params || {};\n    obj.key = params.key || '';\n    obj.color = params.color || ColorLib.getColor(index, scheme);\n    obj.borderColor = params.borderColor || '#000';\n    obj.properties = params.properties || {};\n    if (params.baseRadius === undefined\n      || isNaN(parseInt(params.baseRadius, 10))\n      || parseInt(params.baseRadius, 10) < 0) {\n      obj.baseRadius = MapLib.BASE_RADIUS;\n    } else {\n      obj.baseRadius = params.baseRadius;\n    }\n  }\n\n  private static validateWeightedDotsPositionArray(posArray, params) {\n    if (params.minValue === undefined || params.maxValue === undefined) {\n      MapLib.LOG.error(['validateWeightedDotsPositionArray'], 'When using \\'weightedDots\\' or ' +\n        '\\'weightedColoredDots\\' rendering, \\'maxValue\\' and \\'minValue\\' parameters are compulsory');\n      posArray.render = undefined;\n      return;\n    }\n    posArray.maxValue = params.maxValue;\n    posArray.minValue = params.minValue;\n    if (typeof posArray.minValue !== 'number' ||\n      typeof posArray.maxValue !== 'number' ||\n      posArray.minValue >= posArray.maxValue) {\n      MapLib.LOG.error(['validateWeightedDotsPositionArray'], 'When using \\'weightedDots\\' or ' +\n        '\\'weightedColoredDots\\' rendering, \\'maxValue\\' and \\'minValue\\' must be numbers and \\'maxValue\\' ' +\n        'must be greater than \\'minValue\\'');\n      posArray.render = undefined;\n      return;\n    }\n    if (!GTSLib.isPositionsArrayWithValues(posArray) && !GTSLib.isPositionsArrayWithTwoValues(posArray)) {\n      MapLib.LOG.error(['validateWeightedDotsPositionArray'], 'When using \\'weightedDots\\' or ' +\n        '\\'weightedColoredDots\\' rendering, positions must have an associated value');\n      posArray.render = undefined;\n      return;\n    }\n\n    if (params.numSteps === undefined || isNaN(parseInt(params.numSteps, 10)) || parseInt(params.numSteps, 10) < 0) {\n      posArray.numSteps = 5;\n    } else {\n      posArray.numSteps = params.numSteps;\n    }\n    const step = (posArray.maxValue - posArray.minValue) / posArray.numSteps;\n    const steps = [];\n    for (let i = 0; i < posArray.numSteps - 1; i++) {\n      steps[i] = posArray.minValue + (i + 1) * step;\n    }\n    steps[posArray.numSteps - 1] = posArray.maxValue;\n\n    const size = (posArray || []).length;\n    for (let i = 0; i < size; i++) {\n      const pos = posArray[i];\n      const value = pos[2];\n      pos[4] = posArray.numSteps - 1;\n      for (const k in steps) {\n        if (value <= steps[k]) {\n          pos[4] = k;\n          break;\n        }\n      }\n    }\n    return true;\n  }\n\n  static toLeafletMapPositionArray(data: { gts: any[]; params: any[] }, hiddenData: number[], scheme: string) {\n    const positions = [];\n    const size = (data.gts || []).length;\n    for (let i = 0; i < size; i++) {\n      const gts = data.gts[i];\n      if (GTSLib.isPositionArray(gts) && (hiddenData || []).filter(id => id === gts.id).length === 0) {\n        this.LOG.debug(['toLeafletMapPositionArray'], gts, data.params[i]);\n        const posArray = gts;\n        const params = data.params[i] || {};\n        MapLib.extractCommonParameters(posArray, params, i, scheme);\n        if (params.render !== undefined) {\n          posArray.render = params.render;\n        }\n        if (posArray.render === 'weightedDots') {\n          MapLib.validateWeightedDotsPositionArray(posArray, params);\n        }\n        if (posArray.render === 'coloredWeightedDots') {\n          MapLib.validateWeightedColoredDotsPositionArray(posArray, params);\n        }\n        if (posArray.render === 'marker') {\n          posArray.marker = params.marker;\n        }\n        this.LOG.debug(['toLeafletMapPositionArray', 'posArray'], posArray);\n        positions.push(posArray);\n      }\n    }\n    return positions;\n  }\n\n  private static validateWeightedColoredDotsPositionArray(posArray: any, params: any) {\n    if (!MapLib.validateWeightedDotsPositionArray(posArray, params)) {\n      return;\n    }\n    if (params.minColorValue === undefined ||\n      params.maxColorValue === undefined ||\n      params.startColor === undefined ||\n      params.endColor === undefined) {\n      MapLib.LOG.error(['validateWeightedColoredDotsPositionArray'], 'When using ' +\n        '\\'weightedColoredDots\\' rendering, \\'maxColorValue\\', \\'minColorValue\\', \\'startColor\\' ' +\n        'and \\'endColor\\' parameters are compulsory');\n      posArray.render = undefined;\n      return;\n    }\n\n    posArray.maxColorValue = params.maxColorValue;\n    posArray.minColorValue = params.minColorValue;\n\n    if (typeof posArray.minColorValue !== 'number' ||\n      typeof posArray.maxColorValue !== 'number' ||\n      posArray.minColorValue >= posArray.maxColorValue) {\n      MapLib.LOG.error(['validateWeightedColoredDotsPositionArray'], ['When using ' +\n      'weightedColoredDots\\' rendering, \\'maxColorValue\\' and \\'minColorValue\\' must be numbers ' +\n      'and \\'maxColorValue\\' must be greater than \\'minColorValue\\'', {\n        maxColorValue: posArray.maxColorValue,\n        minColorValue: posArray.minColorValue,\n      }]);\n      posArray.render = undefined;\n      return;\n    }\n    const re = /^#(?:[0-9a-f]{3}){1,2}$/i;\n    if (typeof params.startColor !== 'string'\n      || typeof params.endColor !== 'string'\n      || !re.test(params.startColor)\n      || !re.test(params.endColor)) {\n      MapLib.LOG.error(['validateWeightedColoredDotsPositionArray'], ['When using ' +\n      'weightedColoredDots\\' rendering, \\'startColor\\' and \\'endColor\\' parameters must be RGB ' +\n      'colors in #rrggbb format', {\n        startColor: params.startColor,\n        endColor: params.endColor,\n        tests: [\n          typeof params.startColor,\n          typeof params.endColor,\n          re.test(params.startColor),\n          re.test(params.endColor),\n          re.test(params.startColor),\n        ],\n      }]);\n      posArray.render = undefined;\n      return;\n    }\n\n    posArray.startColor = {\n      r: parseInt(params.startColor.substring(1, 3), 16),\n      g: parseInt(params.startColor.substring(3, 5), 16),\n      b: parseInt(params.startColor.substring(5, 7), 16),\n    };\n\n    posArray.endColor = {\n      r: parseInt(params.endColor.substring(1, 3), 16),\n      g: parseInt(params.endColor.substring(3, 5), 16),\n      b: parseInt(params.endColor.substring(5, 7), 16),\n    };\n\n    if (params.numColorSteps === undefined ||\n      isNaN(parseInt(params.numColorSteps, 10)) ||\n      parseInt(params.numColorSteps, 10) < 0) {\n      posArray.numColorSteps = 5;\n    } else {\n      posArray.numColorSteps = params.numColorSteps;\n    }\n\n    posArray.colorGradient = ColorLib.hsvGradientFromRgbColors(\n      posArray.startColor,\n      posArray.endColor,\n      posArray.numColorSteps);\n\n    const step = (posArray.maxColorValue - posArray.minColorValue) / posArray.numColorSteps;\n    const steps = [];\n    for (let j = 0; j < posArray.numColorSteps; j++) {\n      steps[j] = posArray.minColorValue + (j + 1) * step;\n    }\n\n    posArray.steps = steps;\n\n    posArray.positions.forEach(pos => {\n      const colorValue = pos[3];\n      pos[5] = posArray.numColorSteps - 1;\n      for (let k = 0; k < steps.length - 1; k++) {\n        if (colorValue < steps[k]) {\n          pos[5] = k;\n          break;\n        }\n      }\n    });\n  }\n\n  static getBoundsArray(paths, positionsData, annotationsData, geoJson) {\n    const pointsArray = [];\n    let size;\n    this.LOG.debug(['getBoundsArray', 'paths'], paths);\n    size = (paths || []).length;\n    for (let i = 0; i < size; i++) {\n      const path = paths[i];\n      const s = (path.path || []).length;\n      for (let j = 0; j < s; j++) {\n        const p = path.path[j];\n        pointsArray.push([p.lat, p.lon]);\n      }\n    }\n    this.LOG.debug(['getBoundsArray', 'positionsData'], positionsData);\n    size = (positionsData || []).length;\n    for (let i = 0; i < size; i++) {\n      const position = positionsData[i];\n      const s = (position.positions || []).length;\n      for (let j = 0; j < s; j++) {\n        const p = position.positions[j];\n        pointsArray.push([p[0], p[1]]);\n      }\n    }\n    this.LOG.debug(['getBoundsArray', 'annotationsData'], annotationsData);\n    size = (annotationsData || []).length;\n    for (let i = 0; i < size; i++) {\n      const annotation = annotationsData[i];\n      const s = (annotation.path || []).length;\n      for (let j = 0; j < s; j++) {\n        const p = annotation.path[j];\n        pointsArray.push([p.lat, p.lon]);\n      }\n    }\n    size = (geoJson || []).length;\n    for (let i = 0; i < size; i++) {\n      const g = geoJson[i];\n      switch (g.geometry.type) {\n        case 'MultiPolygon':\n          g.geometry.coordinates.forEach(c => c.forEach(m => m.forEach(p => pointsArray.push([p[1], p[0]]))));\n          break;\n        case 'Polygon':\n          g.geometry.coordinates.forEach(c => c.forEach(p => pointsArray.push([p[1], p[0]])));\n          break;\n        case 'LineString':\n          g.geometry.coordinates.forEach(p => pointsArray.push([p[1], p[0]]));\n          break;\n        case 'Point':\n          pointsArray.push([g.geometry.coordinates[1], g.geometry.coordinates[0]]);\n          break;\n      }\n    }\n    if (pointsArray.length === 1) {\n      return pointsArray;\n    }\n    let south = 90;\n    let west = -180;\n    let north = -90;\n    let east = 180;\n    this.LOG.debug(['getBoundsArray'], pointsArray);\n    size = (pointsArray || []).length;\n    for (let i = 0; i < size; i++) {\n      const point = pointsArray[i];\n      if (point[0] > north) {\n        north = point[0];\n      }\n      if (point[0] < south) {\n        south = point[0];\n      }\n      if (point[1] > west) {\n        west = point[1];\n      }\n      if (point[1] < east) {\n        east = point[1];\n      }\n    }\n    return [[south, west], [north, east]];\n  }\n\n  static pathDataToLeaflet(pathData, options) {\n    const path = [];\n    const firstIndex = ((options === undefined) ||\n      (options.from === undefined) ||\n      (options.from < 0)) ? 0 : options.from;\n    const lastIndex = ((options === undefined) || (options.to === undefined) || (options.to >= pathData.length)) ?\n      pathData.length - 1 : options.to;\n    for (let i = firstIndex; i <= lastIndex; i++) {\n      path.push([pathData[i].lat, pathData[i].lon]);\n    }\n    return path;\n  }\n\n  static toGeoJSON(data: { gts: any[]; params: any[] }) {\n    const defShapes = ['Point', 'LineString', 'Polygon', 'MultiPolygon'];\n    const geoJsons = [];\n    data.gts.forEach(d => {\n      if (d.type && d.type === 'Feature' && d.geometry && d.geometry.type && defShapes.indexOf(d.geometry.type) > -1) {\n        geoJsons.push(d);\n      } else if (d.type && defShapes.indexOf(d.type) > -1) {\n        geoJsons.push({type: 'Feature', geometry: d});\n      }\n    });\n    return geoJsons;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, OnInit, Output, Renderer2, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {Param} from '../../model/param';\nimport {Logger} from '../../utils/logger';\nimport Leaflet, {TileLayerOptions} from 'leaflet';\nimport 'leaflet.heat';\nimport 'leaflet.markercluster';\nimport {ColorLib} from '../../utils/color-lib';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {DataModel} from '../../model/dataModel';\nimport {MapLib} from '../../utils/map-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Timsort} from '../../utils/timsort';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-map',\n  templateUrl: './warp-view-map.component.html',\n  styleUrls: ['./warp-view-map.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewMapComponent implements OnInit {\n\n  @ViewChild('mapDiv', {static: true}) mapDiv: ElementRef<HTMLDivElement>;\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef<HTMLDivElement>;\n  @ViewChild('timeSlider', {static: false}) timeSlider: ElementRef<HTMLDivElement>;\n  @ViewChild('timeRangeSlider', {static: false}) timeRangeSlider: ElementRef<HTMLDivElement>;\n\n  @Input('heatData') heatData: any[] = [];\n  @Input('responsive') responsive = false;\n  @Input('showLegend') showLegend = true;\n  @Input('width') width = ChartLib.DEFAULT_WIDTH;\n  @Input('height') height = ChartLib.DEFAULT_HEIGHT;\n  private bounds: Leaflet.LatLngBounds;\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Input('options') set options(options: Param) {\n    this.LOG.debug(['onOptions'], options);\n    if (!deepEqual(this._options, options)) {\n      const reZoom =\n        options.map.startZoom !== this._options.map.startZoom\n        || options.map.startLat !== this._options.map.startLat\n        || options.map.startLong !== this._options.map.startLong;\n      this._options = options;\n      this.divider = GTSLib.getDivider(this._options.timeUnit);\n      this.drawMap(reZoom);\n    }\n  }\n\n  @Input('data') set data(data: any) {\n    this.LOG.debug(['onData'], data);\n    this.currentValuesMarkers = [];\n    this.annotationsMarkers = [];\n    this.positionArraysMarkers = [];\n    if (!!data) {\n      this._data = data;\n      this.drawMap(true);\n    }\n  }\n\n  get data() {\n    return this._data;\n  }\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    this._hiddenData = hiddenData;\n    this.drawMap(false);\n  }\n\n  get hiddenData(): number[] {\n    return this._hiddenData;\n  }\n\n  @Output('change') change = new EventEmitter();\n  @Output('chartDraw') chartDraw = new EventEmitter();\n\n  currentZoom: number;\n  currentLat: number;\n  currentLong: number;\n  minTimeValue: number;\n  maxTimeValue: number;\n  divider = 1;\n  lowerTimeBound: number;\n  upperTimeBound: number;\n  timeSpan: number;\n  _options: Param = new Param();\n\n  private _firstDraw = true;\n  private LOG: Logger;\n  private _data: any;\n  private _debug = false;\n  private defOptions: Param = ChartLib.mergeDeep<Param>(\n    new Param(), {\n      map: {\n        heatControls: false,\n        tiles: [],\n        dotsLimit: 1000,\n      },\n      timeMode: 'date',\n      showRangeSelector: true,\n      gridLineColor: '#8e8e8e',\n      showDots: false,\n      timeZone: 'UTC',\n      timeUnit: 'us',\n      bounds: {}\n    });\n\n  private _map: Leaflet.Map;\n  private _hiddenData: number[];\n  private currentValuesMarkers = [];\n  private annotationsMarkers = [];\n  private positionArraysMarkers = [];\n  private _iconAnchor: Leaflet.PointExpression = [20, 52];\n  private _popupAnchor: Leaflet.PointExpression = [0, -50];\n  private _heatLayer: any;\n  private pathData: any[] = [];\n  private annotationsData: any[] = [];\n  private positionData: any[] = [];\n  private geoJson: any[] = [];\n  private timeStart: number;\n  private timeEnd: number;\n  private firstDraw = true;\n  private finalHeight = 0;\n  // Layers\n  private pathDataLayer = Leaflet.featureGroup();\n  private annotationsDataLayer = Leaflet.featureGroup();\n  private positionDataLayer = Leaflet.featureGroup();\n  private tileLayerGroup = Leaflet.featureGroup();\n  private geoJsonLayer = Leaflet.featureGroup();\n  private tilesLayer: Leaflet.TileLayer;\n\n  constructor(public el: ElementRef, public sizeService: SizeService, private renderer: Renderer2) {\n    this.LOG = new Logger(WarpViewMapComponent, this.debug);\n    this.LOG.debug(['constructor'], this.debug);\n    this.sizeService.sizeChanged$.subscribe(() => {\n      if (this._map) {\n        this.resizeMe();\n      }\n    });\n  }\n\n  ngOnInit(): void {\n    this._options = ChartLib.mergeDeep(this._options, this.defOptions) as Param;\n  }\n\n  resizeMe() {\n    this.LOG.debug(['resizeMe'], this.wrapper.nativeElement.parentElement.getBoundingClientRect());\n    let height = this.wrapper.nativeElement.parentElement.getBoundingClientRect().height;\n    const width = this.wrapper.nativeElement.parentElement.getBoundingClientRect().width;\n    if (this._options.map.showTimeSlider && this.timeSlider && this.timeSlider.nativeElement) {\n      height -= this.timeSlider.nativeElement.getBoundingClientRect().height;\n    }\n    if (this._options.map.showTimeRange && this.timeRangeSlider && this.timeRangeSlider.nativeElement) {\n      height -= this.timeRangeSlider.nativeElement.getBoundingClientRect().height;\n    }\n    this.finalHeight = height;\n    this.renderer.setStyle(this.mapDiv.nativeElement, 'width', 'calc(' + width + 'px - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ' - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ')');\n    this.renderer.setStyle(this.mapDiv.nativeElement, 'height', 'calc(' + height + 'px - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ' - '\n      + getComputedStyle(this.wrapper.nativeElement).getPropertyValue('--warp-view-map-margin').trim()\n      + ')');\n    this.width = width;\n    this.height = height;\n    if (!!this._map) {\n      setTimeout(() => this._map.invalidateSize());\n    }\n  }\n\n  heatRadiusDidChange(event) {\n    this._heatLayer.setOptions({radius: event.detail.valueAsNumber});\n    this.LOG.debug(['heatRadiusDidChange'], event.detail.valueAsNumber);\n  }\n\n  heatBlurDidChange(event) {\n    this._heatLayer.setOptions({blur: event.detail.valueAsNumber});\n    this.LOG.debug(['heatBlurDidChange'], event.detail.valueAsNumber);\n  }\n\n  heatOpacityDidChange(event) {\n    const minOpacity = event.detail.valueAsNumber / 100;\n    this._heatLayer.setOptions({minOpacity});\n    this.LOG.debug(['heatOpacityDidChange'], event.detail.valueAsNumber);\n  }\n\n  private drawMap(reZoom: boolean) {\n    this.LOG.debug(['drawMap'], this._data);\n    this._options = ChartLib.mergeDeep<Param>(this._options, this.defOptions);\n    this.timeStart = this._options.map.timeStart;\n    moment.tz.setDefault(this._options.timeZone);\n    let gts: any = this._data;\n    if (!gts) {\n      return;\n    }\n    if (typeof gts === 'string') {\n      try {\n        gts = JSON.parse(gts as string);\n      } catch (error) {\n        return;\n      }\n    }\n    if (GTSLib.isArray(gts) && gts[0] && (gts[0] instanceof DataModel || gts[0].hasOwnProperty('data'))) {\n      gts = gts[0];\n    }\n    if (!!this._map) {\n      this._map.invalidateSize(true);\n    }\n    let dataList: any[];\n    let params: any[];\n    if (gts.data) {\n      dataList = gts.data as any[];\n      this._options = ChartLib.mergeDeep<Param>(gts.globalParams || {}, this._options);\n      this.timeSpan = this.timeSpan || this._options.map.timeSpan;\n      params = gts.params;\n    } else {\n      dataList = gts;\n      params = [];\n    }\n    this.divider = GTSLib.getDivider(this._options.timeUnit);\n    this.LOG.debug(['drawMap'], dataList, this._options, gts.globalParams);\n    const flattenGTS = GTSLib.flatDeep(dataList);\n\n    const size = flattenGTS.length;\n    for (let i = 0; i < size; i++) {\n      const item = flattenGTS[i];\n      if (item.v) {\n        Timsort.sort(item.v, (a, b) => a[0] - b[0]);\n        item.i = i;\n        i++;\n      }\n    }\n    this.LOG.debug(['GTSLib.flatDeep(dataList)'], flattenGTS);\n    this.displayMap({gts: flattenGTS, params}, reZoom);\n  }\n\n  private icon(color: string, marker = '') {\n    const c = `${color.slice(1)}`;\n    const m = marker !== '' ? marker : 'circle';\n    return Leaflet.icon({\n      iconUrl: `https://cdn.mapmarker.io/api/v1/font-awesome/v4/pin?icon=fa-${m}&iconSize=17&size=40&hoffset=${m === 'circle' ? 0 : -1}&voffset=-4&color=fff&background=${c}`,\n      iconAnchor: this._iconAnchor,\n      popupAnchor: this._popupAnchor\n    });\n  }\n\n  private patchMapTileGapBug() {\n    // Workaround for 1px lines appearing in some browsers due to fractional transforms\n    // and resulting anti-aliasing. adapted from @cmulders' solution:\n    // https://github.com/Leaflet/Leaflet/issues/3575#issuecomment-150544739\n    // @ts-ignore\n    const originalInitTile = Leaflet.GridLayer.prototype._initTile;\n    if (originalInitTile.isPatched) {\n      return;\n    }\n    Leaflet.GridLayer.include({\n      _initTile(tile) {\n        originalInitTile.call(this, tile);\n        const tileSize = this.getTileSize();\n        tile.style.width = tileSize.x + 1.5 + 'px';\n        tile.style.height = tileSize.y + 1 + 'px';\n      }\n    });\n    // @ts-ignore\n    Leaflet.GridLayer.prototype._initTile.isPatched = true;\n  }\n\n  private displayMap(data: { gts: any[], params: any[] }, reDraw = false) {\n    this.currentValuesMarkers = [];\n    this.LOG.debug(['drawMap'], data, this._options, this._hiddenData || []);\n    if (!this.lowerTimeBound) {\n      this.lowerTimeBound = this._options.map.timeSliderMin / this.divider;\n      this.upperTimeBound = this._options.map.timeSliderMax / this.divider;\n    }\n    let height = this.height || ChartLib.DEFAULT_HEIGHT;\n    const width = this.width || ChartLib.DEFAULT_WIDTH;\n    if (this.responsive && this.finalHeight === 0) {\n      this.resizeMe();\n    } else {\n      if (this._options.map.showTimeSlider && this.timeSlider && this.timeSlider.nativeElement) {\n        height -= this.timeSlider.nativeElement.getBoundingClientRect().height;\n      }\n      if (this._options.map.showTimeRange && this.timeRangeSlider && this.timeRangeSlider.nativeElement) {\n        height -= this.timeRangeSlider.nativeElement.getBoundingClientRect().height;\n      }\n    }\n    this.width = width;\n    this.height = height;\n    if (data.gts.length === 0) {\n      return;\n    }\n    this.pathData = MapLib.toLeafletMapPaths(data, this._hiddenData || [], this.divider, this._options.scheme) || [];\n    this.annotationsData = MapLib.annotationsToLeafletPositions(data, this._hiddenData, this.divider, this._options.scheme) || [];\n    this.positionData = MapLib.toLeafletMapPositionArray(data, this._hiddenData || [], this._options.scheme) || [];\n    this.geoJson = MapLib.toGeoJSON(data);\n    this.LOG.debug(['displayMap'], this.pathData, this.annotationsData, this.positionData);\n\n    if (this._options.map.mapType !== 'NONE') {\n      const map = MapLib.mapTypes[this._options.map.mapType || 'DEFAULT'];\n      const mapOpts: TileLayerOptions = {\n        maxZoom: 24,\n        maxNativeZoom: 19,\n      };\n      if (map.attribution) {\n        mapOpts.attribution = map.attribution;\n      }\n      if (map.subdomains) {\n        mapOpts.subdomains = map.subdomains;\n      }\n      this.tilesLayer = Leaflet.tileLayer(map.link, mapOpts);\n    }\n\n    if (!!this._map) {\n      this.LOG.debug(['displayMap'], 'map exists');\n      this.pathDataLayer.clearLayers();\n      this.annotationsDataLayer.clearLayers();\n      this.positionDataLayer.clearLayers();\n      this.geoJsonLayer.clearLayers();\n      this.tileLayerGroup.clearLayers();\n    } else {\n      this.LOG.debug(['displayMap'], 'build map');\n      this._map = Leaflet.map(this.mapDiv.nativeElement, {\n        preferCanvas: true,\n        layers: [this.tileLayerGroup, this.geoJsonLayer, this.pathDataLayer, this.annotationsDataLayer, this.positionDataLayer],\n        zoomAnimation: true,\n        maxZoom: 24\n      });\n      this.tilesLayer.addTo(this._map);\n      this.LOG.debug(['displayMap'], 'build map', this.tilesLayer);\n      this.geoJsonLayer.bringToBack();\n      this.tilesLayer.bringToBack(); // TODO: tester\n      this._map.on('load', () => this.LOG.debug(['displayMap', 'load'], this._map.getCenter().lng, this.currentLong, this._map.getZoom()));\n      this._map.on('zoomend', () => {\n        if (!this.firstDraw) {\n          this.LOG.debug(['moveend'], this._map.getCenter());\n          this.currentZoom = this._map.getZoom();\n        }\n      });\n      this._map.on('moveend', () => {\n        if (!this.firstDraw) {\n          this.LOG.debug(['moveend'], this._map.getCenter());\n          this.currentLat = this._map.getCenter().lat;\n          this.currentLong = this._map.getCenter().lng;\n        }\n      });\n    }\n\n    let size = (this.pathData || []).length;\n    this.LOG.debug(['displayMap'], 'build map done', size);\n    for (let i = 0; i < size; i++) {\n      const d = this.pathData[i];\n      if (!!d) {\n        const plottedGts: any = this.updateGtsPath(d);\n        if (!!plottedGts) {\n          this.currentValuesMarkers.push(plottedGts.beforeCurrentValue);\n          this.currentValuesMarkers.push(plottedGts.afterCurrentValue);\n          this.currentValuesMarkers.push(plottedGts.currentValue);\n        }\n      }\n    }\n    this.LOG.debug(['displayMap'], 'this.pathData', this.pathData);\n    size = (this.annotationsData || []).length;\n    for (let i = 0; i < size; i++) {\n      const d = this.annotationsData[i];\n      const plottedGts: any = this.updateGtsPath(d);\n      if (!!plottedGts) {\n        if (d.render === 'line') {\n          this.currentValuesMarkers.push(plottedGts.beforeCurrentValue);\n          this.currentValuesMarkers.push(plottedGts.afterCurrentValue);\n        }\n        this.currentValuesMarkers.push(plottedGts.currentValue);\n      }\n    }\n    if (!!this._map) {\n      this.pathDataLayer = Leaflet.featureGroup(this.currentValuesMarkers || []).addTo(this._map);\n    }\n    this.LOG.debug(['displayMap', 'annotationsMarkers'], this.annotationsMarkers);\n    this.LOG.debug(['displayMap', 'this.hiddenData'], this.hiddenData);\n    this.LOG.debug(['displayMap', 'this.positionData'], this.positionData);\n    // Create the positions arrays\n    size = (this.positionData || []).length;\n    for (let i = 0; i < size; i++) {\n      const d = this.positionData[i];\n      this.positionArraysMarkers = this.positionArraysMarkers.concat(this.updatePositionArray(d));\n    }\n    this.LOG.debug(['displayMap'], 'this.po sitionData');\n    size = (this.annotationsData || []).length;\n    for (let i = 0; i < size; i++) {\n      const d = this.annotationsData[i];\n      this.positionArraysMarkers = this.positionArraysMarkers.concat(this.updateAnnotation(d));\n    }\n    this.LOG.debug(['displayMap'], 'this.annotationsData');\n\n    (this._options.map.tiles || []).forEach((t) => { // TODO to test\n      this.LOG.debug(['displayMap'], t);\n      if (this._options.map.showTimeRange) {\n        this.tileLayerGroup.addLayer(Leaflet.tileLayer(t\n            .replace('{start}', moment(this.timeStart).toISOString())\n            .replace('{end}', moment(this.timeEnd).toISOString()), {\n            subdomains: 'abcd',\n            maxNativeZoom: 19,\n            maxZoom: 40\n          }\n        ));\n      } else {\n        this.tileLayerGroup.addLayer(Leaflet.tileLayer(t, {\n          subdomains: 'abcd',\n          maxNativeZoom: 19,\n          maxZoom: 40\n        }));\n      }\n    });\n    this.LOG.debug(['displayMap'], 'this.tiles');\n\n    this.LOG.debug(['displayMap', 'positionArraysMarkers'], this.positionArraysMarkers);\n    this.LOG.debug(['displayMap', 'annotationsMarkers'], this.annotationsMarkers);\n\n    size = (this.positionArraysMarkers || []).length;\n    for (let i = 0; i < size; i++) {\n      const m = this.positionArraysMarkers[i];\n      m.addTo(this.positionDataLayer);\n    }\n    size = (this.annotationsMarkers || []).length;\n    for (let i = 0; i < size; i++) {\n      const m = this.annotationsMarkers[i];\n      m.addTo(this.annotationsDataLayer);\n    }\n\n    this.LOG.debug(['displayMap', 'geoJson'], this.geoJson);\n    size = (this.geoJson || []).length;\n    for (let i = 0; i < size; i++) {\n      const m = this.geoJson[i];\n      const color = ColorLib.getColor(i, this._options.scheme);\n      const opts = {\n        style: () => ({\n          color: (data.params && data.params[i]) ? data.params[i].color || color : color,\n          fillColor: (data.params && data.params[i])\n            ? ColorLib.transparentize(data.params[i].fillColor || color)\n            : ColorLib.transparentize(color),\n        })\n      } as any;\n      if (m.geometry.type === 'Point') {\n        opts.pointToLayer = (geoJsonPoint, latlng) => Leaflet.marker(latlng, {\n          icon: this.icon(color, (data.params && data.params[i]) ? data.params[i].marker : 'circle'),\n          opacity: 1,\n        });\n      }\n      let display = '';\n      const geoShape = Leaflet.geoJSON(m, opts);\n      if (m.properties) {\n        Object.keys(m.properties).forEach(k => display += `<b>${k}</b>: ${m.properties[k]}<br />`);\n        geoShape.bindPopup(display);\n      }\n      geoShape.addTo(this.geoJsonLayer);\n    }\n    if (this.pathData.length > 0 || this.positionData.length > 0 || this.annotationsData.length > 0 || this.geoJson.length > 0) {\n      // Fit map to curves\n      const group = Leaflet.featureGroup([this.geoJsonLayer, this.annotationsDataLayer, this.positionDataLayer, this.pathDataLayer]);\n      this.LOG.debug(['displayMap', 'setView'], 'fitBounds', group.getBounds());\n      this.LOG.debug(['displayMap', 'setView'], {lat: this.currentLat, lng: this.currentLong}, {\n        lat: this._options.map.startLat,\n        lng: this._options.map.startLong\n      });\n      this.bounds = group.getBounds();\n      setTimeout(() => {\n        if (!!this.bounds && this.bounds.isValid()) {\n          if ((this.currentLat || this._options.map.startLat) && (this.currentLong || this._options.map.startLong)) {\n            this._map.setView({\n                lat: this.currentLat || this._options.map.startLat || 0,\n                lng: this.currentLong || this._options.map.startLong || 0\n              }, this.currentZoom || this._options.map.startZoom || 10,\n              {animate: false, duration: 500});\n          } else {\n            this._map.fitBounds(this.bounds, {padding: [1, 1], animate: false, duration: 0});\n            //   this.currentZoom = this._map.getBoundsZoom(this.bounds, false);\n          }\n          this.currentLat = this._map.getCenter().lat;\n          this.currentLong = this._map.getCenter().lng;\n          //  this.currentZoom = this._map.getZoom();\n        } else {\n          this.LOG.debug(['displayMap', 'setView'], {lat: this.currentLat, lng: this.currentLong});\n          this._map.setView({\n              lat: this.currentLat || this._options.map.startLat || 0,\n              lng: this.currentLong || this._options.map.startLong || 0\n            }, this.currentZoom || this._options.map.startZoom || 10,\n            {\n              animate: false,\n              duration: 500\n            });\n        }\n      }, 10);\n    } else {\n      this.LOG.debug(['displayMap', 'lost'], 'lost', this.currentZoom, this._options.map.startZoom);\n      this._map.setView(\n        [\n          this.currentLat || this._options.map.startLat || 0,\n          this.currentLong || this._options.map.startLong || 0\n        ],\n        this.currentZoom || this._options.map.startZoom || 2,\n        {\n          animate: false,\n          duration: 0\n        }\n      );\n    }\n    if (this.heatData && this.heatData.length > 0) {\n      this._heatLayer = (Leaflet as any).heatLayer(this.heatData, {\n        radius: this._options.map.heatRadius,\n        blur: this._options.map.heatBlur,\n        minOpacity: this._options.map.heatOpacity\n      });\n      this._heatLayer.addTo(this._map);\n    }\n    this.firstDraw = false;\n    this.resizeMe();\n    this.patchMapTileGapBug();\n    this.chartDraw.emit(true);\n  }\n\n  updateAnnotation(gts) {\n    const positions = [];\n    let icon;\n    let size;\n    switch (gts.render) {\n      case 'marker':\n        icon = this.icon(gts.color, gts.marker);\n        size = (gts.path || []).length;\n        for (let i = 0; i < size; i++) {\n          const g = gts.path[i];\n          const marker = Leaflet.marker(g, {icon, opacity: 1});\n          marker.bindPopup(g.val.toString());\n          positions.push(marker);\n        }\n        break;\n      case 'weightedDots':\n        size = (gts.path || []).length;\n        for (let i = 0; i < size; i++) {\n          const p = gts.path[i];\n          if ((this._hiddenData || []).filter(h => h === gts.key).length === 0) {\n            let v = parseInt(p.val, 10);\n            if (isNaN(v)) {\n              v = 0;\n            }\n            const radius = (v - (gts.minValue || 0)) * 50 / (gts.maxValue || 50);\n            const marker = Leaflet.circleMarker(\n              p, {\n                radius: radius === 0 ? 1 : radius,\n                color: gts.borderColor,\n                fillColor: gts.color, fillOpacity: 0.5,\n                weight: 1\n              });\n            this.addPopup(gts, p.val, marker);\n            positions.push(marker);\n          }\n        }\n        break;\n      case 'dots':\n      default:\n        size = (gts.path || []).length;\n        for (let i = 0; i < size; i++) {\n          const g = gts.path[i];\n          const marker = Leaflet.circleMarker(\n            g, {\n              radius: gts.baseRadius,\n              color: gts.color,\n              fillColor: gts.color,\n              fillOpacity: 1\n            }\n          );\n          marker.bindPopup(g.val.toString());\n          positions.push(marker);\n        }\n        break;\n    }\n    return positions;\n  }\n\n  private updateGtsPath(gts: any) {\n    const beforeCurrentValue = Leaflet.polyline(\n      MapLib.pathDataToLeaflet(gts.path, {to: 0}), {\n        color: gts.color,\n        opacity: 1,\n      });\n    const afterCurrentValue = Leaflet.polyline(\n      MapLib.pathDataToLeaflet(gts.path, {from: 0}), {\n        color: gts.color,\n        opacity: 0.7,\n      });\n    let currentValue;\n    // Let's verify we have a path... No path, no marker\n    const size = (gts.path || []).length;\n    for (let i = 0; i < size; i++) {\n      const p = gts.path[i];\n      let date;\n      if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n        date = parseInt(p.ts, 10);\n      } else {\n        date = (moment(parseInt(p.ts, 10))\n          .utc(true).toISOString() || '')\n          .replace('Z', this._options.timeZone === 'UTC' ? 'Z' : '');\n      }\n      currentValue = Leaflet.circleMarker([p.lat, p.lon],\n        {radius: MapLib.BASE_RADIUS, color: gts.color, fillColor: gts.color, fillOpacity: 0.7})\n        .bindPopup(`<p>${date}</p><p><b>${gts.key}</b>: ${p.val.toString()}</p>`);\n    }\n    if (size > 0) {\n      return {\n        beforeCurrentValue,\n        afterCurrentValue,\n        currentValue,\n      };\n    } else {\n      return undefined;\n    }\n  }\n\n  private addPopup(positionData: any, value: any, marker: any) {\n    if (!!positionData) {\n      let content = '';\n      if (positionData.key) {\n        content = `<p><b>${positionData.key}</b>: ${value || 'na'}</p>`;\n      }\n      Object.keys(positionData.properties || []).forEach(k => content += `<b>${k}</b>: ${positionData.properties[k]}<br />`);\n      marker.bindPopup(content);\n    }\n  }\n\n  private updatePositionArray(positionData: any) {\n    const positions = [];\n    let polyline;\n    let icon;\n    let result;\n    let inStep;\n    let size;\n    this.LOG.debug(['updatePositionArray'], positionData);\n    switch (positionData.render) {\n      case 'path':\n        polyline = Leaflet.polyline(positionData.positions, {color: positionData.color, opacity: 1});\n        positions.push(polyline);\n        break;\n      case 'marker':\n        icon = this.icon(positionData.color, positionData.marker);\n        size = (positionData.positions || []).length;\n        for (let i = 0; i < size; i++) {\n          const p = positionData.positions[i];\n          if ((this.hiddenData || []).filter(h => h === positionData.key).length === 0) {\n            const marker = Leaflet.marker({lat: p[0], lng: p[1]}, {icon, opacity: 1});\n            this.addPopup(positionData, p[2], marker);\n            positions.push(marker);\n          }\n          this.LOG.debug(['updatePositionArray', 'build marker'], icon);\n        }\n        break;\n      case 'coloredWeightedDots':\n        this.LOG.debug(['updatePositionArray', 'coloredWeightedDots'], positionData);\n        result = [];\n        inStep = [];\n        for (let j = 0; j < positionData.numColorSteps; j++) {\n          result[j] = 0;\n          inStep[j] = 0;\n        }\n        size = (positionData.positions || []).length;\n        for (let i = 0; i < size; i++) {\n          const p = positionData.positions[i];\n          if ((this._hiddenData || []).filter(h => h === positionData.key).length === 0) {\n            this.LOG.debug(['updatePositionArray', 'coloredWeightedDots', 'radius'], positionData.baseRadius * p[4]);\n            const marker = Leaflet.circleMarker(\n              {lat: p[0], lng: p[1]},\n              {\n                radius: positionData.baseRadius * (parseInt(p[4], 10) + 1),\n                color: positionData.borderColor,\n                fillColor: ColorLib.rgb2hex(\n                  positionData.colorGradient[p[5]].r,\n                  positionData.colorGradient[p[5]].g,\n                  positionData.colorGradient[p[5]].b),\n                fillOpacity: 0.7,\n              });\n            this.addPopup(positionData, p[2], marker);\n            positions.push(marker);\n          }\n        }\n        break;\n      case 'weightedDots':\n        size = (positionData.positions || []).length;\n        for (let i = 0; i < size; i++) {\n          const p = positionData.positions[i];\n          if ((this._hiddenData || []).filter(h => h === positionData.key).length === 0) {\n            const marker = Leaflet.circleMarker(\n              {lat: p[0], lng: p[1]}, {\n                radius: positionData.baseRadius * (parseInt(p[4], 10) + 1),\n                color: positionData.borderColor,\n                fillColor: positionData.color, fillOpacity: 0.7,\n              });\n            this.addPopup(positionData, p[2], marker);\n            positions.push(marker);\n          }\n        }\n        break;\n      case 'dots':\n      default:\n        size = (positionData.positions || []).length;\n        for (let i = 0; i < size; i++) {\n          const p = positionData.positions[i];\n          if ((this._hiddenData || []).filter(h => h === positionData.key).length === 0) {\n            const marker = Leaflet.circleMarker(\n              {lat: p[0], lng: p[1]}, {\n                radius: positionData.baseRadius,\n                color: positionData.borderColor,\n                fillColor: positionData.color,\n                fillOpacity: 1,\n              });\n            this.addPopup(positionData, p[2], marker);\n            positions.push(marker);\n          }\n        }\n        break;\n    }\n    return positions;\n  }\n\n  public resize(): Promise<boolean> {\n    return new Promise<boolean>(resolve => {\n      this.resizeMe();\n      resolve(true);\n    });\n  }\n\n  onRangeSliderChange(event) {\n    this.LOG.debug(['onRangeSliderChange'], event);\n    this.timeStart = event.value || moment().valueOf();\n    this.timeEnd = event.highValue || moment().valueOf();\n    this.drawMap(true);\n  }\n\n  onRangeSliderWindowChange(event) {\n    this.LOG.debug(['onRangeSliderWindowChange'], event);\n    if (this.lowerTimeBound !== event.min || this.upperTimeBound !== event.max) {\n      this.lowerTimeBound = event.min;\n      this.upperTimeBound = event.max;\n    }\n  }\n\n  onSliderChange(event) {\n    this.LOG.debug(['onSliderChange'], event, moment(event.value).toISOString());\n    this._firstDraw = false;\n    if (this.timeEnd !== event.value) {\n      this.timeSpan = this.timeSpan || this._options.map.timeSpan;\n      this.timeEnd = event.value || moment().valueOf();\n      this.timeStart = (event.value || moment().valueOf()) - this.timeSpan / this.divider;\n      this.LOG.debug(['onSliderChange'], moment(this.timeStart).toISOString(), moment(this.timeEnd).toISOString());\n      this.change.emit(this.timeStart);\n      this.drawMap(true);\n    }\n  }\n\n  updateTimeSpan(event) {\n    this.LOG.debug(['updateTimeSpan'], event.target.value);\n    if (this.timeSpan !== event.target.value) {\n      this.timeSpan = event.target.value;\n      this.timeStart = (this.timeEnd || moment().valueOf()) - this.timeSpan / this.divider;\n      this.drawMap(true);\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, EventEmitter, Input, Output, ViewEncapsulation} from '@angular/core';\n\n@Component({\n  selector: 'warpview-heatmap-sliders',\n  templateUrl: './warp-view-heatmap-sliders.component.html',\n  styleUrls: ['./warp-view-heatmap-sliders.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewHeatmapSlidersComponent {\n\n  @Input('radiusValue') radiusValue: number;\n  @Input('minRadiusValue') minRadiusValue: number;\n  @Input('maxRadiusValue') maxRadiusValue: number;\n  @Input('blurValue') blurValue: number;\n  @Input('minBlurValue') minBlurValue: number;\n  @Input('maxBlurValue') maxBlurValue: number;\n\n  @Output('heatRadiusDidChange') heatRadiusDidChange = new EventEmitter<any>();\n  @Output('heatBlurDidChange') heatBlurDidChange = new EventEmitter<any>();\n  @Output('heatOpacityDidChange') heatOpacityDidChange = new EventEmitter<any>();\n\n  radiusChanged(value) {\n    this.heatRadiusDidChange.emit(value);\n  }\n\n  blurChanged(value) {\n    this.heatBlurDidChange.emit(value);\n  }\n\n  opacityChanged(value) {\n    this.heatOpacityDidChange.emit(value);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, EventEmitter, Input, NgZone, OnInit, Output, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\nimport {GTSLib} from '../../utils/gts.lib';\n\n@Component({\n  selector: 'warpview-pie',\n  templateUrl: './warp-view-pie.component.html',\n  styleUrls: ['./warp-view-pie.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewPieComponent extends WarpViewComponent implements OnInit {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n\n  private _type = 'pie';\n  layout: Partial<any> = {\n    showlegend: true,\n    legend: {\n      orientation: 'h',\n      bgcolor: 'transparent',\n    },\n    orientation: 270,\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewPieComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.layout.legend.font = {\n      color: this.getCSSColor(this.el.nativeElement, '--warp-view-font-color', '#000')\n    };\n    this.layout.textfont = {\n      color: this.getCSSColor(this.el.nativeElement, '--warp-view-font-color', '#000')\n    };\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const gtsList = data.data as any[];\n    const plotData = [] as Partial<any>[];\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    const pieData = {\n      values: [],\n      labels: [],\n      marker: {\n        colors: [],\n        line: {\n          width: 3,\n          color: [],\n        }\n      },\n      textfont: {\n        color: this.getLabelColor(this.el.nativeElement)\n      },\n      hoverlabel: {\n        bgcolor: this.getCSSColor(this.el.nativeElement, '--warp-view-chart-legend-bg', '#000000'),\n        bordercolor: 'grey',\n        font: {\n          color: this.getCSSColor(this.el.nativeElement, '--warp-view-chart-legend-color', '#ffffff')\n        }\n      },\n      type: 'pie'\n    } as any;\n    gtsList.forEach((d: any, i) => {\n      if (!GTSLib.isGts(d)) {\n        const c = ColorLib.getColor(i, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        pieData.values.push(d[1]);\n        pieData.labels.push(d[0]);\n        pieData.marker.colors.push(ColorLib.transparentize(color));\n        pieData.marker.line.color.push(color);\n        if (this._type === 'donut') {\n          pieData.hole = 0.5;\n        }\n        if (this.unit) {\n          pieData.title = {\n            text: this.unit\n          };\n        }\n      }\n    });\n    if (pieData.values.length > 0) {\n      plotData.push(pieData);\n    }\n    this.noData = plotData.length === 0;\n    return plotData;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport gauge from 'canvas-gauges';\nimport {ColorLib} from '../../utils/color-lib';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\n\n@Component({\n  selector: 'warpview-gauge',\n  templateUrl: './warp-view-gauge.component.html',\n  styleUrls: ['./warp-view-gauge.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGaugeComponent extends WarpViewComponent implements OnInit {\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  private CHART_MARGIN = 0.05;\n  // tslint:disable-next-line:variable-name\n  private _type = 'gauge'; // gauge or bullet\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewGaugeComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.LOG.debug(['drawChart', 'plotlyData'], this.plotlyData, this._type);\n    this.layout.autosize = true;\n    this.layout.grid = {\n      rows: Math.ceil(this.plotlyData.length / 2),\n      columns: 2,\n      pattern: 'independent',\n      xgap: 0.2,\n      ygap: 0.2\n    };\n    this.layout.margin = {t: 25, r: 25, l: 25, b: 25};\n    if (this._type === 'bullet') {\n      this.layout.height = this.plotlyData.length * 100;\n      (this.el.nativeElement as HTMLDivElement).style.height = this.layout.height + 'px';\n      this.layout.margin.l = 300;\n      this.layout.yaxis = {\n        automargin: true\n      };\n      this.layout.grid = {rows: this.plotlyData.length, columns: 1, pattern: 'independent'};\n    }\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): any[] {\n    this.LOG.debug(['convert'], data);\n    const gtsList = data.data as any[];\n    const dataList = [];\n    let max = Number.MIN_VALUE;\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    if (!gtsList || gtsList.length === 0 || gtsList[0].length < 2) {\n      return;\n    }\n    gtsList.forEach(d => max = Math.max(max, d[1]));\n    let x = 0;\n    let y = -1 / (gtsList.length / 2);\n    gtsList.forEach((gts, i) => {\n      if (i % 2 !== 0) {\n        x = 0.5;\n      } else {\n        x = 0;\n        y += 1 / (gtsList.length / 2);\n      }\n      const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n      const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n      const domain = gtsList.length > 1 ? {\n        x: [x + this.CHART_MARGIN, x + 0.5 - this.CHART_MARGIN],\n        y: [y + this.CHART_MARGIN, y + 1 / (gtsList.length / 2) - this.CHART_MARGIN * 2]\n      } : {\n        x: [0, 1],\n        y: [0, 1]\n      };\n      if (this._type === 'bullet' || (!!data.params && !!data.params[i].type && data.params[i].type === 'bullet')) {\n        domain.x = [this.CHART_MARGIN, 1 - this.CHART_MARGIN];\n        domain.y = [(i > 0 ? i / gtsList.length : 0) + this.CHART_MARGIN, (i + 1) / gtsList.length - this.CHART_MARGIN];\n      }\n      dataList.push(\n        {\n          domain,\n          align: 'left',\n          value: gts[1],\n          delta: {\n            reference: !!data.params && !!data.params[i].delta ? data.params[i].delta + gts[1] : 0,\n            font: {color: this.getLabelColor(this.el.nativeElement)}\n          },\n          title: {\n            text: gts[0],\n            align: 'center',\n            font: {color: this.getLabelColor(this.el.nativeElement)}\n          },\n          number: {\n            font: {color: this.getLabelColor(this.el.nativeElement)}\n          },\n          type: 'indicator',\n          mode: !!data.params && !!data.params[i].delta ? 'number+delta+gauge' : 'gauge+number',\n          gauge: {\n            bgcolor: 'transparent',\n            shape: !!data.params && !!data.params[i].type ? data.params[i].type : this._type || 'gauge',\n            bordercolor: this.getGridColor(this.el.nativeElement),\n            axis: {\n              range: [null, max],\n              tickcolor: this.getGridColor(this.el.nativeElement),\n              tickfont: {color: this.getGridColor(this.el.nativeElement)}\n            },\n            bar: {\n              color: ColorLib.transparentize(color),\n              line: {\n                width: 1,\n                color\n              }\n            }\n          }\n        });\n      this.LOG.debug(['convert', 'dataList'], i);\n    });\n    this.LOG.debug(['convert', 'dataList'], dataList);\n    return dataList;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Param} from '../../model/param';\nimport {ChartLib} from '../../utils/chart-lib';\nimport moment from 'moment-timezone';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartBounds} from '../../model/chartBounds';\n\n@Component({\n  selector: 'warpview-annotation',\n  templateUrl: './warp-view-annotation.component.html',\n  styleUrls: ['./warp-view-annotation.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewAnnotationComponent extends WarpViewComponent {\n  @ViewChild('chartContainer', {static: true}) chartContainer: ElementRef;\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    const previousVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'previousVisibility'], previousVisibility);\n    this._hiddenData = hiddenData;\n    this.visibility = [];\n    this.visibleGtsId.forEach(id => this.visibility.push(hiddenData.indexOf(id) < 0 && (id !== -1)));\n    this.LOG.debug(['hiddenData', 'hiddendygraphfullv'], this.visibility);\n    const newVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'json'], previousVisibility, newVisibility);\n    if (previousVisibility !== newVisibility) {\n      const visible = [];\n      const hidden = [];\n      this.gtsId.forEach((id, i) => {\n        if (this._hiddenData.indexOf(id) > -1) {\n          hidden.push(i);\n        } else {\n          visible.push(i);\n        }\n      });\n      if (visible.length > 0) {\n        this.graph.restyleChart({visible: true}, visible);\n      }\n      if (hidden.length > 0) {\n        this.graph.restyleChart({visible: false}, hidden);\n      }\n      this.LOG.debug(['hiddendygraphtrig', 'destroy'], 'redraw by visibility change');\n    }\n  }\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  @Input('standalone') set standalone(isStandalone: boolean) {\n    if (this._standalone !== isStandalone) {\n      this._standalone = isStandalone;\n      this.drawChart();\n    }\n  }\n\n  get standalone(): boolean {\n    return this._standalone;\n  }\n\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n\n  displayExpander = true;\n\n  // tslint:disable-next-line:variable-name\n  private _type = 'line';\n  private visibility: boolean[] = [];\n  private expanded = false;\n  private _standalone = true;\n  private trimmed;\n  private maxTick = Number.MIN_VALUE;\n  private minTick = Number.MAX_VALUE;\n  private visibleGtsId = [];\n  private gtsId = [];\n  private dataHashset = {};\n  private lineHeight = 30;\n  private chartBounds: ChartBounds = new ChartBounds();\n  layout: Partial<any> = {\n    showlegend: false,\n    hovermode: 'closest',\n    xaxis: {\n      gridwidth: 1,\n      fixedrange: false,\n      autorange: false,\n      automargin: false,\n      showticklabels: true,\n    },\n    autosize: false,\n    autoexpand: false,\n    yaxis: {\n      showticklabels: false,\n      fixedrange: true,\n      dtick: 1,\n      gridwidth: 1,\n      tick0: 0,\n      nticks: 2,\n      rangemode: 'tozero',\n      tickson: 'boundaries',\n      automargin: true,\n      showline: true,\n      zeroline: true\n    },\n    margin: {\n      t: 30,\n      b: 2,\n      r: 10,\n      l: 10\n    },\n  };\n  marginLeft = 50;\n\n  @HostListener('keydown', ['$event'])\n  @HostListener('document:keydown', ['$event'])\n  handleKeyDown($event: KeyboardEvent) {\n    if ($event.key === 'Control') {\n      this.trimmed = setInterval(() => {\n        if (!!this.toolTip.nativeElement.querySelector('#tooltip-body')) {\n          this.toolTip.nativeElement.querySelector('#tooltip-body').classList.add('full');\n        }\n      }, 100);\n    }\n  }\n\n  @HostListener('keyup', ['$event'])\n  @HostListener('document:keyup', ['$event'])\n  handleKeyup($event: KeyboardEvent) {\n    this.LOG.debug(['document:keyup'], $event);\n    if ($event.key === 'Control') {\n      if (!!this.toolTip.nativeElement.querySelector('#tooltip-body')) {\n        if (this.trimmed) {\n          clearInterval(this.trimmed);\n        }\n        this.toolTip.nativeElement.querySelector('#tooltip-body').classList.remove('full');\n      }\n    }\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this._autoResize = false;\n    this.LOG = new Logger(WarpViewAnnotationComponent, this._debug);\n  }\n\n  update(options: Param, refresh: boolean): void {\n    if (!!options) {\n      this._options = ChartLib.mergeDeep(this._options, options) as Param;\n    }\n    this.drawChart(refresh);\n  }\n\n  updateBounds(min, max, marginLeft) {\n    this.LOG.debug(['updateBounds'], min, max, this._options);\n    this._options.bounds.minDate = min;\n    this._options.bounds.maxDate = max;\n    this.layout.xaxis.autorange = false;\n    this.LOG.debug(['updateBounds'],\n      moment.tz(min / this.divider, this._options.timeZone).toISOString(),\n      moment.tz(max / this.divider, this._options.timeZone).toISOString());\n    this.minTick = min;\n    this.maxTick = max;\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.tick0 = min / this.divider;\n      this.layout.xaxis.range = [min / this.divider, max / this.divider];\n    } else {\n      this.layout.xaxis.tick0 = moment.tz(min / this.divider, this._options.timeZone).toISOString();\n      this.layout.xaxis.range = [\n        moment.tz(min / this.divider, this._options.timeZone).toISOString(),\n        moment.tz(max / this.divider, this._options.timeZone).toISOString()\n      ];\n    }\n    this.layout.margin.l = marginLeft;\n    this.marginLeft = marginLeft;\n    this.layout = {...this.layout};\n    this.LOG.debug(['updateBounds'], {...this.layout.xaxis.range});\n  }\n\n  drawChart(reparseNewData: boolean = false) {\n    if (!this.initChart(this.el)) {\n      this.el.nativeElement.style.display = 'none';\n      return;\n    }\n    this.el.nativeElement.style.display = 'block';\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.LOG.debug(['drawChart', 'hiddenData'], this._hiddenData);\n    this.LOG.debug(['drawChart', 'this._options.bounds'], this._options.bounds);\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.yaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.yaxis.showline = !!this._standalone;\n    this.layout.yaxis.zerolinecolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.gridcolor = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.autorange = !!this._standalone;\n    this.layout.xaxis.showticklabels = !!this._standalone;\n    this.displayExpander = (this.plotlyData.length > 1);\n    const count = this.plotlyData.filter(d => d.y.length > 0).length;\n    this.layout.margin.l = !!this._standalone ? 10 : 50;\n    this.layout.margin.b = !!this._standalone ? 50 : 1;\n    const calculatedHeight = (this.expanded ? this.lineHeight * count : this.lineHeight) + this.layout.margin.t + this.layout.margin.b;\n    this.el.nativeElement.style.height = calculatedHeight + 'px';\n    this.height = calculatedHeight;\n    this.layout.height = this.height;\n    this.LOG.debug(['drawChart', 'height'], this.height, count, calculatedHeight);\n    this.layout.yaxis.range = [0, this.expanded ? count : 1];\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.tick0 = this.minTick / this.divider;\n      this.layout.xaxis.range = [this.minTick / this.divider, this.maxTick / this.divider];\n      this.layout.xaxis.type = 'linear';\n    } else {\n      this.layout.xaxis.tick0 = moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true);\n      this.layout.xaxis.range = [\n        moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true),\n        moment.tz(this.maxTick / this.divider, this._options.timeZone).toISOString(true)\n      ];\n      this.layout.xaxis.type = 'date';\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.plotlyConfig = {...this.plotlyConfig};\n    this.layout = {...this.layout};\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig, this.plotlyData);\n    this.loading = false;\n  }\n\n  relayout(data: any) {\n    if (data['xaxis.range'] && data['xaxis.range'].length === 2) {\n      this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range'], data['xaxis.range']);\n      this.chartBounds.msmin = data['xaxis.range'][0];\n      this.chartBounds.msmax = data['xaxis.range'][1];\n      this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf();\n      this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf();\n    } else if (data['xaxis.range[0]'] && data['xaxis.range[1]']) {\n      this.LOG.debug(['relayout', 'updateBounds', 'xaxis.range[x]'], data['xaxis.range[0]']);\n      this.chartBounds.msmin = data['xaxis.range[0]'];\n      this.chartBounds.msmax = data['xaxis.range[1]'];\n      this.chartBounds.tsmin = moment.tz(moment(this.chartBounds.msmin), this._options.timeZone).valueOf();\n      this.chartBounds.tsmax = moment.tz(moment(this.chartBounds.msmax), this._options.timeZone).valueOf();\n    } else if (data['xaxis.autorange']) {\n      this.LOG.debug(['relayout', 'updateBounds', 'autorange'], data);\n      this.chartBounds.tsmin = this.minTick / this.divider;\n      this.chartBounds.tsmax = this.maxTick / this.divider;\n    }\n    this.emitNewBounds(moment.utc(this.chartBounds.tsmin).valueOf(), moment.utc(this.chartBounds.msmax).valueOf());\n  }\n\n  hover(data: any) {\n    this.LOG.debug(['hover'], data);\n    const tooltip = this.toolTip.nativeElement;\n    this.pointHover.emit({\n      x: data.event.offsetX,\n      y: data.event.offsetY\n    });\n    let x = data.xvals[0];\n    if (!!data.points[0]) {\n      x = data.points[0].x;\n    }\n    const layout = this.el.nativeElement.getBoundingClientRect();\n    const count = this.plotlyData.filter(d => d.y.length > 0).length;\n    tooltip.style.opacity = '1';\n    tooltip.style.display = 'block';\n    tooltip.style.paddingLeft = (this._standalone ? 0 : 40) + 'px';\n    tooltip.style.top = (\n      (this.expanded ? count - 1 - (data.points[0].y + 0.5) : -1) * (this.lineHeight) + this.layout.margin.t\n    ) + 6 + 'px';\n    tooltip.classList.remove('right', 'left');\n    tooltip.innerHTML = `<div class=\"tooltip-body trimmed\" id=\"tooltip-body\">\n<span class=\"tooltip-date\">${this._options.timeMode === 'timestamp'\n      ? x\n      : (moment(x).utc().toISOString().replace('Z', this._options.timeZone === 'UTC' ? 'Z' : '') || '')}</span>\n<ul>\n<li>${GTSLib.formatLabel(data.points[0].data.name)}: <span class=\"value\">${data.points[0].text}</span></li>\n</ul>\n      </div>`;\n    if (data.event.offsetX > layout.width / 2) {\n      tooltip.classList.add('left');\n    } else {\n      tooltip.classList.add('right');\n    }\n    tooltip.style.pointerEvents = 'none';\n  }\n\n  unhover() {\n    this.toolTip.nativeElement.style.display = 'none';\n  }\n\n  afterPlot(div) {\n    this.loading = false;\n    this.chartBounds.tsmin = this.minTick;\n    this.chartBounds.tsmax = this.maxTick;\n    this.chartDraw.emit(this.chartBounds);\n    this.LOG.debug(['afterPlot'], this.chartBounds, div);\n  }\n\n  private emitNewBounds(min, max) {\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.boundsDidChange.emit({bounds: {min, max}, source: 'annotation'});\n    } else {\n      this.boundsDidChange.emit({\n        bounds: {\n          min: moment.tz(min, this._options.timeZone).valueOf(),\n          max: moment.tz(max, this._options.timeZone).valueOf()\n        },\n        source: 'annotation'\n      });\n    }\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    this.maxTick = Number.NEGATIVE_INFINITY;\n    this.minTick = Number.POSITIVE_INFINITY;\n    this.visibleGtsId = [];\n    this.gtsId = [];\n    const nonPlottable = gtsList.filter(g => g.v && GTSLib.isGtsToPlot(g));\n    gtsList = gtsList.filter(g => g.v && !GTSLib.isGtsToPlot(g));\n    let timestampMode = true;\n    const tsLimit = 100 * GTSLib.getDivider(this._options.timeUnit);\n    gtsList.forEach((gts: GTS) => {\n      const ticks = gts.v.map(t => t[0]);\n      const size = gts.v.length;\n      timestampMode = timestampMode && (ticks[0] > -tsLimit && ticks[0] < tsLimit);\n      timestampMode = timestampMode && (ticks[size - 1] > -tsLimit && ticks[size - 1] < tsLimit);\n    });\n    if (timestampMode || this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.type = 'linear';\n    } else {\n      this.layout.xaxis.type = 'date';\n    }\n    gtsList.forEach((gts: GTS, i) => {\n      if (gts.v) {\n        const size = gts.v.length;\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(gts.id, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: 'scatter',\n          mode: 'markers',\n          name: label,\n          x: [],\n          y: [],\n          text: [],\n          hoverinfo: 'none',\n          connectgaps: false,\n          visible: !(this._hiddenData.filter(h => h === gts.id).length > 0),\n          line: {color},\n          marker: {\n            symbol: 'line-ns-open',\n            color,\n            size: 20,\n            width: 5,\n          }\n        };\n        this.visibleGtsId.push(gts.id);\n        this.gtsId.push(gts.id);\n        if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n          this.layout.xaxis.type = 'linear';\n        } else {\n          this.layout.xaxis.type = 'date';\n        }\n        const ticks = gts.v.map(t => t[0]);\n        series.text = gts.v.map(t => t[t.length - 1]);\n        series.y = gts.v.map(() => (this.expanded ? i : 0) + 0.5);\n        if (size > 0) {\n          this.minTick = ticks[0];\n          this.maxTick = ticks[0];\n          for (let v = 1; v < size; v++) {\n            const val = ticks[v];\n            this.minTick = (val < this.minTick) ? val : this.minTick;\n            this.maxTick = (val > this.maxTick) ? val : this.maxTick;\n          }\n        }\n        if (timestampMode || this._options.timeMode === 'timestamp') {\n          series.x = ticks;\n        } else {\n          if (this._options.timeZone !== 'UTC') {\n            series.x = ticks.map(t => moment.utc(t / this.divider).tz(this._options.timeZone).toISOString());\n          } else {\n            series.x = ticks.map(t => moment.utc(t / this.divider).toISOString());\n          }\n        }\n        if (series.x.length > 0) {\n          dataset.push(series);\n        }\n      }\n    });\n    if (nonPlottable.length > 0) {\n      nonPlottable.forEach(g => {\n        g.v.forEach(value => {\n          const ts = value[0];\n          if (ts < this.minTick) {\n            this.minTick = ts;\n          }\n          if (ts > this.maxTick) {\n            this.maxTick = ts;\n          }\n        });\n      });\n      // if there is not any plottable data, we must add a fake one with id -1. This one will always be hidden.\n      if (0 === gtsList.length) {\n        if (!this.dataHashset[this.minTick]) {\n          this.dataHashset[this.minTick] = [0];\n        }\n        if (!this.dataHashset[this.maxTick]) {\n          this.dataHashset[this.maxTick] = [0];\n        }\n        this.visibility.push(false);\n        this.visibleGtsId.push(-1);\n      }\n    }\n    if (timestampMode) {\n      this._options.timeMode = 'timestamp';\n    }\n    return dataset;\n  }\n\n  toggle() {\n    this.expanded = !this.expanded;\n    this.drawChart();\n  }\n\n  setRealBounds(chartBounds: ChartBounds) {\n    this.minTick = chartBounds.tsmin;\n    this.maxTick = chartBounds.tsmax;\n    this._options.bounds = this._options.bounds || {};\n    this._options.bounds.minDate = this.minTick;\n    this._options.bounds.maxDate = this.maxTick;\n    const x = {\n      tick0: undefined,\n      range: []\n    };\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      x.tick0 = this.minTick / this.divider;\n      x.range = [this.minTick / this.divider, this.maxTick / this.divider];\n    } else {\n      x.tick0 = moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true);\n      x.range = [\n        moment.tz(this.minTick / this.divider, this._options.timeZone).toISOString(true),\n        moment.tz(this.maxTick / this.divider, this._options.timeZone).toISOString(true)\n      ];\n    }\n    this.layout.xaxis = x;\n    this.layout = {...this.layout};\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport {GTS} from '../../model/GTS';\nimport moment from 'moment-timezone';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport deepEqual from 'deep-equal';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\n\n@Component({\n  selector: 'warpview-polar',\n  templateUrl: './warp-view-polar.component.html',\n  styleUrls: ['./warp-view-polar.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\n/**\n *\n */\nexport class WarpViewPolarComponent extends WarpViewComponent implements OnInit {\n  layout: Partial<any> = {\n    paper_bgcolor: 'rgba(0,0,0,0)',\n    showlegend: true,\n    legend: {orientation: 'h'},\n    font: {size: 12, familly: '\\'Quicksand\\', sans-serif'},\n    polar: {\n      bgcolor: 'rgba(0,0,0,0)',\n      angularaxis: {\n        type: 'category'\n      },\n      radialaxis: {\n        visible: true,\n      }\n    },\n    orientation: 270,\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewPolarComponent, this._debug);\n  }\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.layout.polar.radialaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.polar.angularaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.showlegend = !!this.showLegend;\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    const divider = GTSLib.getDivider(this._options.timeUnit);\n    const gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    let minVal = Number.MAX_VALUE;\n    let maxVal = Number.MIN_VALUE;\n    gtsList.forEach((gts: GTS, i) => {\n      const c = ColorLib.getColor(i, this._options.scheme);\n      const color = ((data.params || [])[gts.id] || {datasetColor: c}).datasetColor || c;\n      const series: any = {\n        r: [],\n        theta: [],\n        marker: {\n          line: {color, width: 1},\n          color: ColorLib.transparentize(color),\n        },\n        fillcolor: ColorLib.transparentize(color),\n        hoverinfo: 'none',\n        name: GTSLib.serializeGtsMetadata(gts),\n        text: GTSLib.serializeGtsMetadata(gts),\n        fill: 'toself',\n        type: 'barpolar',\n      };\n      gts.v.forEach(value => {\n        const ts = value[0];\n        minVal = Math.min(minVal, value[value.length - 1]);\n        maxVal = Math.max(maxVal, value[value.length - 1]);\n        series.r.push(value[value.length - 1]);\n        if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n          series.theta.push(ts.toString());\n        } else {\n          series.theta.push(moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toISOString());\n        }\n      });\n      if (this.unit) {\n        series.title = {\n          text: this.unit\n        };\n      }\n      dataset.push(series);\n    });\n    this.layout.polar.radialaxis.range = [minVal, maxVal];\n    return dataset;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\nimport moment from 'moment-timezone';\nimport deepEqual from 'deep-equal';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\n\n@Component({\n  selector: 'warpview-radar',\n  templateUrl: './warp-view-radar.component.html',\n  styleUrls: ['./warp-view-radar.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\n/**\n *\n */\nexport class WarpViewRadarComponent extends WarpViewComponent implements OnInit {\n\n  layout: Partial<any> = {\n    paper_bgcolor: 'transparent',\n    showlegend: true,\n    legend: {orientation: 'h'},\n    font: {size: 12},\n    polar: {\n      bgcolor: 'transparent',\n      angularaxis: {type: 'category'},\n      radialaxis: {visible: true}\n    },\n    margin: {\n      t: 0,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewRadarComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.layout.polar.radialaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.polar.angularaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.showlegend = this.showLegend;\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.LOG.debug(['drawChart', 'this.plotlyData'], this.plotlyData);\n    this.loading = false;\n  }\n\n  protected convert(data: DataModel): any[] {\n    const dataset: any[] = [];\n    const divider = GTSLib.getDivider(this._options.timeUnit);\n    const gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    let minVal = Number.MAX_VALUE;\n    let maxVal = Number.MIN_VALUE;\n    gtsList.forEach((gts: GTS, i) => {\n      const c = ColorLib.getColor(i, this._options.scheme);\n      const color = ((data.params || [])[gts.id] || {datasetColor: c}).datasetColor || c;\n      const series: any = {\n        r: [],\n        theta: [],\n        line: {color},\n        marker: {\n          line: {color, width: 1},\n          color: ColorLib.transparentize(color)\n        },\n        fillcolor: ColorLib.transparentize(color),\n        hoverinfo: 'none',\n        name: GTSLib.serializeGtsMetadata(gts),\n        text: GTSLib.serializeGtsMetadata(gts),\n        type: 'scatterpolar',\n        fill: 'toself'\n      };\n      gts.v.forEach(value => {\n        const ts = value[0];\n        series.r.push(value[value.length - 1]);\n        minVal = Math.min(minVal, value[value.length - 1]);\n        maxVal = Math.max(maxVal, value[value.length - 1]);\n        if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n          series.theta.push(ts.toString());\n        } else {\n          series.theta.push(moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toISOString());\n        }\n      });\n      dataset.push(series);\n    });\n    this.layout.polar.radialaxis.range = [minVal, maxVal];\n    return dataset;\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {WarpViewModalComponent} from '../warp-view-modal/warp-view-modal.component';\nimport {Param} from '../../model/param';\nimport {WarpViewChartComponent} from '../warp-view-chart/warp-view-chart.component';\nimport {WarpViewAnnotationComponent} from '../warp-view-annotation/warp-view-annotation.component';\nimport {WarpViewMapComponent} from '../warp-view-map/warp-view-map.component';\nimport {WarpViewGtsPopupComponent} from '../warp-view-gts-popup/warp-view-gts-popup.component';\nimport {ChartBounds} from '../../model/chartBounds';\nimport moment from 'moment-timezone';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {DataModel} from '../../model/dataModel';\nimport deepEqual from 'deep-equal';\nimport {Size, SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-plot',\n  templateUrl: './warp-view-plot.component.html',\n  styleUrls: ['./warp-view-plot.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewPlotComponent extends WarpViewComponent implements OnInit, AfterViewInit {\n\n  @ViewChild('mainPlotDiv', {static: true}) mainPlotDiv: ElementRef;\n  @ViewChild('timeClip', {static: true}) timeClip: WarpViewModalComponent;\n  @ViewChild('modal', {static: true}) modal: WarpViewModalComponent;\n  @ViewChild('chart', {static: false}) chart: WarpViewChartComponent;\n  @ViewChild('gtsPopupModal', {static: false}) gtsPopupModal: WarpViewGtsPopupComponent;\n  @ViewChild('annotation', {static: false}) annotation: WarpViewAnnotationComponent;\n  @ViewChild('map', {static: false}) map: WarpViewMapComponent;\n  @ViewChild('timeClipElement', {static: true}) timeClipElement: ElementRef;\n  @ViewChild('GTSTree', {static: true}) GTSTree: ElementRef;\n  @ViewChild('controls', {static: true}) controls: ElementRef;\n  @ViewChild('filterInput', {static: true}) filterInput: ElementRef;\n  @ViewChild('tzSelector', {static: false}) tzSelector: ElementRef;\n  @ViewChild('line', {static: false}) line: ElementRef;\n  @ViewChild('main', {static: false}) main: ElementRef;\n  private showLine = false;\n  private left: number;\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  @Input('gtsFilter') set gtsFilter(gtsFilter) {\n    this._gtsFilter = gtsFilter;\n    this.drawChart();\n  }\n\n  get gtsFilter() {\n    return this._gtsFilter;\n  }\n\n  @Input('isAlone') isAlone = false;\n  @Input('initialChartHeight') initialChartHeight = 400;\n  @Input('initialMapHeight') initialMapHeight = 400;\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n\n  _options: Param = {\n    ...new Param(), ...{\n      showControls: true,\n      showGTSTree: true,\n      showDots: true,\n      timeZone: 'UTC',\n      timeUnit: 'us',\n      timeMode: 'date',\n      bounds: {}\n    }\n  };\n  _toHide: number[] = [];\n  showChart = true;\n  showMap = false;\n  timeClipValue = '';\n  kbdLastKeyPressed: string[] = [];\n  warningMessage = '';\n  loading = false;\n  gtsIdList: number[] = [];\n\n  private kbdCounter = 0;\n  private gtsFilterCount = 0;\n  private gtsBrowserIndex = -1;\n  private _gtsFilter = 'x';\n  private _type = 'line';\n  private chartBounds: ChartBounds = {\n    tsmin: Number.MAX_VALUE,\n    tsmax: Number.MIN_VALUE,\n    msmax: '',\n    msmin: '',\n    marginLeft: 0\n  };\n  // key event are trapped in plot component.\n  // if one of this key is pressed, default action is prevented.\n  private preventDefaultKeyList: string[] = ['Escape', '/'];\n  private preventDefaultKeyListInModals: string[] = ['Escape', 'ArrowUp', 'ArrowDown', ' ', '/'];\n  gtsList: DataModel | GTS[] | string;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewPlotComponent, this._debug);\n  }\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  ngAfterViewInit(): void {\n    this.drawChart(true);\n    this.resizeArea();\n  }\n\n  @HostListener('keydown', ['$event'])\n  handleKeydown(ev: KeyboardEvent) {\n    this.LOG.debug(['handleKeydown'], ev);\n    if (!this.isAlone) {\n      this.handleKeyPress(ev).then(() => {\n        // empty\n      });\n    }\n  }\n\n  stateChange(event: any) {\n    this.LOG.debug(['stateChange'], event);\n    switch (event.id) {\n      case 'timeSwitch' :\n        if (event.state) {\n          this._options.timeMode = 'timestamp';\n        } else {\n          this._options.timeMode = 'date';\n        }\n        this.drawChart();\n        break;\n      case 'typeSwitch' :\n        if (event.state) {\n          this._type = 'step';\n        } else {\n          this._type = 'line';\n        }\n        this.drawChart();\n        break;\n      case 'chartSwitch' :\n        this.showChart = event.state;\n        this.drawChart();\n        break;\n      case 'mapSwitch' :\n        this.showMap = event.state;\n        if (this.showMap) {\n          requestAnimationFrame(() => this.map.resize());\n        }\n        break;\n    }\n  }\n\n  boundsDidChange(event) {\n    this.LOG.debug(['updateBounds'], event);\n    this._options.bounds = this._options.bounds || {};\n    if (this._options.bounds.minDate !== event.bounds.min && this._options.bounds.maxDate !== event.bounds.max) {\n      this._options.bounds = this._options.bounds || {};\n      this._options.bounds.minDate = event.bounds.min;\n      this._options.bounds.maxDate = event.bounds.max;\n      if (event.source === 'chart') {\n        this.annotation.updateBounds(event.bounds.min, event.bounds.max, event.bounds.marginLeft);\n      } else if (event.source === 'annotation') {\n        this.chart.updateBounds(event.bounds.min, event.bounds.max);\n      }\n      this.LOG.debug(['updateBounds'],\n        moment.tz(event.bounds.min, this._options.timeZone).toDate(),\n        moment.tz(event.bounds.max, this._options.timeZone).toDate());\n      this.line.nativeElement.style.left = '-100px';\n    }\n  }\n\n  onWarpViewModalClose() {\n    this.mainPlotDiv.nativeElement.focus();\n  }\n\n  warpViewSelectedGTS(event) {\n    this.LOG.debug(['warpViewSelectedGTS'], event);\n    if (!this._toHide.find(i => {\n      return i === event.gts.id;\n    }) && !event.selected) { // if not in toHide and state false, put id in toHide\n      this._toHide.push(event.gts.id);\n    } else {\n      if (event.selected) { // if in toHide and state true, remove it from toHide\n        this._toHide = this._toHide.filter(i => {\n          return i !== event.gts.id;\n        });\n      }\n    }\n    this.LOG.debug(['warpViewSelectedGTS', 'this._toHide'], this._toHide);\n    this.ngZone.run(() => {\n      this._toHide = [...this._toHide];\n    });\n  }\n\n  handleMouseMove(evt: MouseEvent) {\n    evt.preventDefault();\n    if (this.showLine && this.line) {\n      this.line.nativeElement.style.left = Math.max(evt.pageX - this.left, 50) + 'px';\n    }\n  }\n\n  handleMouseEnter(evt: MouseEvent) {\n    evt.preventDefault();\n    this.left = this.left || this.main.nativeElement.getBoundingClientRect().left;\n    this.showLine = true;\n    if (this.line) {\n      this.renderer.setStyle(this.line.nativeElement, 'display', 'block');\n    }\n  }\n\n  handleMouseOut(evt: MouseEvent) {\n    // evt.preventDefault();\n    if (this.line) {\n      this.showLine = false;\n      this.renderer.setStyle(this.line.nativeElement, 'left', '-100px');\n      this.renderer.setStyle(this.line.nativeElement, 'display', 'none');\n    }\n  }\n\n  update(options, refresh): void {\n    if (options) {\n      let optionChanged = false;\n      Object.keys(options).forEach(opt => {\n        if (this._options.hasOwnProperty(opt)) {\n          optionChanged = optionChanged || !deepEqual(options[opt], this._options[opt]);\n        } else {\n          optionChanged = true; // new unknown option\n        }\n      });\n      if (this.LOG) {\n        this.LOG.debug(['onOptions', 'optionChanged'], optionChanged);\n      }\n      if (optionChanged) {\n        if (this.LOG) {\n          this.LOG.debug(['onOptions', 'options'], options);\n        }\n        this._options = options;\n        this.drawChart(false);\n      }\n      this.drawChart(refresh);\n    } else {\n      this.drawChart(refresh);\n    }\n  }\n\n  inputTextKeyboardEvents(e: KeyboardEvent) {\n    e.stopImmediatePropagation();\n    if (e.key === 'Enter') {\n      this.applyFilter();\n    } else if (e.key === 'Escape') {\n      this.pushKbdEvent('Escape');\n      this.modal.close();\n    }\n  }\n\n  tzSelected() {\n    const timeZone = this.tzSelector.nativeElement.value;\n    this.LOG.debug(['timezone', 'tzselect'], timeZone);\n    this._options.timeZone = timeZone;\n    this.tzSelector.nativeElement.setAttribute('class', timeZone === 'UTC' ? 'defaulttz' : 'customtz');\n    this.drawChart();\n  }\n\n  public getTimeClip(): Promise<ChartBounds> {\n    this.LOG.debug(['getTimeClip'], this.chart.getTimeClip());\n    return this.chart.getTimeClip();\n  }\n\n  resizeChart(event) {\n    this.LOG.debug(['resizeChart'], event);\n    this.sizeService.change(new Size(this.width, event));\n  }\n\n  drawChart(firstDraw: boolean = false) {\n    this.LOG.debug(['drawCharts'], this._data, this._options);\n    if (!this._data || !this._data.data || this._data.data.length === 0) {\n      return;\n    }\n    if (this.timeClip) {\n      this.timeClip.close();\n    }\n    if (this.modal) {\n      this.modal.close();\n    }\n    this.LOG.debug(['PPts'], 'firstdraw ', firstDraw);\n    if (firstDraw) { // on the first draw, we can set some default options.\n      // automatically switch to timestamp mode\n      // when the first tick and last tick of all the series are in the interval [-100ms 100ms]\n      const tsLimit = 100 * GTSLib.getDivider(this._options.timeUnit);\n      const dataList = this._data.data;\n      if (dataList) {\n        let gtsList = GTSLib.flattenGtsIdArray(dataList as any, 0).res;\n        gtsList = GTSLib.flatDeep(gtsList);\n        let timestampMode = true;\n        let totalDatapoints = 0;\n        gtsList.forEach(g => {\n          this.gtsIdList.push(g.id); // usefull for gts browse shortcut\n          if (g.v.length > 0) { // if gts not empty\n            timestampMode = timestampMode && (g.v[0][0] > -tsLimit && g.v[0][0] < tsLimit);\n            timestampMode = timestampMode && (g.v[g.v.length - 1][0] > -tsLimit && g.v[g.v.length - 1][0] < tsLimit);\n            totalDatapoints += g.v.length;\n          }\n        });\n        if (timestampMode) {\n          this._options.timeMode = 'timestamp';\n        }\n        this.LOG.debug(['drawCharts', 'parsed', 'timestampMode'], timestampMode);\n      }\n    }\n    this.gtsList = this._data;\n    this._options = {...this._options};\n\n    this.LOG.debug(['drawCharts', 'parsed'], this._data, this._options);\n    this.resizeArea();\n  }\n\n  focus(event: any) {\n    // read the first 4 letters of id of all elements in the click tree\n    const idListClicked = event.path.map(el => (el.id || '').slice(0, 4));\n    // if not alone on the page, and click is not on the timezone selector and not on the map, force focus.\n    if (!this.isAlone && idListClicked.indexOf('tzSe') < 0 && idListClicked.indexOf('map-') < 0) {\n      this.mainPlotDiv.nativeElement.focus();\n    } // prevent stealing focus of the timezone selector.\n  }\n\n  private async handleKeyPress(ev: KeyboardEvent) {\n    this.LOG.debug(['handleKeyPress'], ev);\n    if (this.preventDefaultKeyList.indexOf(ev.key) >= 0) {\n      ev.preventDefault();\n    }\n    if (await this.timeClip.isOpened() || await this.modal.isOpened() || await this.gtsPopupModal.isOpened()) {\n      if (this.preventDefaultKeyListInModals.indexOf(ev.key) >= 0) {\n        ev.preventDefault();\n      }\n    }\n    if (ev.key === '/') {\n      this.modal.open();\n      this.filterInput.nativeElement.focus();\n      this.filterInput.nativeElement.select();\n    } else if (ev.key === 't') {\n      this.chart.getTimeClip().then(tc => {\n        this.timeClipValue = `<p>keep data between\n          ${this._options.timeMode === 'timestamp' ? tc.tsmin : moment.tz(tc.tsmin, this._options.timeZone).toLocaleString()} and\n          ${this._options.timeMode === 'timestamp' ? tc.tsmax : moment.tz(tc.tsmax, this._options.timeZone).toLocaleString()}\n          ${this._options.timeUnit !== 'us' ? ' (for a ' + this._options.timeUnit + ' platform)' : ''}</p>\n          <pre><code>${Math.round(tc.tsmax)} ${Math.round(tc.tsmax - tc.tsmin)} TIMECLIP</code></pre>`;\n        this.timeClip.open();\n      });\n    } else if (ev.key === 'b' || ev.key === 'B') { // browse among all gts\n      if (this.gtsBrowserIndex < 0) {\n        this.gtsBrowserIndex = 0;\n      }\n      if (ev.key === 'b') { // increment index\n        this.gtsBrowserIndex++;\n        if (this.gtsBrowserIndex === this.gtsIdList.length) {\n          this.gtsBrowserIndex = 0;\n        }\n      } else { // decrement index\n        this.gtsBrowserIndex--;\n        if (this.gtsBrowserIndex < 0) {\n          this.gtsBrowserIndex = this.gtsIdList.length - 1;\n        }\n      }\n      this._toHide = this.gtsIdList.filter(v => v !== this.gtsIdList[this.gtsBrowserIndex]); // hide all but one\n    } else if (ev.key === 'n') {\n      this._toHide = [...this.gtsIdList];\n      return false;\n    } else if (ev.key === 'a') {\n      this._toHide = [];\n    } else if (ev.key === 'Escape') {\n      this.timeClip.isOpened().then(r => {\n        if (r) {\n          this.timeClip.close();\n        }\n      });\n      this.modal.isOpened().then(r => {\n        if (r) {\n          this.modal.close();\n        }\n      });\n      this.gtsPopupModal.isOpened().then(r => {\n        if (r) {\n          this.gtsPopupModal.close();\n        }\n      });\n    } else {\n      this.pushKbdEvent(ev.key);\n    }\n    this.LOG.debug(['handleKeyPress', 'this.gtsIdList'], this._toHide, this.gtsBrowserIndex);\n  }\n\n  applyFilter() {\n    this.gtsFilterCount++;\n    this._gtsFilter = this.gtsFilterCount.toString().slice(0, 1) + this.filterInput.nativeElement.value;\n    this.modal.close();\n  }\n\n  private pushKbdEvent(key: string) {\n    this.kbdCounter++;\n    this.kbdLastKeyPressed = [key, this.kbdCounter.toString()];\n  }\n\n  getTZ() {\n    return moment.tz.names();\n  }\n\n  protected convert(data: DataModel): any[] {\n    return [];\n  }\n\n  onChartDraw($event: any) {\n    if (\n      this.chartBounds\n      && $event\n      && this.chartBounds.tsmin !== Math.min(this.chartBounds.tsmin, $event.tsmin)\n      && this.chartBounds.tsmax !== Math.max(this.chartBounds.tsmax, $event.tsmax)\n    ) {\n      this.chartBounds.tsmin = Math.min(this.chartBounds.tsmin, $event.tsmin);\n      this.chartBounds.tsmax = Math.max(this.chartBounds.tsmax, $event.tsmax);\n      this.annotation.setRealBounds(this.chartBounds);\n      this.chart.setRealBounds(this.chartBounds);\n      this.chartDraw.emit();\n      this.LOG.debug(['onChartDraw', 'this.chartBounds'], this.chartBounds, $event);\n    }\n    this.chartDraw.emit($event);\n  }\n\n  private resizeArea() {\n    setTimeout(() => {\n      let h = this.el.nativeElement.getBoundingClientRect().height;\n      if (h > 0) {\n        if (!!this.GTSTree) {\n          h -= this.GTSTree.nativeElement.getBoundingClientRect().height;\n        }\n        if (!!this.controls) {\n          h -= this.controls.nativeElement.getBoundingClientRect().height;\n        }\n        this.initialChartHeight = h;\n      }\n    });\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {AfterViewInit, Component, ElementRef, EventEmitter, Input, Output, Renderer2, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {Logger} from '../../utils/logger';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-resize',\n  templateUrl: './warp-view-resize.component.html',\n  styleUrls: ['./warp-view-resize.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewResizeComponent implements AfterViewInit {\n  @ViewChild('handleDiv', {static: true}) handleDiv: ElementRef;\n  @ViewChild('wrapper', {static: true}) wrapper: ElementRef;\n  @Input('minHeight') minHeight = '10';\n  @Input('initialHeight') initialHeight = 100;\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Output('resize') resize = new EventEmitter();\n\n  private dragging = false;\n  private moveListener: EventListener;\n  private clickUpListener: EventListener;\n  private LOG: Logger;\n  private _debug = false;\n\n  constructor(private el: ElementRef, private renderer: Renderer2) {\n    this.LOG = new Logger(WarpViewResizeComponent, this._debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.LOG.debug(['ngAfterViewInit'], this.initialHeight);\n    this.renderer.setStyle(this.wrapper.nativeElement, 'height', this.initialHeight + 'px');\n    // the click event on the handlebar attach mousemove and mouseup events to document.\n    this.handleDiv.nativeElement.addEventListener('mousedown', (ev: MouseEvent) => {\n      if (0 === ev.button) {\n        // keep left click only\n        this.moveListener = this.handleDraggingMove.bind(this);\n        this.clickUpListener = this.handleDraggingEnd.bind(this);\n        document.addEventListener('mousemove', this.moveListener, false);\n        document.addEventListener('mouseup', this.clickUpListener, false);\n      }\n    });\n  }\n\n  private handleDraggingEnd() {\n    this.dragging = false;\n    // the mouseup detach mousemove and mouseup events from document.\n    if (this.moveListener) {\n      document.removeEventListener('mousemove', this.moveListener, false);\n      this.moveListener = null;\n    }\n    if (this.clickUpListener) {\n      document.removeEventListener('mouseup', this.clickUpListener, false);\n      this.clickUpListener = null;\n    }\n  }\n\n  private handleDraggingMove(ev: MouseEvent) {\n    ev.preventDefault();\n    this.LOG.debug(['handleDraggingMove'], ev);\n    // compute Y of the parent div top relative to page\n    const yTopParent = this.handleDiv.nativeElement.parentElement.getBoundingClientRect().top\n      - document.body.getBoundingClientRect().top;\n    // compute new parent height\n    let h = ev.pageY - yTopParent + this.handleDiv.nativeElement.getBoundingClientRect().height / 2;\n    if (h < parseInt(this.minHeight, 10)) {\n      h = parseInt(this.minHeight, 10);\n    }\n    // apply new height\n    this.renderer.setStyle(this.handleDiv.nativeElement.parentElement, 'height', h + 'px');\n    this.LOG.debug(['handleDraggingMove'], h);\n    this.resize.emit(h);\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nimport {AfterViewInit, Component, ElementRef, EventEmitter, Input, Output, ViewChild, ViewEncapsulation} from '@angular/core';\nimport moment from 'moment';\nimport {Logger} from '../../utils/logger';\nimport * as noUiSlider from 'nouislider';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-slider',\n  templateUrl: './warp-view-slider.component.html',\n  styleUrls: ['./warp-view-slider.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewSliderComponent implements AfterViewInit {\n  @ViewChild('slider', { static: false }) slider: ElementRef<HTMLDivElement>;\n\n  @Input('min') set min(m) {\n    this.LOG.debug(['min'], m);\n    this._min = m;\n    this.setOptions();\n  }\n\n  get min() {\n    return this._min;\n  }\n\n  @Input('max') set max(m) {\n    this.LOG.debug(['max'], m);\n    this._max = m;\n    this.setOptions();\n  }\n\n  get max() {\n    return this._max;\n  }\n\n\n  @Input('value') value: number;\n\n  @Input('step') set step(step: number) {\n    this.LOG.debug(['step'], step);\n    if (this._step !== step) {\n      this._step = step;\n      this.setOptions();\n    }\n  }\n\n  get step() {\n    return this._step;\n  }\n\n  @Input('mode') mode = 'timestamp';\n\n  @Input('debug') set debug(debug: boolean) {\n    this._debug = debug;\n    this.LOG.setDebug(debug);\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  @Output('change') change = new EventEmitter();\n\n  _min: number;\n  _max: number;\n  show = false;\n  protected _uiSlider;\n  protected _step = 0;\n  protected LOG: Logger;\n  loaded = false;\n  protected manualRefresh: EventEmitter<void> = new EventEmitter<void>();\n  protected _debug = false;\n\n  constructor() {\n    this.LOG = new Logger(WarpViewSliderComponent, this.debug);\n    this.LOG.debug(['constructor'], this.debug);\n  }\n\n  ngAfterViewInit(): void {\n    this.loaded = false;\n    this.setOptions();\n  }\n\n  protected setOptions() {\n    if (!this._min && !this._max) {\n      return;\n    }\n    this.LOG.debug(['_step'], this._step);\n    const tmpVAl = Math.min(Math.max(this.value || Number.MIN_VALUE, this._min), this._max);\n    if (tmpVAl !== this.value && this.loaded) {\n      this.change.emit(tmpVAl);\n    }\n    this.value = tmpVAl;\n    this.loaded = true;\n    this.LOG.debug(['noUiSlider'], this.slider);\n    if (this.slider) {\n      if (!this._uiSlider) {\n        const opts = {\n          start: [this.value + 1],\n          tooltips: [this.getFormat()],\n          range: {min: [this._min], max: [this._max]}\n        } as any;\n        if (!!this._step && this._step > 0) {\n          opts.step = Math.floor((this._max - this._min) / this._step);\n        }\n        this._uiSlider = noUiSlider.create(this.slider.nativeElement, opts);\n        this._uiSlider.on('end', event => {\n          this.LOG.debug(['onChange'], event);\n          this.value = parseInt(event[0], 10);\n          this.change.emit({value: parseInt(event[0], 10)});\n        });\n      } else {\n        this.updateSliderOptions();\n      }\n    }\n  }\n\n  protected updateSliderOptions() {\n    // tslint:disable-next-line:no-string-literal\n    this.slider.nativeElement['noUiSlider'].set([this.value]);\n    const opts = {range: {min: [this._min], max: [this._max]}} as any;\n    if (!!this._step && this._step > 0) {\n      opts.step = Math.floor((this._max - this._min) / this._step);\n    }\n    // tslint:disable-next-line:no-string-literal\n    this.slider.nativeElement['noUiSlider'].updateOptions(opts);\n  }\n\n  format(value: number) {\n    if (this.mode !== 'timestamp') {\n      return moment(value).utc(true).format('YYYY/MM/DD hh:mm:ss');\n    } else {\n      return value.toString();\n    }\n  }\n\n  protected getFormat() {\n    return {\n      to: value => this.format(value),\n      from: value => value.replace(',-', '')\n    };\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\nimport {AfterViewInit, Component, ElementRef, Input, OnInit, ViewChild, ViewEncapsulation} from '@angular/core';\nimport {WarpViewSliderComponent} from '../warp-view-slider/warp-view-slider.component';\nimport {Logger} from '../../utils/logger';\nimport * as noUiSlider from 'nouislider';\n\n/**\n *\n */\n@Component({\n  selector: 'warpview-range-slider',\n  templateUrl: './warp-view-range-slider.component.html',\n  styleUrls: ['./warp-view-range-slider.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewRangeSliderComponent extends WarpViewSliderComponent implements OnInit, AfterViewInit {\n  @ViewChild('slider', { static: false }) slider: ElementRef<HTMLDivElement>;\n  @Input('minValue') minValue: number;\n  @Input('maxValue') maxValue: number;\n\n  constructor() {\n    super();\n    this.LOG = new Logger(WarpViewRangeSliderComponent, this.debug);\n    this.LOG.debug(['constructor'], this.debug);\n  }\n\n  ngOnInit(): void {\n    this.setOptions();\n    this.minValue = this.minValue || this._min;\n    this.maxValue = this.maxValue || this._max;\n  }\n\n  ngAfterViewInit(): void {\n    this.loaded = false;\n    this.setOptions();\n  }\n\n  onChange(val) {\n    this.change.emit({value: this.minValue, highValue: this.maxValue});\n    this.LOG.debug(['onChange'], val, {value: this.minValue, highValue: this.maxValue});\n  }\n\n  protected setOptions() {\n    this.LOG.debug(['setOptions'], this._min, this._max);\n    if (!this._min && !this._max) {\n      return;\n    }\n    this.loaded = true;\n    this.value = Math.max(this.value || Number.MIN_VALUE, this._min);\n    this.LOG.debug(['noUiSlider'], this.slider);\n    if (this.slider) {\n      if (!this._uiSlider) {\n        const opts = {\n          start: [this.minValue, this.maxValue],\n          connect: true,\n          tooltips: [this.getFormat(), this.getFormat()],\n          range: {min: [this._min], max: [this._max]}\n        } as any;\n        if (!!this._step && this._step > 0) {\n          opts.step = Math.floor((this._max - this._min) / this._step);\n        }\n        const uiSlider = noUiSlider.create(this.slider.nativeElement, opts);\n        uiSlider.on('end', event => {\n          this.LOG.debug(['onChange'], event);\n          this.change.emit({\n            min: parseInt(event[0], 10),\n            max: parseInt(event[1], 10)\n          });\n        });\n      } else {\n        this.updateSliderOptions();\n      }\n    }\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {Component, ElementRef, Input, NgZone, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {VisibilityState, WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {Param} from '../../model/param';\nimport {ColorLib} from '../../utils/color-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport moment from 'moment-timezone';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\n\n@Component({\n  selector: 'warpview-spectrum',\n  templateUrl: './warp-view-spectrum.component.html',\n  styleUrls: ['./warp-view-spectrum.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewSpectrumComponent extends WarpViewComponent {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    yaxis: {},\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 50\n    }\n  };\n  private _type = 'histogram2d';\n  private visibility: boolean[] = [];\n  private visibilityStatus: VisibilityState = 'unknown';\n  private maxTick = 0;\n  private minTick = 0;\n  private visibleGtsId = [];\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewSpectrumComponent, this._debug);\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const type = this._options.histo || {histnorm: 'density', histfunc: 'count'};\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], this._options);\n    this.visibility = [];\n    let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray([ data.data] as any[], 0).res) || [];\n    this.maxTick = Number.NEGATIVE_INFINITY;\n    this.minTick = Number.POSITIVE_INFINITY;\n    this.visibleGtsId = [];\n    const nonPlottable = gtsList.filter(g => {\n      this.LOG.debug(['convert'], GTSLib.isGtsToPlot(g));\n      return (g.v && !GTSLib.isGtsToPlot(g));\n    });\n    gtsList = gtsList.filter(g => {\n      return (g.v && GTSLib.isGtsToPlot(g));\n    });\n    // initialize visibility status\n    if (this.visibilityStatus === 'unknown') {\n      this.visibilityStatus = gtsList.length > 0 ? 'plottableShown' : 'nothingPlottable';\n    }\n\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.layout.xaxis.type = 'linear';\n    } else {\n      this.layout.xaxis.type = 'date';\n    }\n    gtsList.forEach((gts: GTS, i) => {\n      if (gts.v && GTSLib.isGtsToPlot(gts)) {\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(i, this._options.scheme);\n        const color = ((data.params || [])[gts.id] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: this._type,\n          histnorm: type.histnorm || 'density',\n          histfunc: type.histfunc || 'count',\n          contours: {\n            showlabels: true,\n            labelfont: {\n              color: 'white'\n            }\n          },\n          colorbar: {\n            tickcolor: this.getGridColor(this.el.nativeElement),\n            thickness: 0,\n            tickfont: {\n              color: this.getLabelColor(this.el.nativeElement)\n            },\n            x: 1 + gts.id / 20,\n            xpad: 0\n          },\n          showscale: this.showLegend,\n          colorscale: ColorLib.getColorGradient(gts.id, this._options.scheme),\n          autocolorscale: false,\n          name: label,\n          text: label,\n          x: [],\n          y: [],\n          line: {color},\n          hoverinfo: 'none',\n          connectgaps: false,\n          visible: this._hiddenData.filter(h => h === gts.id).length >= 0,\n        };\n        gts.v.forEach(value => {\n          const ts = value[0];\n          series.y.push(value[value.length - 1]);\n          if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n            series.x.push(ts);\n          } else {\n            series.x.push(moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toISOString());\n          }\n        });\n        dataset.push(series);\n      }\n    });\n    this.LOG.debug(['convert', 'dataset'], dataset);\n\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this.responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","import {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {DataModel} from '../../model/dataModel';\nimport {Param} from '../../model/param';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {ColorLib} from '../../utils/color-lib';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport moment from 'moment-timezone';\n\n@Component({\n  selector: 'warpview-box',\n  templateUrl: './warp-view-box.component.html',\n  styleUrls: ['./warp-view-box.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewBoxComponent extends WarpViewComponent implements OnInit {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {\n      type: '-'\n    },\n    yaxis: {zeroline: false},\n    boxmode: 'group',\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n  private _type = 'box';\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewBoxComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], this._options, this._type);\n    let gtsList = GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res);\n    gtsList = gtsList.filter(g => {\n      return (g.v && GTSLib.isGtsToPlot(g));\n    });\n    const pattern = 'YYYY/MM/DD hh:mm:ss';\n    const format = pattern.slice(0, pattern.lastIndexOf(this._options.split || 'D') + 1);\n    gtsList.forEach((gts: GTS, i) => {\n      if (gts.v) {\n        const label = GTSLib.serializeGtsMetadata(gts);\n        const c = ColorLib.getColor(gts.id, this._options.scheme);\n        const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n        const series: Partial<any> = {\n          type: 'box',\n          boxmean: 'sd',\n          marker: {color},\n          name: label,\n          x: this._type === 'box' ? undefined : [],\n          y: [],\n          //  hoverinfo: 'none',\n          boxpoints: false\n        };\n        if (!!this._options.showDots) {\n          series.boxpoints = 'all';\n        }\n        gts.v.forEach(value => {\n          series.y.push(value[value.length - 1]);\n          if (this._type === 'box-date') {\n            series.x.push(moment.tz(moment.utc(value[0] / this.divider), this._options.timeZone).toISOString());\n          }\n        });\n        dataset.push(series);\n      }\n    });\n    this.LOG.debug(['convert', 'dataset'], dataset, format);\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this.responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.xaxis.showticklabels = this._type === 'box-date';\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n\n  hover(data: any) {\n\n  }\n}\n","import {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\n\n@Component({\n  selector: 'warpview-3d-line',\n  templateUrl: './warp-view-3d-line.component.html',\n  styleUrls: ['./warp-view-3d-line.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpView3dLineComponent extends WarpViewComponent implements OnInit {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    xaxis: {},\n    yaxis: {},\n    zaxis: {},\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    }\n  };\n  private _type = 'line3d';\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpView3dLineComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    this.LOG.debug(['convert'], data, this._options, this._type);\n    GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res)\n      .filter(g => (g.v && GTSLib.isGts(g)))\n      .forEach((gts: GTS, i) => {\n        if (gts.v) {\n          const label = GTSLib.serializeGtsMetadata(gts);\n          const c = ColorLib.getColor(gts.id, this._options.scheme);\n          const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            mode: 'line',\n            type: 'scatter3d',\n            marker: {\n              color: ColorLib.transparentize(color),\n              size: 3,\n              symbol: 'circle',\n              line: {\n                color,\n                width: 0\n              }\n            },\n            line: {\n              color,\n              width: 1\n            },\n            name: label,\n            x: [],\n            y: [],\n            z: [],\n            //     hoverinfo: 'none',\n          };\n          gts.v.forEach(value => {\n            if (value.length > 2) { // lat lon\n              series.x.push(value[1]);\n              series.y.push(value[2]);\n              if (value.length > 4) {\n                series.z.push(value[3]);\n              } else {\n                series.z.push(0);\n              }\n            } else {\n              series.x.push(value[0]);\n              series.y.push(value[1]);\n              series.z.push(0);\n            }\n          });\n          dataset.push(series);\n        }\n      });\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this.responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this.showLegend;\n    this.layout.yaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.xaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.zaxis.color = this.getGridColor(this.el.nativeElement);\n    this.loading = false;\n  }\n}\n","import {Component, ElementRef, Input, NgZone, OnInit, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {GTSLib} from '../../utils/gts.lib';\nimport {GTS} from '../../model/GTS';\nimport {ColorLib} from '../../utils/color-lib';\nimport {MapLib} from '../../utils/map-lib';\n\n@Component({\n  selector: 'warpview-globe',\n  templateUrl: './warp-view-globe.component.html',\n  styleUrls: ['./warp-view-globe.component.scss'],\n  encapsulation: ViewEncapsulation.ShadowDom\n})\nexport class WarpViewGlobeComponent extends WarpViewComponent implements OnInit {\n\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n  layout: Partial<any> = {\n    showlegend: false,\n    margin: {\n      t: 10,\n      b: 25,\n      r: 10,\n      l: 10\n    },\n    geo: {\n      projection: {\n        type: 'orthographic',\n      },\n      showframe: true,\n      fitbounds: 'locations',\n      showocean: true,\n      oceancolor: ColorLib.transparentize('#004eff', 0.2),\n      showland: true,\n      landcolor: ColorLib.transparentize('#6F694E', 0.2),\n      showlakes: true,\n      lakecolor: ColorLib.transparentize('#004eff', 0.2),\n      showcountries: true,\n      lonaxis: {\n        showgrid: true,\n        gridcolor: 'rgb(102, 102, 102)'\n      },\n      lataxis: {\n        showgrid: true,\n        gridcolor: 'rgb(102, 102, 102)'\n      }\n    }\n  };\n  private _type = 'scattergeo';\n  private geoData: { path: { lat: number, lon: number }[] }[] = [];\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewGlobeComponent, this._debug);\n  }\n\n  ngOnInit() {\n    this.drawChart();\n  }\n\n  update(options: Param): void {\n    this.drawChart();\n  }\n\n  private drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.plotlyConfig.scrollZoom = true;\n    this.buildGraph();\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    const dataset: Partial<any>[] = [];\n    this.geoData = [];\n    this.LOG.debug(['convert'], data, this._options, this._type);\n    GTSLib.flatDeep(GTSLib.flattenGtsIdArray(data.data as any[], 0).res)\n      .filter(g => (g.v && GTSLib.isGts(g)))\n      .forEach((gts: GTS, i) => {\n        if (gts.v) {\n          const geoData = {path: []};\n          const label = GTSLib.serializeGtsMetadata(gts);\n          const c = ColorLib.getColor(gts.id, this._options.scheme);\n          const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n          const series: Partial<any> = {\n            mode: 'lines',\n            type: 'scattergeo',\n            marker: {\n              color: ColorLib.transparentize(color),\n              size: 3,\n              symbol: 'circle',\n              line: {\n                color,\n                width: 0\n              }\n            },\n            line: {\n              color,\n              width: 1\n            },\n            name: label,\n            lon: [],\n            lat: [],\n            hoverinfo: 'none',\n          };\n          gts.v.forEach(value => {\n            if (value.length > 2) {\n              series.lat.push(value[1]);\n              series.lon.push(value[2]);\n              geoData.path.push({lat: value[1], lon: value[2]});\n            }\n          });\n          this.geoData.push(geoData);\n          dataset.push(series);\n        }\n      });\n    return dataset;\n  }\n\n  private buildGraph() {\n    this.LOG.debug(['drawChart', 'this.layout'], this._responsive);\n    this.LOG.debug(['drawChart', 'this.layout'], this.layout);\n    this.LOG.debug(['drawChart', 'this.plotlyConfig'], this.plotlyConfig);\n    this.layout.showlegend = this._showLegend;\n    const bounds = MapLib.getBoundsArray(this.geoData, [], [], []);\n    this.LOG.debug(['drawChart', 'bounds'], bounds);\n    this.layout.geo.lonaxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout.geo.lataxis.range = [bounds[0][0], bounds[1][0]];\n    this.layout.geo.lonaxis.range = [bounds[0][1], bounds[1][1]];\n    this.layout.geo.lataxis.color = this.getGridColor(this.el.nativeElement);\n    this.layout = {...this.layout};\n    this.loading = false;\n  }\n\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport deepEqual from 'deep-equal';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {ColorLib} from '../../utils/color-lib';\nimport * as d3 from 'd3';\nimport eventDrops from 'event-drops';\nimport {GTSLib} from '../../utils/gts.lib';\nimport moment from 'moment-timezone';\nimport {select} from 'd3-selection';\n\n@Component({\n  selector: 'warpview-event-drop',\n  templateUrl: './warp-view-event-drop.component.html',\n  styleUrls: ['./warp-view-event-drop.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WarpViewEventDropComponent extends WarpViewComponent implements OnInit, OnDestroy {\n  @ViewChild('elemChart', {static: true}) elemChart: ElementRef;\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n    this.drawChart();\n  }\n\n\n  @Input('hiddenData') set hiddenData(hiddenData: number[]) {\n    const previousVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'previousVisibility'], previousVisibility);\n    this._hiddenData = hiddenData;\n    this.visibility = [];\n    this.visibleGtsId.forEach(id => this.visibility.push(hiddenData.indexOf(id) < 0 && (id !== -1)));\n    this.LOG.debug(['hiddenData', 'hiddendygraphfullv'], this.visibility);\n    const newVisibility = JSON.stringify(this.visibility);\n    this.LOG.debug(['hiddenData', 'json'], previousVisibility, newVisibility);\n    if (previousVisibility !== newVisibility) {\n      this.drawChart();\n      this.LOG.debug(['hiddendygraphtrig', 'destroy'], 'redraw by visibility change');\n    }\n  }\n\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n\n  private visibility: boolean[] = [];\n  private maxTick = Number.MIN_VALUE;\n  private minTick = Number.MAX_VALUE;\n  private visibleGtsId = [];\n  private _type = 'drops';\n  private eventConf = {\n    d3,\n    axis: {\n      verticalGrid: true,\n      tickPadding: 6,\n    },\n    indicator: false,\n    label: {\n      text: row => row.name,\n    },\n    drop: {\n      date: d => new Date(d.date),\n      color: d => d.color,\n      onMouseOver: g => {\n        this.LOG.debug(['onMouseOver'], g);\n        this.pointHover.emit({\n          x: d3.event.offsetX,\n          y: d3.event.offsetY\n        });\n        const t = d3\n          .select(this.toolTip.nativeElement);\n        t.transition()\n          .duration(200)\n          .style('opacity', 1)\n          .style('pointer-events', 'auto');\n        t.html(`<div class=\"tooltip-body\">\n<b class=\"tooltip-date\">${this._options.timeMode === 'timestamp'\n          ? g.date\n          : (moment(g.date.valueOf()).utc().toISOString() || '')}</b>\n<div><i class=\"chip\"  style=\"background-color: ${ColorLib.transparentize(g.color, 0.7)};border: 2px solid ${g.color};\"></i>\n${GTSLib.formatLabel(g.name)}: <span class=\"value\">${g.value}</span>\n</div></div>`\n        )\n          .style('left', `${d3.event.offsetX - 30}px`)\n          .style('top', `${d3.event.offsetY + 20}px`);\n      },\n      onMouseOut: () => {\n        select(this.toolTip.nativeElement)\n          .transition()\n          .duration(500)\n          .style('opacity', 0)\n          .style('pointer-events', 'none');\n      },\n    },\n  };\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewEventDropComponent, this._debug);\n  }\n\n\n  ngOnInit(): void {\n    this._options = this._options || this.defOptions;\n  }\n\n  ngOnDestroy(): void {\n    if (!!this.elemChart) {\n      select(this.elemChart.nativeElement).remove();\n    }\n  }\n\n  update(options, refresh): void {\n    this.LOG.debug(['onOptions', 'before'], this._options, options);\n    if (!deepEqual(options, this._options)) {\n      this.LOG.debug(['options', 'changed'], options);\n      this._options = ChartLib.mergeDeep(this._options, options as Param) as Param;\n    }\n    this.drawChart();\n  }\n\n  updateBounds(min, max) {\n    this.LOG.debug(['updateBounds'], min, max, this._options);\n    this._options.bounds.minDate = min;\n    this._options.bounds.maxDate = max;\n\n    if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n      this.eventConf['range'] = {start: min, end: max};\n    } else {\n      this.eventConf['range'] = {\n        start: moment.tz(moment.utc(this.minTick / this.divider), this._options.timeZone).toDate(),\n        end: moment.tz(moment.utc(this.maxTick / this.divider), this._options.timeZone).toDate(),\n      };\n    }\n    this.eventConf = {...this.eventConf};\n    this.LOG.debug(['updateBounds'], this.eventConf);\n  }\n\n  drawChart() {\n    if (!this.initChart(this.el)) {\n      return;\n    }\n    this.loading = false;\n    this.LOG.debug(['drawChart', 'plotlyData'], this.plotlyData, this._type);\n    if (this.elemChart.nativeElement) {\n      setTimeout(() => select(this.elemChart.nativeElement).data([this.plotlyData]).call(eventDrops(this.eventConf)));\n      this.loading = false;\n      this.chartDraw.emit();\n    }\n  }\n\n  protected convert(data: DataModel): any[] {\n    this.LOG.debug(['convert'], data);\n    const gtsList = GTSLib.flatDeep(data.data as any[]);\n    const dataList = [];\n    this.LOG.debug(['convert', 'gtsList'], gtsList);\n    if (!gtsList || gtsList.length === 0 || gtsList[0].length < 2) {\n      return;\n    }\n    gtsList.forEach((gts, i) => {\n      const c = ColorLib.getColor(gts.id || i, this._options.scheme);\n      const color = ((data.params || [])[i] || {datasetColor: c}).datasetColor || c;\n      const dataSet = {\n        name: GTSLib.serializeGtsMetadata(gts),\n        color,\n        data: []\n      };\n      (gts.v || []).forEach(value => {\n        const ts = value[0];\n        this.minTick = Math.min(this.minTick, ts);\n        this.maxTick = Math.max(this.maxTick, ts);\n        if (this._options.timeMode && this._options.timeMode === 'timestamp') {\n          dataSet.data.push({date: ts, color, value: value[value.length - 1]});\n        } else {\n          dataSet.data.push({\n            date: moment.tz(moment.utc(ts / this.divider), this._options.timeZone).toDate(),\n            color,\n            value: value[value.length - 1],\n            name: dataSet.name\n          });\n        }\n      });\n      dataList.push(dataSet);\n    });\n    this.LOG.debug(['convert', 'dataList'], dataList);\n    this.eventConf['range'] = {\n      start: moment.tz(moment.utc(this.minTick / this.divider), this._options.timeZone).toDate(),\n      end: moment.tz(moment.utc(this.maxTick / this.divider), this._options.timeZone).toDate(),\n    };\n    return dataList;\n  }\n}\n","import {Component, ElementRef, EventEmitter, Input, NgZone, Output, Renderer2, ViewEncapsulation} from '@angular/core';\nimport {WarpViewComponent} from '../warp-view-component';\nimport {Size, SizeService} from '../../services/resize.service';\nimport {Logger} from '../../utils/logger';\nimport {Param} from '../../model/param';\nimport {DataModel} from '../../model/dataModel';\nimport {ChartLib} from '../../utils/chart-lib';\nimport {ResizedEvent} from 'angular-resize-event';\n\n@Component({\n  selector: 'warpview-result-tile',\n  templateUrl: './warp-view-result-tile.component.html',\n  styleUrls: ['./warp-view-result-tile.component.scss']\n})\nexport class WarpViewResultTileComponent extends WarpViewComponent {\n\n  @Input('type') set type(type: string) {\n    this._type = type;\n  }\n\n  get type(): string {\n    if (this.dataModel && this.dataModel.globalParams) {\n      return this.dataModel.globalParams.type || this._type || 'plot';\n    } else {\n      return this._type || 'plot';\n    }\n  }\n\n  @Input('standalone') standalone = true;\n  @Output('pointHover') pointHover = new EventEmitter<any>();\n  @Output('warpViewChartResize') warpViewChartResize = new EventEmitter<any>();\n  @Output('chartDraw') chartDraw = new EventEmitter<any>();\n  @Output('boundsDidChange') boundsDidChange = new EventEmitter<any>();\n\n  loading = true;\n  dataModel: DataModel;\n  graphs = {\n    spectrum: ['histogram2dcontour', 'histogram2d'],\n    chart: ['line', 'spline', 'step', 'step-after', 'step-before', 'area', 'scatter'],\n    pie: ['pie', 'donut'],\n    polar: ['polar'],\n    radar: ['radar'],\n    bar: ['bar'],\n    bubble: ['bubble'],\n    annotation: ['annotation'],\n    'gts-tree': ['gts-tree'],\n    datagrid: ['datagrid'],\n    display: ['display'],\n    drilldown: ['drilldown'],\n    image: ['image'],\n    map: ['map'],\n    gauge: ['gauge', 'bullet'],\n    plot: ['plot'],\n    box: ['box', 'box-date'],\n    line3d: ['line3d'],\n    globe: ['globe'],\n    drops: ['drops']\n  };\n\n  private _type;\n\n  constructor(\n    public el: ElementRef,\n    public renderer: Renderer2,\n    public sizeService: SizeService,\n    public ngZone: NgZone\n  ) {\n    super(el, renderer, sizeService, ngZone);\n    this.LOG = new Logger(WarpViewResultTileComponent, this._debug);\n  }\n\n  protected update(options: Param, refresh: boolean): void {\n    setTimeout(() => this.loading = true);\n    this.LOG.debug(['parseGTS', 'data'], this._data);\n    this.dataModel = this._data;\n    if (!!this.dataModel) {\n      this._options = ChartLib.mergeDeep(this._options, options) as Param;\n      this._options = ChartLib.mergeDeep(ChartLib.mergeDeep(this.defOptions, options),\n        this._data ? this._data.globalParams || {} : {}) as Param;\n      this.LOG.debug(['parseGTS', 'data'], this._data);\n      this.dataModel = this._data;\n      if (this._options) {\n        this._unit = this._options.unit || this._unit;\n        this._type = this._options.type || this._type || 'plot';\n      }\n      this.LOG.debug(['parseGTS', '_type'], this._type);\n      setTimeout(() => this.loading = false);\n    }\n  }\n\n  protected convert(data: DataModel): Partial<any>[] {\n    setTimeout(() => this.loading = true);\n    this.LOG.debug(['convert', 'data'], this._data, data);\n    this.dataModel = data;\n    if (this.dataModel.globalParams) {\n      this._unit = this.dataModel.globalParams.unit || this._unit;\n      this._type = this.dataModel.globalParams.type || this._type || 'plot';\n    }\n    this.LOG.debug(['convert', '_type'], this._type);\n    return [];\n  }\n\n  onResized(event: ResizedEvent) {\n    this.width = event.newWidth;\n    this.height = event.newHeight;\n    this.LOG.debug(['onResized'], event.newWidth, event.newHeight);\n    this.sizeService.change(new Size(this.width, this.height));\n  }\n\n  chartDrawn() {\n    this.LOG.debug(['chartDrawn']);\n    setTimeout(() => this.loading = false);\n    this.chartDraw.emit();\n  }\n}\n","/*\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */\n\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {WarpViewChartComponent} from './elements/warp-view-chart/warp-view-chart.component';\nimport {WarpViewTileComponent} from './elements/warp-view-tile/warp-view-tile.component';\nimport {WarpViewSpinnerComponent} from './elements/warp-view-spinner/warp-view-spinner.component';\nimport {HttpClientModule} from '@angular/common/http';\nimport {HttpErrorHandler} from './services/http-error-handler.service';\nimport {WarpViewToggleComponent} from './elements/warp-view-toggle/warp-view-toggle.component';\nimport {WarpViewBarComponent} from './elements/warp-view-bar/warp-view-bar.component';\nimport {WarpViewBubbleComponent} from './elements/warp-view-bubble/warp-view-bubble.component';\nimport {WarpViewDatagridComponent} from './elements/warp-view-datagrid/warp-view-datagrid.component';\nimport {WarpViewPaginableComponent} from './elements/warp-view-datagrid/warp-view-paginable/warp-view-paginable.component';\nimport {WarpViewDisplayComponent} from './elements/warp-view-display/warp-view-display.component';\nimport {WarpViewDrillDownComponent} from './elements/warp-view-drill-down/warp-view-drill-down.component';\nimport {CalendarHeatmapComponent} from './elements/warp-view-drill-down/calendar-heatmap/calendar-heatmap.component';\nimport {WarpViewGtsPopupComponent} from './elements/warp-view-gts-popup/warp-view-gts-popup.component';\nimport {WarpViewModalComponent} from './elements/warp-view-modal/warp-view-modal.component';\nimport {WarpViewGtsTreeComponent} from './elements/warp-view-gts-tree/warp-view-gts-tree.component';\nimport {WarpViewTreeViewComponent} from './elements/warp-view-gts-tree/warp-view-tree-view/warp-view-tree-view.component';\nimport {WarpViewChipComponent} from './elements/warp-view-gts-tree/warp-view-chip/warp-view-chip.component';\nimport {WarpViewImageComponent} from './elements/warp-view-image/warp-view-image.component';\nimport {WarpViewMapComponent} from './elements/warp-view-map/warp-view-map.component';\nimport {WarpViewHeatmapSlidersComponent} from './elements/warp-view-map/warp-view-heatmap-sliders/warp-view-heatmap-sliders.component';\nimport {WarpViewPieComponent} from './elements/warp-view-pie/warp-view-pie.component';\nimport {WarpViewGaugeComponent} from './elements/warp-view-gauge/warp-view-gauge.component';\nimport {WarpViewAnnotationComponent} from './elements/warp-view-annotation/warp-view-annotation.component';\nimport {WarpViewPolarComponent} from './elements/warp-view-polar/warp-view-polar.component';\nimport {WarpViewRadarComponent} from './elements/warp-view-radar/warp-view-radar.component';\nimport {WarpViewPlotComponent} from './elements/warp-view-plot/warp-view-plot.component';\nimport {WarpViewResizeComponent} from './elements/warp-view-resize/warp-view-resize.component';\nimport {WarpViewSliderComponent} from './elements/warp-view-slider/warp-view-slider.component';\nimport {WarpViewRangeSliderComponent} from './elements/warp-view-range-slider/warp-view-range-slider.component';\nimport {FormsModule} from '@angular/forms';\nimport {AngularResizedEventModule} from 'angular-resize-event';\nimport {SizeService} from './services/resize.service';\nimport {WarpViewSpectrumComponent} from './elements/warp-view-spectrum/warp-view-spectrum.component';\nimport {PlotlyComponent} from './plotly/plotly.component';\nimport {WarpViewBoxComponent} from './elements/warp-view-box/warp-view-box.component';\nimport {WarpView3dLineComponent} from './elements/warp-view-3d-line/warp-view-3d-line.component';\nimport {WarpViewGlobeComponent} from './elements/warp-view-globe/warp-view-globe.component';\nimport {WarpViewEventDropComponent} from './elements/warp-view-event-drop/warp-view-event-drop.component';\nimport {WarpViewResultTileComponent} from './elements/warp-view-result-tile/warp-view-result-tile.component';\n\n@NgModule({\n  declarations: [\n    WarpViewTileComponent,\n    WarpViewChartComponent,\n    WarpViewSpinnerComponent,\n    WarpViewToggleComponent,\n    WarpViewBarComponent,\n    WarpViewBubbleComponent,\n    WarpViewDatagridComponent,\n    WarpViewPaginableComponent,\n    WarpViewDisplayComponent,\n    WarpViewDrillDownComponent,\n    CalendarHeatmapComponent,\n    WarpViewGtsPopupComponent,\n    WarpViewModalComponent,\n    WarpViewGtsTreeComponent,\n    WarpViewTreeViewComponent,\n    WarpViewChipComponent,\n    WarpViewImageComponent,\n    WarpViewMapComponent,\n    WarpViewHeatmapSlidersComponent,\n    WarpViewPieComponent,\n    WarpViewGaugeComponent,\n    WarpViewAnnotationComponent,\n    WarpViewPolarComponent,\n    WarpViewRadarComponent,\n    WarpViewPlotComponent,\n    WarpViewResizeComponent,\n    WarpViewSliderComponent,\n    WarpViewRangeSliderComponent,\n    WarpViewSpectrumComponent,\n    PlotlyComponent,\n    WarpViewBoxComponent,\n    WarpView3dLineComponent,\n    WarpViewGlobeComponent,\n    WarpViewEventDropComponent,\n    WarpViewResultTileComponent\n  ],\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    AngularResizedEventModule,\n    FormsModule\n  ],\n  exports: [\n    WarpViewTileComponent,\n    WarpViewChartComponent,\n    WarpViewSpinnerComponent,\n    WarpViewToggleComponent,\n    WarpViewBarComponent,\n    WarpViewBubbleComponent,\n    WarpViewDatagridComponent,\n    WarpViewPaginableComponent,\n    WarpViewDisplayComponent,\n    WarpViewDrillDownComponent,\n    CalendarHeatmapComponent,\n    WarpViewGtsPopupComponent,\n    WarpViewModalComponent,\n    WarpViewGtsTreeComponent,\n    WarpViewTreeViewComponent,\n    WarpViewChipComponent,\n    WarpViewImageComponent,\n    WarpViewMapComponent,\n    WarpViewHeatmapSlidersComponent,\n    WarpViewPieComponent,\n    WarpViewGaugeComponent,\n    WarpViewAnnotationComponent,\n    WarpViewPolarComponent,\n    WarpViewRadarComponent,\n    WarpViewPlotComponent,\n    WarpViewResizeComponent,\n    WarpViewSliderComponent,\n    WarpViewRangeSliderComponent,\n    WarpViewSpectrumComponent,\n    WarpViewBoxComponent,\n    WarpView3dLineComponent,\n    WarpViewGlobeComponent,\n    WarpViewEventDropComponent,\n    WarpViewResultTileComponent\n  ],\n  providers: [HttpErrorHandler, SizeService],\n  entryComponents: [\n    WarpViewTileComponent,\n    WarpViewChartComponent,\n    WarpViewSpinnerComponent,\n    WarpViewToggleComponent,\n    WarpViewBarComponent,\n    WarpViewBubbleComponent,\n    WarpViewDatagridComponent,\n    WarpViewPaginableComponent,\n    WarpViewDisplayComponent,\n    WarpViewDrillDownComponent,\n    CalendarHeatmapComponent,\n    WarpViewGtsPopupComponent,\n    WarpViewModalComponent,\n    WarpViewGtsTreeComponent,\n    WarpViewTreeViewComponent,\n    WarpViewChipComponent,\n    WarpViewImageComponent,\n    WarpViewMapComponent,\n    WarpViewHeatmapSlidersComponent,\n    WarpViewPieComponent,\n    WarpViewGaugeComponent,\n    WarpViewAnnotationComponent,\n    WarpViewPolarComponent,\n    WarpViewRadarComponent,\n    WarpViewPlotComponent,\n    WarpViewResizeComponent,\n    WarpViewSliderComponent,\n    WarpViewRangeSliderComponent,\n    WarpViewSpectrumComponent,\n    PlotlyComponent,\n    WarpViewBoxComponent,\n    WarpView3dLineComponent,\n    WarpViewGlobeComponent,\n    WarpViewEventDropComponent,\n    WarpViewResultTileComponent\n  ]\n})\nexport class WarpViewAngularModule {\n}\n"],"names":["Plotlyjs.restyle","Plotlyjs.react","Plotlyjs.purge","moment.tz","moment","noUiSlider.create","d3.event","d3\n                        .select"],"mappings":"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"}