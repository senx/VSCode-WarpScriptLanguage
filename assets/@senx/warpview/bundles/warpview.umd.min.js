!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("moment-timezone"),require("deep-equal"),require("plotly.js/dist/plotly"),require("plotly.js"),require("rxjs"),require("rxjs/operators"),require("rxjs/internal/observable/of"),require("@angular/common/http"),require("fitty"),require("moment"),require("d3"),require("d3-selection"),require("leaflet"),require("leaflet.heat"),require("leaflet.markercluster"),require("nouislider"),require("@angular/forms"),require("angular-resize-event"),require("event-drops")):"function"==typeof define&&define.amd?define("warpview",["exports","@angular/core","@angular/common","moment-timezone","deep-equal","plotly.js/dist/plotly","plotly.js","rxjs","rxjs/operators","rxjs/internal/observable/of","@angular/common/http","fitty","moment","d3","d3-selection","leaflet","leaflet.heat","leaflet.markercluster","nouislider","@angular/forms","angular-resize-event","event-drops"],t):t((e=e||self).warpview={},e.ng.core,e.ng.common,e.moment__default,e.deepEqual,e.plotly,e.plotly.js,e.rxjs,e.rxjs.operators,e.rxjs["internal/observable/of"],e.ng.common.http,e.fitty,e.moment,e.d3,e.d3Selection,e.Leaflet,null,null,e.nouislider,e.ng.forms,e.angularResizeEvent,e.eventDrops)}(this,(function(e,t,i,a,n,o,r,s,p,l,c,h,d,g,u,w,f,v,m,b,A,y){"use strict";var S="default"in a?a.default:a;n=n&&n.hasOwnProperty("default")?n.default:n,h=h&&h.hasOwnProperty("default")?h.default:h,d=d&&d.hasOwnProperty("default")?d.default:d,w=w&&w.hasOwnProperty("default")?w.default:w,y=y&&y.hasOwnProperty("default")?y.default:y;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function L(e,t){function i(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var O=function(){return(O=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function C(e,t,i,a){return new(i||(i=Promise))((function(n,o){function r(e){try{p(a.next(e))}catch(e){o(e)}}function s(e){try{p(a.throw(e))}catch(e){o(e)}}function p(e){e.done?n(e.value):new i((function(t){t(e.value)})).then(r,s)}p((a=a.apply(e,t||[])).next())}))}function I(e,t){var i,a,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(o);break}n[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function E(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var a,n,o=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)r.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}function D(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e}var k=function(){};var N=function(){function e(e,t){void 0===t&&(t=!1),this.isDebug=!1,this.className=e.name,this.isDebug=t}return e.prototype.setDebug=function(e){this.isDebug=e},e.prototype.log=function(e,t,i){var a=[];switch(a.push("["+(new Date).toISOString()+" - ["+this.className+"] "+t.join(" - ")),a=a.concat(i),e){case T.DEBUG:this.isDebug&&console.debug.apply(console,D(a));break;case T.ERROR:console.error.apply(console,D(a));break;case T.INFO:console.log.apply(console,D(a));break;case T.WARN:console.warn.apply(console,D(a));break;default:this.isDebug&&console.log.apply(console,D(a))}},e.prototype.debug=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(T.DEBUG,e,t)},e.prototype.error=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(T.ERROR,e,t)},e.prototype.warn=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(T.WARN,e,t)},e.prototype.info=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.log(T.INFO,e,t)},e}();var T={DEBUG:0,ERROR:1,WARN:2,INFO:3};T[T.DEBUG]="DEBUG",T[T.ERROR]="ERROR",T[T.WARN]="WARN",T[T.INFO]="INFO";var V=function(){function e(){}return e.cleanArray=function(e){return e.filter((function(e){return!!e}))},e.unique=function(e){for(var t={},i=[],a=0,n=e.length;a<n;++a)t.hasOwnProperty(e[a])||(i.push(e[a]),t[e[a]]=1);return i},e.isArray=function(e){return e&&"object"==typeof e&&e instanceof Array&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},e.formatElapsedTime=function(e){return e<1e3?e.toFixed(3)+" ns":e<1e6?(e/1e3).toFixed(3)+" Î¼s":e<1e9?(e/1e6).toFixed(3)+" ms":e<1e12?(e/1e9).toFixed(3)+" s ":(e/6e10).toFixed(3)+" m "},e.isValidResponse=function(t){var i;try{i=JSON.parse(t)}catch(e){return this.LOG.error(["isValidResponse"],"Response non JSON compliant",t),!1}return!!e.isArray(i)||(this.LOG.error(["isValidResponse"],"Response isn't an Array",i),!1)},e.isEmbeddedImage=function(e){return!("string"!=typeof e||!/^data:image/.test(e))},e.isEmbeddedImageObject=function(t){return!(null===t||null===t.image||null===t.caption||!e.isEmbeddedImage(t.image))},e.isPositionArray=function(t){return!(!t||!t.positions)&&(!(!e.isPositionsArrayWithValues(t)&&!e.isPositionsArrayWithTwoValues(t))||((t.positions||[]).forEach((function(e){if(e.length<2||e.length>3)return!1;for(var t in e)if("number"!=typeof e[t])return!1})),!0))},e.isPositionsArrayWithValues=function(e){return null!==e&&null!==e.positions&&((e.positions||[]).forEach((function(e){if(3!==e.length)return!1;for(var t in e)if("number"!=typeof e[t])return!1})),!0)},e.isPositionsArrayWithTwoValues=function(e){return null!==e&&null!==e.positions&&((e.positions||[]).forEach((function(e){if(4!==e.length)return!1;for(var t in e)if("number"!=typeof e[t])return!1})),!0)},e.gtsFromJSON=function(e,t){return{gts:{c:e.c,l:e.l,a:e.a,v:e.v,id:t}}},e.gtsFromJSONList=function(t,i){var a,n=[];return(t||[]).forEach((function(t,o){var r=t;t.gts&&(r=t.gts),a=void 0!==i&&""!==i?i+"-"+o:o,e.isArray(r)&&n.push(e.gtsFromJSONList(r,a)),e.isGts(r)&&n.push(e.gtsFromJSON(r,a)),e.isEmbeddedImage(r)&&n.push({image:r,caption:"Image",id:a}),e.isEmbeddedImageObject(r)&&n.push({image:r.image,caption:r.caption,id:a})})),{content:n||[]}},e.flatDeep=function(t){return e.isArray(t)||(t=[t]),t.reduce((function(t,i){return Array.isArray(i)?t.concat(e.flatDeep(i)):t.concat(i)}),[])},e.flattenGtsIdArray=function(t,i){var a=[];return e.isGts(t)&&(t=[t]),(t||[]).forEach((function(t){if(e.isArray(t)){var n=e.flattenGtsIdArray(t,i);a.push(n.res),i=n.r}else t&&t.v&&(t.id=i,a.push(t),i++)})),{res:a,r:i}},e.sanitizeNames=function(e){return(e||"").replace(/{/g,"&#123;").replace(/}/g,"&#125;").replace(/,/g,"&#44;").replace(/>/g,"&#62;").replace(/</g,"&#60;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")},e.serializeGtsMetadata=function(e){var t=this,i=[],a=[];return e.l&&Object.keys(e.l).forEach((function(a){i.push(t.sanitizeNames(a+"="+e.l[a]))})),e.a&&Object.keys(e.a).forEach((function(i){a.push(t.sanitizeNames(i+"="+e.a[i]))})),this.sanitizeNames(e.c)+"{"+i.join(",")+(a.length>0?",":"")+a.join(",")+"}"},e.isGts=function(t){return!!t&&(""===t.c||!!t.c)&&!!t.v&&e.isArray(t.v)},e.isGtsToPlot=function(t){return!(!e.isGts(t)||0===t.v.length)&&(t.v||[]).some((function(e){return"number"==typeof e[e.length-1]||!!e[e.length-1].constructor.prototype.toFixed}))},e.isGtsToPlotOnMap=function(t){return!(!e.isGts(t)||0===t.v.length)&&(t.v||[]).some((function(e){return e.length>=3&&("number"==typeof e[e.length-1]||!!e[e.length-1].constructor.prototype.toFixed)}))},e.isSingletonGTS=function(t){return!(!e.isGts(t)||0===t.v.length)&&1===(t.v||[]).length},e.isGtsToAnnotate=function(t){return!(!e.isGts(t)||0===t.v.length)&&(t.v||[]).some((function(e){if(null!==e[e.length-1])return"number"!=typeof e[e.length-1]&&!!e[e.length-1].constructor&&"Big"!==e[e.length-1].constructor.name&&void 0===e[e.length-1].constructor.prototype.toFixed}))},e.gtsSort=function(e){e.isSorted||(e.v=e.v.sort((function(e,t){return e[0]-t[0]})),e.isSorted=!0)},e.getData=function(t){return"string"==typeof t?e.getData(JSON.parse(t)):t&&t.hasOwnProperty("data")?(e.isArray(t.data)||(t.data=[t.data]),t):e.isArray(t)&&t.length>0&&t[0].data?t[0]:e.isArray(t)?{data:t}:new k},e.getDivider=function(e){var t=1e3;return"ms"===e&&(t=1),"ns"===e&&(t=1e6),t},e.LOG=new N(e),e.formatLabel=function(e){var t=e.split("{"),i="<span class=\"gtsInfo\"><span class='gts-classname'>"+t[0]+"</span>";if(t.length>1){i+="<span class='gts-separator'>{</span>";var a=t[1].substr(0,t[1].length-1).split(",");a.length>0&&a.forEach((function(e,t){var n=e.split("=");e.length>1&&(i+="<span><span class='gts-labelname'>"+n[0]+"</span>\n<span class='gts-separator'>=</span><span class='gts-labelvalue'>"+n[1]+"</span>",t!==a.length-1&&(i+="<span>, </span>"))})),i+="<span class='gts-separator'>}</span>"}if(t.length>2){i+="<span class='gts-separator'>{</span>";var n=t[2].substr(0,t[2].length-1).split(",");n.length>0&&n.forEach((function(e,t){var a=e.split("=");e.length>1&&(i+="<span><span class='gts-attrname'>"+a[0]+"</span>\n<span class='gts-separator'>=</span><span class='gts-attrvalue'>"+a[1]+"</span>",t!==n.length-1&&(i+="<span>, </span>"))})),i+="<span class='gts-separator'>}</span>"}return i+="</span>"},e}();var G=function(){this.tsmin=0,this.tsmax=0,this.msmin="",this.msmax="",this.marginLeft=0};var _=function(){function e(){}return e.getColor=function(t,i){return e.color[i][t%e.color[i].length]},e.getColorGradient=function(t,i){return[[0,e.transparentize(e.getColor(t,i),0)],[1,e.transparentize(e.getColor(t,i),.7)]]},e.getBlendedColorGradient=function(t,i,a){return void 0===a&&(a="#000000"),[[0,e.blend_colors(a,e.getColor(t,i),0)],[1,e.blend_colors(a,e.getColor(t,i),1)]]},e.getColorScale=function(t){return e.color[t].map((function(e,t){return[t,e]}))},e.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},e.transparentize=function(t,i){return void 0===i&&(i=.5),"rgba("+e.hexToRgb(t).concat(i).join(",")+")"},e.generateColors=function(t,i){for(var a=[],n=0;n<t;n++)a.push(e.getColor(n,i));return a},e.generateTransparentColors=function(t,i){for(var a=[],n=0;n<t;n++)a.push(e.transparentize(e.getColor(n,i)));return a},e.hsvGradientFromRgbColors=function(t,i,a){var n=e.rgb2hsv(t.r,t.g,t.b),o=e.rgb2hsv(i.r,i.g,i.b);t.h=n[0],t.s=n[1],t.v=n[2],i.h=o[0],i.s=o[1],i.v=o[2];var r=e.hsvGradient(t,i,a);for(var s in r)r[s]&&(r[s].rgb=e.hsv2rgb(r[s].h,r[s].s,r[s].v),r[s].r=Math.floor(r[s].rgb[0]),r[s].g=Math.floor(r[s].rgb[1]),r[s].b=Math.floor(r[s].rgb[2]));return r},e.rgb2hsv=function(e,t,i){var a,n,o,r=e/255,s=t/255,p=i/255,l=Math.max(r,s,p),c=l-Math.min(r,s,p);if(o=l,0===c)a=0,n=0;else switch(n=c/o,l){case r:a=(s-p+c*(s<p?6:0))/6*c;break;case s:a=(p-r+2*c)/6*c;break;case p:a=(r-s+4*c)/6*c}return[a,n,o]},e.hsvGradient=function(e,t,i){for(var a=new Array(i),n=e.h>=t.h?e.h-t.h:1+e.h-t.h,o=e.h>=t.h?1+t.h-e.h:t.h-e.h,r=0;r<i;r++){var s=o<=n?e.h+o*r/(i-1):e.h-n*r/(i-1);s<0&&(s=1+s),s>1&&(s-=1);var p=(1-r/(i-1))*e.s+r/(i-1)*t.s,l=(1-r/(i-1))*e.v+r/(i-1)*t.v;a[r]={h:s,s:p,v:l}}return a},e.hsv2rgb=function(e,t,i){var a,n,o,r=Math.floor(6*e),s=6*e-r,p=i*(1-t),l=i*(1-s*t),c=i*(1-(1-s)*t);switch(r%6){case 0:a=i,n=c,o=p;break;case 1:a=l,n=i,o=p;break;case 2:a=p,n=i,o=c;break;case 3:a=p,n=l,o=i;break;case 4:a=c,n=p,o=i;break;case 5:a=i,n=p,o=l}return[255*a,255*n,255*o]},e.rgb2hex=function(e,t,i){function a(e){var t=e.toString(16);return 1===t.length?"0"+t:t}return"#"+a(e)+a(t)+a(i)},e.blend_colors=function(t,i,a){if(i=i||"#ffffff",a=a||.5,4!==(t=t||"#000000").length&&7!==t.length)throw new Error("colors must be provided as hexes");if(4!==i.length&&7!==i.length)throw new Error("colors must be provided as hexes");if(a>1||a<0)throw new Error("percentage must be between 0 and 1");t=4===t.length?t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:t.substring(1),i=4===i.length?i[1]+i[1]+i[2]+i[2]+i[3]+i[3]:i.substring(1),console.log("valid: c1 => "+t+", c2 => "+i),t=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],i=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],console.log("hex -> rgba: c1 => ["+t.join(", ")+"], c2 => ["+i.join(", ")+"]");var n=[(1-a)*t[0]+a*i[0],(1-a)*t[1]+a*i[1],(1-a)*t[2]+a*i[2]],o="#"+e.int_to_hex(n[0])+e.int_to_hex(n[1])+e.int_to_hex(n[2]);return console.log(o),o},e.int_to_hex=function(e){var t=Math.round(e).toString(16);return 1===t.length&&(t="0"+t),t},e.color={COHESIVE:["#F2D354","#E4612F","#D32C2E","#6D2627","#6C7F55","#934FC6","#F07A5D","#ED8371","#94E751","#C457F7","#973AF7","#B6FF7A","#C7FFD5","#90E4D0","#E09234","#D2FF91","#17B201"],COHESIVE_2:["#6F694E","#65D0B2","#D8F546","#FF724B","#D6523E","#F9F470","#F4BC78","#B1D637","#FFCFC8","#56CDAB","#CFDD22","#B3F5D2","#97DB29","#9DC5EE","#CFC0F5","#EDEA29","#5EC027","#386C94"],BELIZE:["#5899DA","#E8743B","#19A979","#ED4A7B","#945ECF","#13A4B4","#525DF4","#BF399E","#6C8893","#EE6868","#2F6497"],VIRIDIS:["#440154","#481f70","#443983","#3b528b","#31688e","#287c8e","#21918c","#20a486","#35b779","#5ec962","#90d743","#c8e020"],MAGMA:["#000004","#100b2d","#2c115f","#51127c","#721f81","#932b80","#b73779","#d8456c","#f1605d","#fc8961","#feb078","#fed799"],INFERNO:["#000004","#110a30","#320a5e","#57106e","#781c6d","#9a2865","#bc3754","#d84c3e","#ed6925","#f98e09","#fbb61a","#f4df53"],PLASMA:["#0d0887","#3a049a","#5c01a6","#7e03a8","#9c179e","#b52f8c","#cc4778","#de5f65","#ed7953","#f89540","#fdb42f","#fbd524"],YL_OR_RD:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],YL_GN_BU:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],BU_GN:["#f7fcfd","#ebf7fa","#dcf2f2","#c8eae4","#aadfd2","#88d1bc","#68c2a3","#4eb485","#37a266","#228c49","#0d7635","#025f27"],WARP10:["#ff9900","#004eff","#E53935","#7CB342","#F4511E","#039BE5","#D81B60","#C0CA33","#6D4C41","#8E24AA","#00ACC1","#FDD835","#5E35B1","#00897B","#FFB300","#3949AB","#43A047","#1E88E5"],NINETEEN_EIGHTY_FOUR:["#31C0F6","#A500A5","#FF7E27"],ATLANTIS:["#74D495","#3F3FBA","#FF4D9E"],DO_ANDROIDS_DREAM:["#8F8AF4","#A51414","#F4CF31"],DELOREAN:["#FD7A5D","#5F1CF2","#4CE09A"],CTHULHU:["#FDC44F","#007C76","#8983FF"],ECTOPLASM:["#DA6FF1","#00717A","#ACFF76"],T_MAX_400_FILM:["#F6F6F8","#A4A8B6","#545667"]},e}();var U=function(){function e(){}return e.mergeDeep=function(t,i){for(var a in t=t||{},i||{})i.hasOwnProperty(a)&&("[object Object]"===Object.prototype.toString.call(i[a])?t[a]=e.mergeDeep(t[a],i[a]):t[a]=i[a]);return(t)},e.DEFAULT_WIDTH=640,e.DEFAULT_HEIGHT=480,e}();var B=function(){this.scheme="WARP10",this.horizontal=!1,this.stacked=!1,this.showControls=!0,this.showErrors=!0,this.showStatus=!0,this.showDots=!1,this.timeUnit="us",this.timeZone="UTC",this.map={tiles:[],showTimeSlider:!1,showTimeRange:!1,timeSliderMode:"timestamp"},this.bounds={}};var R=function(){function e(i,a,n){this.iterableDiffers=i,this.el=a,this.keyValueDiffers=n,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!0,this.initialized=new t.EventEmitter,this.update=new t.EventEmitter,this.purge=new t.EventEmitter,this.error=new t.EventEmitter,this.afterExport=new t.EventEmitter,this.afterPlot=new t.EventEmitter,this.animated=new t.EventEmitter,this.animatingFrame=new t.EventEmitter,this.animationInterrupted=new t.EventEmitter,this.autoSize=new t.EventEmitter,this.beforeExport=new t.EventEmitter,this.buttonClicked=new t.EventEmitter,this.click=new t.EventEmitter,this.plotly_click=new t.EventEmitter,this.clickAnnotation=new t.EventEmitter,this.deselect=new t.EventEmitter,this.doubleClick=new t.EventEmitter,this.framework=new t.EventEmitter,this.hover=new t.EventEmitter,this.legendClick=new t.EventEmitter,this.legendDoubleClick=new t.EventEmitter,this.relayout=new t.EventEmitter,this.restyle=new t.EventEmitter,this.redraw=new t.EventEmitter,this.selected=new t.EventEmitter,this.selecting=new t.EventEmitter,this.sliderChange=new t.EventEmitter,this.sliderEnd=new t.EventEmitter,this.sliderStart=new t.EventEmitter,this.transitioning=new t.EventEmitter,this.transitionInterrupted=new t.EventEmitter,this.unhover=new t.EventEmitter,this.relayouting=new t.EventEmitter,this.eventNames=["hover","unhover","relayout"],this.LOG=new N(e,this.debug)}return e.prototype.ngOnInit=function(){var e=this;this.createPlot().then((function(){var t=e.createFigure();e.LOG.debug(["figure"],t),e.initialized.emit(e.plotlyInstance)}))},e.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);var e=this.createFigure();this.purge.emit(e),this.remove(this.plotlyInstance)},e.prototype.ngOnChanges=function(e){this.LOG.debug(["ngOnChanges"],e);var t=e.revision;e.debug&&(this.debug=e.debug.currentValue),(t&&!t.isFirstChange()||e.layout||e.data||e.config)&&this.updatePlot(),e.debug&&this.LOG.setDebug(e.debug.currentValue),this.updateWindowResizeHandler(),this.LOG.debug(["ngOnChanges"],e)},e.prototype.ngDoCheck=function(){if(this.updateOnlyWithRevision)return!1;var e=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(e=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0);this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(e=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0);e&&this.plotlyInstance&&this.updatePlot()},e.prototype.getWindow=function(){return window},e.prototype.getBoundingClientRect=function(){return this.rect},e.prototype.getClassName=function(){var e=[this.defaultClassName];return Array.isArray(this.className)?e=e.concat(this.className):this.className&&e.push(this.className),e.join(" ")},e.prototype.restyleChart=function(e,t){o.restyle(this.plotlyInstance,e,t)},e.prototype.createPlot=function(){var e=this;return this.LOG.debug(["createPlot"],this.data,this.layout,this.config,this.plotlyInstance),o.react(this.plotEl.nativeElement,this.data,this.layout,this.config).then((function(t){e.rect=e.el.nativeElement.getBoundingClientRect(),e.plotlyInstance=t,e.LOG.debug(["plotlyInstance"],t),e.getWindow().gd=e.debug?t:void 0,e.eventNames.forEach((function(i){var a="plotly_"+i.toLowerCase();t.on(a,(function(t){e.LOG.debug(["plotlyEvent",a],t),e[i].emit(t)}))})),t.on("plotly_click",(function(t){e.click.emit(t),e.plotly_click.emit(t)})),e.updateWindowResizeHandler(),e.afterPlot.emit(t)}),(function(t){console.error("Error while plotting:",t),e.error.emit(t)}))},e.prototype.createFigure=function(){var e=this.plotlyInstance;return{data:e.data,layout:e.layout,frames:e._transitionData?e._transitionData._frames:null}},e.prototype.updatePlot=function(){var e=this;if(this.LOG.debug(["updatePlot"],this.data,this.layout,O({},this.config)),this.plotlyInstance)o.purge(this.plotlyInstance),this.createPlot().then((function(){var t=e.createFigure();e.update.emit(t)}),(function(t){console.error("Error while updating plot:",t),e.error.emit(t)}));else{var t=new Error("Plotly component wasn't initialized");this.error.emit(t)}},e.prototype.updateWindowResizeHandler=function(){var e=this;this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=function(){return setTimeout((function(){return r.Plots.resize(e.plotlyInstance)}))},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)},e.prototype.dataDifferTrackBy=function(e,t){var i=Object.assign({},t,{uid:""});return JSON.stringify(i)},e.prototype.remove=function(e){o.purge(e),delete this.plotlyInstance},e.decorators=[{type:t.Component,args:[{selector:"warpview-plotly",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>\n\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:["/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}.js-plotly-plot .plotly,.js-plotly-plot .plotly div{direction:ltr;font-family:'Open Sans',verdana,arial,sans-serif;margin:0;padding:0}.js-plotly-plot .plotly button,.js-plotly-plot .plotly input{font-family:'Open Sans',verdana,arial,sans-serif}.js-plotly-plot .plotly button:focus,.js-plotly-plot .plotly input:focus{outline:0}.js-plotly-plot .plotly a,.js-plotly-plot .plotly a:hover{text-decoration:none}.js-plotly-plot .plotly .crisp{shape-rendering:crispEdges}.js-plotly-plot .plotly .user-select-none{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.js-plotly-plot .plotly svg{overflow:hidden}.js-plotly-plot .plotly svg a{fill:#447adb}.js-plotly-plot .plotly svg a:hover{fill:#3c6dc5}.js-plotly-plot .plotly .main-svg{position:absolute;top:0;left:0;pointer-events:none}.js-plotly-plot .plotly .main-svg .draglayer{pointer-events:all}.js-plotly-plot .plotly .cursor-default{cursor:default}.js-plotly-plot .plotly .cursor-pointer{cursor:pointer}.js-plotly-plot .plotly .cursor-crosshair{cursor:crosshair}.js-plotly-plot .plotly .cursor-move{cursor:move}.js-plotly-plot .plotly .cursor-col-resize{cursor:col-resize}.js-plotly-plot .plotly .cursor-row-resize{cursor:row-resize}.js-plotly-plot .plotly .cursor-ns-resize{cursor:ns-resize}.js-plotly-plot .plotly .cursor-ew-resize{cursor:ew-resize}.js-plotly-plot .plotly .cursor-sw-resize{cursor:sw-resize}.js-plotly-plot .plotly .cursor-s-resize{cursor:s-resize}.js-plotly-plot .plotly .cursor-se-resize{cursor:se-resize}.js-plotly-plot .plotly .cursor-w-resize{cursor:w-resize}.js-plotly-plot .plotly .cursor-e-resize{cursor:e-resize}.js-plotly-plot .plotly .cursor-nw-resize{cursor:nw-resize}.js-plotly-plot .plotly .cursor-n-resize{cursor:n-resize}.js-plotly-plot .plotly .cursor-ne-resize{cursor:ne-resize}.js-plotly-plot .plotly .cursor-grab{cursor:-webkit-grab;cursor:grab}.js-plotly-plot .plotly .modebar{position:absolute;top:2px;right:2px}.js-plotly-plot .plotly .ease-bg{-webkit-transition:background-color .3s;transition:background-color .3s}.js-plotly-plot .plotly .modebar--hover>:not(.watermark){opacity:0;-webkit-transition:opacity .3s;transition:opacity .3s}.js-plotly-plot .plotly:hover .modebar--hover .modebar-group{opacity:1}.js-plotly-plot .plotly .modebar-group{float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap}.js-plotly-plot .plotly .modebar-btn{position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box}.js-plotly-plot .plotly .modebar-btn svg{position:relative;top:2px}.js-plotly-plot .plotly .modebar.vertical{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%}.js-plotly-plot .plotly .modebar.vertical svg{top:-1px}.js-plotly-plot .plotly .modebar.vertical .modebar-group{display:block;float:none;padding-left:0;padding-bottom:8px}.js-plotly-plot .plotly .modebar.vertical .modebar-group .modebar-btn{display:block;text-align:center}.js-plotly-plot .plotly [data-title]:after,.js-plotly-plot .plotly [data-title]:before{position:absolute;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%}.js-plotly-plot .plotly [data-title]:hover:after,.js-plotly-plot .plotly [data-title]:hover:before{display:block;opacity:1}.js-plotly-plot .plotly [data-title]:before{content:'';position:absolute;background:0 0;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px}.js-plotly-plot .plotly [data-title]:after{content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px}.js-plotly-plot .plotly .vertical [data-title]:after,.js-plotly-plot .plotly .vertical [data-title]:before{top:0;right:200%}.js-plotly-plot .plotly .vertical [data-title]:before{border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px}.js-plotly-plot .plotly .select-outline{fill:none;stroke-width:1;shape-rendering:crispEdges}.js-plotly-plot .plotly .select-outline-1{stroke:#fff}.js-plotly-plot .plotly .select-outline-2{stroke:#000;stroke-dasharray:2px 2px}.plotly-notifier{font-family:'Open Sans',verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px}.plotly-notifier p{margin:0}.plotly-notifier .notifier-note{min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.plotly-notifier .notifier-close{color:#fff;opacity:.8;float:right;padding:0 5px;background:0 0;border:none;font-size:20px;font-weight:700;line-height:20px}.plotly-notifier .notifier-close:hover{color:#444;text-decoration:none;cursor:pointer}:host .ylines-above{stroke:var(--warp-view-chart-grid-color)!important}:host .xtick>text,:host .ytick>text{fill:var(--warp-view-font-color)!important}:host .modebar-btn path{fill:var(--warp-view-font-color)!important}"]}]}],e.ctorParameters=function(){return[{type:t.IterableDiffers},{type:t.ElementRef},{type:t.KeyValueDiffers}]},e.propDecorators={plotEl:[{type:t.ViewChild,args:["plot",{static:!0}]}],data:[{type:t.Input}],layout:[{type:t.Input}],config:[{type:t.Input}],frames:[{type:t.Input}],style:[{type:t.Input}],divId:[{type:t.Input}],revision:[{type:t.Input}],className:[{type:t.Input}],debug:[{type:t.Input}],useResizeHandler:[{type:t.Input}],updateOnLayoutChange:[{type:t.Input}],updateOnDataChange:[{type:t.Input}],updateOnlyWithRevision:[{type:t.Input}],initialized:[{type:t.Output}],update:[{type:t.Output}],purge:[{type:t.Output}],error:[{type:t.Output}],afterExport:[{type:t.Output}],afterPlot:[{type:t.Output}],animated:[{type:t.Output}],animatingFrame:[{type:t.Output}],animationInterrupted:[{type:t.Output}],autoSize:[{type:t.Output}],beforeExport:[{type:t.Output}],buttonClicked:[{type:t.Output}],click:[{type:t.Output}],plotly_click:[{type:t.Output}],clickAnnotation:[{type:t.Output}],deselect:[{type:t.Output}],doubleClick:[{type:t.Output}],framework:[{type:t.Output}],hover:[{type:t.Output}],legendClick:[{type:t.Output}],legendDoubleClick:[{type:t.Output}],relayout:[{type:t.Output}],restyle:[{type:t.Output}],redraw:[{type:t.Output}],selected:[{type:t.Output}],selecting:[{type:t.Output}],sliderChange:[{type:t.Output}],sliderEnd:[{type:t.Output}],sliderStart:[{type:t.Output}],transitioning:[{type:t.Output}],transitionInterrupted:[{type:t.Output}],unhover:[{type:t.Output}],relayouting:[{type:t.Output}]},e}();var z=function(){function e(e,i,a,n){var o=this;this.el=e,this.renderer=i,this.sizeService=a,this.ngZone=n,this.width=U.DEFAULT_WIDTH,this.height=U.DEFAULT_HEIGHT,this.chartDraw=new t.EventEmitter,this._options=new B,this.defOptions=U.mergeDeep(this._options,{dotsLimit:1e3,heatControls:!1,timeMode:"date",showRangeSelector:!0,gridLineColor:"#8e8e8e",showDots:!1,timeZone:"UTC",timeUnit:"us",showControls:!0,bounds:{}}),this._debug=!1,this._showLegend=!1,this._responsive=!0,this._unit="",this._autoResize=!0,this._hiddenData=[],this.tooltipPosition={top:"-10000px",left:"-1000px"},this.loading=!0,this.noData=!1,this.layout={margin:{t:10,b:25,r:10,l:10}},this.plotlyConfig={responsive:!0,showAxisDragHandles:!0,scrollZoom:!0,doubleClick:"reset+autosize",showTips:!0,plotGlPixelRatio:1,staticPlot:!1,displaylogo:!1,modeBarButtonsToRemove:["lasso2d","select2d","toggleSpikelines","toggleHover","hoverClosest3d","autoScale2d","hoverClosestGeo","hoverClosestGl2d","hoverClosestPie","toggleHover","hoverClosestCartesian","hoverCompareCartesian"]},this.sizeService.sizeChanged$.subscribe((function(t){if(e.nativeElement.parentElement){var i=e.nativeElement.parentElement.getBoundingClientRect();if(o._responsive&&(o.height=i.height,o.width=i.width),o.graph&&o._responsive&&i.height>0){var a={width:i.width,height:o._autoResize?i.height:o.layout.height};o.layout.width===a.width&&o.layout.height===a.height||(setTimeout((function(){return o.layout=O({},o.layout,a)})),o.LOG.debug(["sizeChanged$"],o.layout.width,o.layout.height),o.graph.updatePlot())}}}))}return Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unit",{get:function(){return this._unit},set:function(e){this._unit=e,this.update(void 0,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){"string"==typeof e&&(e="true"===e),this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLegend",{get:function(){return this._showLegend},set:function(e){"string"==typeof e&&(e="true"===e),this._showLegend=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responsive",{get:function(){return this._responsive},set:function(e){"string"==typeof e&&(e="true"===e),this._responsive=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){this.LOG.debug(["onOptions"],e),"string"==typeof e&&(e=JSON.parse(e)),n(e,this._options)||(this.LOG.debug(["onOptions","changed"],e),this._options=U.mergeDeep(this._options,e),this.update(this._options,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){this.LOG.debug(["onData"],e),e&&(this._data=V.getData(e),this.update(this._options,!0),this.LOG.debug(["onData"],this._data))},enumerable:!0,configurable:!0}),e.prototype.legendFormatter=function(e,t,i){var a=this;void 0===i&&(i=-1);var n=[];if(null===e)return"<br>\n      "+t.map((function(e){var t=V.formatLabel(e.data.text||"")+": "+((a._options.horizontal?e.x:e.y)||e.r||""),n=e.data.line.color;return e.data.marker&&(n=V.isArray(e.data.marker.color)?e.data.marker.color[0]:e.data.marker.color),e.curveNumber===i&&(t='<i class="chip"\n    style="background-color: '+n+";border: 2px solid "+n+';"></i> '+t),t})).join("<br>");var o="";return t[0]&&(e=t[0].x||t[0].theta),o+="<b>"+e+"</b><br />",(t=t.sort((function(e,t){return e.curveNumber===i?-1:1}))).slice(0,50).forEach((function(e,a){if(n.indexOf(e.curveNumber)<=-1){n.push(e.curveNumber);var r="h"===t[0].data.orientation?e.x:e.y;r||0===r||(r=e.r);var s=V.formatLabel(e.data.text||"")+": "+r;e.curveNumber===i&&(s="<b>"+s+"</b>");var p=e.data.line?e.data.line.color:"";e.data.marker&&(p=V.isArray(e.data.marker.color)?e.data.marker.color[0]:e.data.marker.color),o+='<i class="chip" style="background-color: '+p+";border: 2px solid "+p+';"></i>&nbsp;'+s,a<t.length&&(o+="<br>")}})),o},e.prototype.initChart=function(e){this.noData=!1;var t=e.nativeElement.parentElement.parentElement.getBoundingClientRect();if(this._responsive&&(this.height=t.height,this.width=t.width),this.LOG.debug(["initiChart","this._data"],this._data,this._options),!this._data||!this._data.data||0===this._data.data.length||!this._options)return this.loading=!1,this.LOG.debug(["initiChart","nodata"]),this.noData=!0,this.chartDraw.emit(),!1;a.tz.setDefault(this._options.timeZone),this.loading=!0,this._options=U.mergeDeep(this.defOptions,this._options||{});var i=this._data;return this._options=U.mergeDeep(this._options||{},this._data.globalParams),this.LOG.debug(["initiChart","this._options"],this._options),this._options.timeMode=this._options.timeMode||"date",this.divider=V.getDivider(this._options.timeUnit),this.plotlyData=this.convert(i),this.plotlyConfig.responsive=this._responsive,this.layout.paper_bgcolor="rgba(0,0,0,0)",this.layout.plot_bgcolor="rgba(0,0,0,0)",this._responsive?(this.layout.width=t.width,this.layout.height=t.height):(this.layout.width=this.width||U.DEFAULT_WIDTH,this.layout.height=this.height||U.DEFAULT_HEIGHT),this.LOG.debug(["initChart","initSize"],this.layout.width,this.layout.height,this.width,this.height),this._options.bounds&&this._options.bounds.minDate&&this._options.bounds.maxDate&&(i.bounds={xmin:Math.floor(this._options.bounds.minDate),xmax:Math.ceil(this._options.bounds.maxDate),ymin:this._options.bounds.yRanges&&this._options.bounds.yRanges.length>0?Math.floor(this._options.bounds.yRanges[0]):void 0,ymax:this._options.bounds.yRanges&&this._options.bounds.yRanges.length>1?Math.ceil(this._options.bounds.yRanges[1]):void 0},this.LOG.debug(["initChart","updateBounds"],i.bounds.xmin,i.bounds.xmax),this._options.timeMode&&"timestamp"===this._options.timeMode?this.layout.xaxis.range=[i.bounds.xmin,i.bounds.xmax]:this.layout.xaxis.range=[a.tz(i.bounds.xmin/this.divider,this._options.timeZone).toISOString(!0),a.tz(i.bounds.xmax/this.divider,this._options.timeZone).toISOString(!0)]),this.LOG.debug(["initiChart","plotlyData"],this.plotlyData),this.plotlyData&&0!==this.plotlyData.length?!(!this.plotlyData||0===this.plotlyData.length):(this.loading=!1,this.chartDraw.emit(),!1)},e.prototype.afterPlot=function(e){this.LOG.debug(["afterPlot","plotlyInstance"],e),this.chartDraw.emit(),this.loading=!1,this.rect=this.graph.getBoundingClientRect()},e.prototype.hideTooltip=function(){var e=this;this.hideTooltipTimer&&clearTimeout(this.hideTooltipTimer),this.hideTooltipTimer=setTimeout((function(){e.toolTip.nativeElement.style.display="none"}),1e3)},e.prototype.unhover=function(e,t){this.LOG.debug(["unhover"],e),this.hideTooltipTimer&&clearTimeout(this.hideTooltipTimer)},e.prototype.hover=function(e,t){this.LOG.debug(["hover"],e),this.toolTip.nativeElement.style.display="block",this.hideTooltipTimer&&clearTimeout(this.hideTooltipTimer);var i=Number.MAX_VALUE,a=[];if(!t)if(e.points[0]&&"h"!==e.points[0].data.orientation){var n=(e.yvals||[""])[0];e.points.forEach((function(e){a.push(e.curveNumber);var o=Math.abs((e.y||e.r)-n);o<i&&(i=o,t=e)}))}else{var o=(e.xvals||[""])[0];e.points.forEach((function(e){a.push(e.curveNumber);var n=Math.abs((e.x||e.r)-o);n<i&&(i=n,t=e)}))}if(t){var r=this.legendFormatter(this._options.horizontal?(e.yvals||[""])[0]:(e.xvals||[""])[0],e.points,t.curveNumber),s=e.event.offsetX+20+"px";e.event.offsetX>this.chartContainer.nativeElement.clientWidth/2&&(s=Math.max(0,e.event.offsetX-this.toolTip.nativeElement.clientWidth-20)+"px");var p=Math.min(this.el.nativeElement.getBoundingClientRect().height-this.toolTip.nativeElement.getBoundingClientRect().height-20,e.event.y-20-this.rect.top)+"px";this.moveTooltip(p,s,r)}},e.prototype.getTooltipPosition=function(){return{top:this.tooltipPosition.top,left:this.tooltipPosition.left}},e.prototype.moveTooltip=function(e,t,i){this.tooltipPosition={top:e,left:t},this.renderer.setProperty(this.toolTip.nativeElement,"innerHTML",i)},e.prototype.relayout=function(e){},e.prototype.getLabelColor=function(e){return this.getCSSColor(e,"--warp-view-chart-label-color","#8e8e8e").trim()},e.prototype.getGridColor=function(e){return this.getCSSColor(e,"--warp-view-chart-grid-color","#8e8e8e").trim()},e.prototype.getCSSColor=function(e,t,i){var a=getComputedStyle(e).getPropertyValue(t).trim();return""===a?i:a},e.propDecorators={toolTip:[{type:t.ViewChild,args:["toolTip",{static:!0}]}],graph:[{type:t.ViewChild,args:["graph",{static:!1}]}],chartContainer:[{type:t.ViewChild,args:["chartContainer",{static:!0}]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],unit:[{type:t.Input,args:["unit"]}],debug:[{type:t.Input,args:["debug"]}],showLegend:[{type:t.Input,args:["showLegend"]}],responsive:[{type:t.Input,args:["responsive"]}],options:[{type:t.Input,args:["options"]}],data:[{type:t.Input,args:["data"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}]},e}();var Y=function(e,t){this.width=e,this.height=t};var M=function(){function e(){this.sizeChanged$=new t.EventEmitter}return e.prototype.change=function(e){this.sizeChanged$.emit(e)},e}();var F=function(){function e(t,i){this.array=null,this.compare=null,this.minGallop=e.DEFAULT_MIN_GALLOPING,this.length=0,this.tmpStorageLength=e.DEFAULT_TMP_STORAGE_LENGTH,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=t,this.compare=i,this.length=t.length,this.length<2*e.DEFAULT_TMP_STORAGE_LENGTH&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return e.log10=function(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9},e.minRunLength=function(t){for(var i=0;t>=e.DEFAULT_MIN_MERGE;)i|=1&t,t>>=1;return t+i},e.makeAscendingRun=function(t,i,a,n){var o=i+1;if(o===a)return 1;if(n(t[o++],t[i])<0){for(;o<a&&n(t[o],t[o-1])<0;)o++;e.reverseRun(t,i,o)}else for(;o<a&&n(t[o],t[o-1])>=0;)o++;return o-i},e.reverseRun=function(e,t,i){for(i--;t<i;){var a=e[t];e[t++]=e[i],e[i--]=a}},e.binaryInsertionSort=function(e,t,i,a,n){for(a===t&&a++;a<i;a++){for(var o=e[a],r=t,s=a;r<s;){var p=r+s>>>1;n(o,e[p])<0?s=p:r=p+1}var l=a-r;switch(l){case 3:e[r+3]=e[r+2];case 2:e[r+2]=e[r+1];case 1:e[r+1]=e[r];break;default:for(;l>0;)e[r+l]=e[r+l-1],l--}e[r]=o}},e.gallopLeft=function(e,t,i,a,n,o){var r,s=0,p=1;if(o(e,t[i+n])>0){for(r=a-n;p<r&&o(e,t[i+n+p])>0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r),s+=n,p+=n}else{for(r=n+1;p<r&&o(e,t[i+n-p])<=0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r);var l=s;s=n-p,p=n-l}for(s++;s<p;){var c=s+(p-s>>>1);o(e,t[i+c])>0?s=c+1:p=c}return p},e.gallopRight=function(e,t,i,a,n,o){var r,s=0,p=1;if(o(e,t[i+n])<0){for(r=n+1;p<r&&o(e,t[i+n-p])<0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r);var l=s;s=n-p,p=n-l}else{for(r=a-n;p<r&&o(e,t[i+n+p])>=0;)s=p,(p=1+(p<<1))<=0&&(p=r);p>r&&(p=r),s+=n,p+=n}for(s++;s<p;){var c=s+(p-s>>>1);o(e,t[i+c])<0?p=c:s=c+1}return p},e.alphabeticalCompare=function(t,i){if(t===i)return 0;if(~~t===t&&~~i===i){if(0===t||0===i)return t<i?-1:1;if(t<0||i<0){if(i>=0)return-1;if(t>=0)return 1;t=-t,i=-i}var a=e.log10(t),n=e.log10(i),o=0;return a<n?(t*=e.POWERS_OF_TEN[n-a-1],i/=10,o=-1):a>n&&(i*=e.POWERS_OF_TEN[a-n-1],t/=10,o=1),t===i?o:t<i?-1:1}var r=String(t),s=String(i);return r===s?0:r<s?-1:1},e.sort=function(t,i,a,n){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");i?"function"!=typeof i&&(n=a,a=i,i=e.alphabeticalCompare):i=e.alphabeticalCompare,a||(a=0),n||(n=t.length);var o=n-a;if(!(o<2)){var r=0;if(o<e.DEFAULT_MIN_MERGE)return r=e.makeAscendingRun(t,a,n,i),void e.binaryInsertionSort(t,a,n,a+r,i);var s=new e(t,i),p=e.minRunLength(o);do{if((r=e.makeAscendingRun(t,a,n,i))<p){var l=o;l>p&&(l=p),e.binaryInsertionSort(t,a,a+l,a+r,i),r=l}s.pushRun(a,r),s.mergeRuns(),o-=r,a+=r}while(0!==o);s.forceMergeRuns()}},e.prototype.pushRun=function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},e.prototype.mergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},e.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},e.prototype.mergeAt=function(t){var i=this.compare,a=this.array,n=this.runStart[t],o=this.runLength[t],r=this.runStart[t+1],s=this.runLength[t+1];this.runLength[t]=o+s,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var p=e.gallopRight(a[r],a,n,o,0,i);n+=p,0!==(o-=p)&&0!==(s=e.gallopLeft(a[n+o-1],a,r,s,s-1,i))&&(o<=s?this.mergeLow(n,o,r,s):this.mergeHigh(n,o,r,s))},e.prototype.mergeLow=function(t,i,a,n){var o,r=this.compare,s=this.array,p=this.tmp;for(o=0;o<i;o++)p[o]=s[t+o];var l=0,c=a,h=t;if(s[h++]=s[c++],0!=--n)if(1!==i){for(var d=this.minGallop;;){var g=0,u=0,w=!1;do{if(r(s[c],p[l])<0){if(s[h++]=s[c++],u++,g=0,0==--n){w=!0;break}}else if(s[h++]=p[l++],g++,u=0,1==--i){w=!0;break}}while((g|u)<d);if(w)break;do{if(0!==(g=e.gallopRight(s[c],p,l,i,0,r))){for(o=0;o<g;o++)s[h+o]=p[l+o];if(h+=g,l+=g,(i-=g)<=1){w=!0;break}}if(s[h++]=s[c++],0==--n){w=!0;break}if(0!==(u=e.gallopLeft(p[l],s,c,n,0,r))){for(o=0;o<u;o++)s[h+o]=s[c+o];if(h+=u,c+=u,0===(n-=u)){w=!0;break}}if(s[h++]=p[l++],1==--i){w=!0;break}d--}while(g>=e.DEFAULT_MIN_GALLOPING||u>=e.DEFAULT_MIN_GALLOPING);if(w)break;d<0&&(d=0),d+=2}if(this.minGallop=d,d<1&&(this.minGallop=1),1===i){for(o=0;o<n;o++)s[h+o]=s[c+o];s[h+n]=p[l]}else{if(0===i)throw new Error("mergeLow preconditions were not respected");for(o=0;o<i;o++)s[h+o]=p[l+o]}}else{for(o=0;o<n;o++)s[h+o]=s[c+o];s[h+n]=p[l]}else for(o=0;o<i;o++)s[h+o]=p[l+o]},e.prototype.mergeHigh=function(t,i,a,n){var o,r=this.compare,s=this.array,p=this.tmp;for(o=0;o<n;o++)p[o]=s[a+o];var l=t+i-1,c=n-1,h=a+n-1,d=0,g=0;if(s[h--]=s[l--],0!=--i)if(1!==n){for(var u=this.minGallop;;){var w=0,f=0,v=!1;do{if(r(p[c],s[l])<0){if(s[h--]=s[l--],w++,f=0,0==--i){v=!0;break}}else if(s[h--]=p[c--],f++,w=0,1==--n){v=!0;break}}while((w|f)<u);if(v)break;do{if(0!==(w=i-e.gallopRight(p[c],s,t,i,i-1,r))){for(i-=w,g=(h-=w)+1,d=(l-=w)+1,o=w-1;o>=0;o--)s[g+o]=s[d+o];if(0===i){v=!0;break}}if(s[h--]=p[c--],1==--n){v=!0;break}if(0!==(f=n-e.gallopLeft(s[l],p,0,n,n-1,r))){for(n-=f,g=(h-=f)+1,d=(c-=f)+1,o=0;o<f;o++)s[g+o]=p[d+o];if(n<=1){v=!0;break}}if(s[h--]=s[l--],0==--i){v=!0;break}u--}while(w>=e.DEFAULT_MIN_GALLOPING||f>=e.DEFAULT_MIN_GALLOPING);if(v)break;u<0&&(u=0),u+=2}if(this.minGallop=u,u<1&&(this.minGallop=1),1===n){for(g=(h-=i)+1,d=(l-=i)+1,o=i-1;o>=0;o--)s[g+o]=s[d+o];s[h]=p[c]}else{if(0===n)throw new Error("mergeHigh preconditions were not respected");for(d=h-(n-1),o=0;o<n;o++)s[d+o]=p[o]}}else{for(g=(h-=i)+1,d=(l-=i)+1,o=i-1;o>=0;o--)s[g+o]=s[d+o];s[h]=p[c]}else for(d=h-(n-1),o=0;o<n;o++)s[d+o]=p[o]},e.DEFAULT_MIN_MERGE=32,e.DEFAULT_MIN_GALLOPING=7,e.DEFAULT_TMP_STORAGE_LENGTH=256,e.POWERS_OF_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],e}();var H=function(e){function i(a,n,o,r){var p=e.call(this,a,n,o,r)||this;return p.el=a,p.renderer=n,p.sizeService=o,p.ngZone=r,p.standalone=!0,p.boundsDidChange=new t.EventEmitter,p.pointHover=new t.EventEmitter,p.warpViewChartResize=new t.EventEmitter,p._type="line",p.visibility=[],p.maxTick=0,p.minTick=0,p.visibleGtsId=[],p.gtsId=[],p.dataHashset={},p.chartBounds=new G,p.visibilityStatus="unknown",p.afterBoundsUpdate=!1,p.maxPlottable=1e4,p.parsing=!1,p.unhighliteCurve=new s.Subject,p.highliteCurve=new s.Subject,p.layout={showlegend:!1,autosize:!0,hovermode:"x",hoverdistance:20,xaxis:{font:{}},yaxis:{exponentformat:"none",fixedrange:!0,automargin:!0,showline:!0,font:{}},margin:{t:0,b:30,r:10,l:50}},p.LOG=new N(i,p._debug),p}return L(i,e),Object.defineProperty(i.prototype,"hiddenData",{set:function(e){var t=this,i=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","previousVisibility"],i),this._hiddenData=e,this.visibility=[],this.visibleGtsId.forEach((function(i){return t.visibility.push(e.indexOf(i)<0&&-1!==i)})),this.LOG.debug(["hiddenData","hiddendygraphfullv"],this.visibility);var a=JSON.stringify(this.visibility);if(this.LOG.debug(["hiddenData","json"],i,a,this._hiddenData),i!==a){var n=[],o=[];(this.gtsId||[]).forEach((function(e,i){t._hiddenData.indexOf(e)>-1?o.push(i):n.push(i)})),n.length>0&&this.graph.restyleChart({visible:!0},n),o.length>0&&this.graph.restyleChart({visible:!1},o),this.LOG.debug(["hiddendygraphtrig","destroy"],"redraw by visibility change",n,o)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.update=function(e,t){this.drawChart(t)},i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.getTimeClip=function(){return C(this,void 0,void 0,(function(){var e=this;return I(this,(function(t){return[2,new Promise((function(t){e.LOG.debug(["getTimeClip"],e.chartBounds),t(e.chartBounds)}))]}))}))},i.prototype.resize=function(e){this.height=e,this.layout.height=this.height,this._options.showRangeSelector&&(this.layout.xaxis.rangeslider={bgcolor:"transparent",thickness:40/this.height})},i.prototype.drawChart=function(e){var t=this;if(void 0===e&&(e=!1),this.LOG.debug(["drawChart","this.layout","this.options"],this.layout,this._options),this.initChart(this.el)){this.plotlyConfig.scrollZoom=!0,this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.type="linear",this.layout.xaxis.tick0=this.minTick/this.divider):(this.layout.xaxis.type="date",this.layout.xaxis.tick0=S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0)),this.layout.yaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.yaxis.zerolinecolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.zerolinecolor=this.getGridColor(this.el.nativeElement),this.layout.margin.t=this.standalone?20:10,this.layout.showlegend=this._showLegend,this._responsive||(this.layout.width=this.width,this.layout.height=this.height),this.LOG.debug(["drawChart","this.options"],this.layout,this._options),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this._options.showRangeSelector?this.layout.xaxis.rangeslider={bgcolor:"transparent",thickness:40/this.height}:this.layout.margin.b=30;var i={tick0:void 0,range:[]};this.LOG.debug(["drawChart","updateBounds"],this.chartBounds);var a=this.chartBounds.tsmin||this.minTick,n=this.chartBounds.tsmax||this.maxTick;this._options.timeMode&&"timestamp"===this._options.timeMode?(i.tick0=a/this.divider,i.range=[a,n]):(i.tick0=S.tz(a/this.divider,this._options.timeZone).toISOString(!0),i.range=[S.tz(a/this.divider,this._options.timeZone).toISOString(!0),S.tz(n/this.divider,this._options.timeZone).toISOString(!0)]),this.layout.xaxis=i,this.layout=O({},this.layout),this.loading=!1,this.highliteCurve.pipe(p.debounceTime(200)).subscribe((function(e){Promise.resolve().then((function(){t.graph.restyleChart({opacity:.4},e.off),t.graph.restyleChart({opacity:1},e.on)}))})),this.unhighliteCurve.pipe(p.debounceTime(200)).subscribe((function(e){Promise.resolve().then((function(){t.graph.restyleChart({opacity:1},e)}))}))}else this.LOG.debug(["drawChart","initChart"],this._options)},i.prototype.emitNewBounds=function(e,t,i){this._options.timeMode&&"timestamp"===this._options.timeMode?this.boundsDidChange.emit({bounds:{min:e,max:t,marginLeft:i},source:"chart"}):this.boundsDidChange.emit({bounds:{min:S.tz(e,this._options.timeZone).valueOf(),max:S.tz(t,this._options.timeZone).valueOf(),marginLeft:i},source:"chart"})},i.prototype.convert=function(e){var t=this;this.parsing=!0;var i=[];if(this.LOG.debug(["convert"],this._options.timeMode),this.LOG.debug(["convert","this._hiddenData"],this._hiddenData),V.isArray(e.data)){var a=V.flatDeep(V.flattenGtsIdArray(e.data,0).res);this.maxTick=Number.NEGATIVE_INFINITY,this.minTick=Number.POSITIVE_INFINITY,this.visibleGtsId=[],this.gtsId=[];var n=a.filter((function(e){return t.LOG.debug(["convert"],V.isGtsToPlot(e)),e.v&&!V.isGtsToPlot(e)}));a=a.filter((function(e){return e.v&&V.isGtsToPlot(e)})),"unknown"===this.visibilityStatus&&(this.visibilityStatus=a.length>0?"plottableShown":"nothingPlottable"),this.LOG.debug(["convert"],this._options.timeMode);var o=!0,r=100*V.getDivider(this._options.timeUnit);this.LOG.debug(["convert"],"forEach GTS"),a.forEach((function(e){var t=e.v.map((function(e){return e[0]})),i=e.v.length;o=(o=o&&t[0]>-r&&t[0]<r)&&t[i-1]>-r&&t[i-1]<r})),o||"timestamp"===this._options.timeMode?this.layout.xaxis.type="linear":this.layout.xaxis.type="date",a.forEach((function(a,n){if(a.v&&V.isGtsToPlot(a)){F.sort(a.v,(function(e,t){return e[0]-t[0]}));var r=a.v.length;t.LOG.debug(["convert"],a);var s=V.serializeGtsMetadata(a),p=_.getColor(a.id,t._options.scheme),l=((e.params||[])[n]||{datasetColor:p}).datasetColor||p,c={type:"spline"===t._type?"scatter":"scattergl",mode:"scatter"===t._type?"markers":r>t.maxPlottable?"lines":"lines+markers",text:s,x:[],y:[],line:{color:l},hoverinfo:"none",connectgaps:!1,visible:!(t._hiddenData.filter((function(e){return e===a.id})).length>0)};switch(("scatter"===t._type||r<t.maxPlottable)&&(c.marker={size:15,color:new Array(r).fill(l),line:{color:l,width:3},opacity:new Array(r).fill("scatter"===t._type||t._options.showDots?1:0)}),t._type){case"spline":c.line.shape="spline";break;case"area":c.fill="tozeroy",c.fillcolor=_.transparentize(l,.3);break;case"step":c.line.shape="hvh";break;case"step-before":c.line.shape="vh";break;case"step-after":c.line.shape="hv"}t.visibleGtsId.push(a.id),t.gtsId.push(a.id),t.LOG.debug(["convert"],"forEach value");var h=a.v.map((function(e){return e[0]})),d=a.v.map((function(e){return e[e.length-1]}));if(r>0){t.minTick=t.minTick||h[0],t.maxTick=t.maxTick||h[0];for(var g=1;g<r;g++){var u=h[g];t.minTick=u<=t.minTick?u:t.minTick,t.maxTick=u>=t.maxTick?u:t.maxTick}}o||"timestamp"===t._options.timeMode?c.x=h:"UTC"!==t._options.timeZone?c.x=h.map((function(e){return S.utc(e/t.divider).tz(t._options.timeZone).toISOString()})):c.x=h.map((function(e){return S.utc(e/t.divider).toISOString()})),c.y=d,t.LOG.debug(["convert"],"forEach value end",t.minTick,t.maxTick),i.push(c)}})),n.length>0&&0===a.length&&(n.forEach((function(e){e.v.forEach((function(e){var i=e[0];i<t.minTick&&(t.minTick=i),i>t.maxTick&&(t.maxTick=i)}))})),0===a.length&&(this.dataHashset[this.minTick]||(this.dataHashset[this.minTick]=[0]),this.dataHashset[this.maxTick]||(this.dataHashset[this.maxTick]=[0]),this.visibility.push(!1),this.visibleGtsId.push(-1)))}return this.parsing=!1,this.LOG.debug(["convert"],"end",i),this.noData=0===i.length,i},i.prototype.afterPlot=function(t){e.prototype.afterPlot.call(this,t),this.marginLeft=parseInt(this.graph.plotEl.nativeElement.querySelector("g.bglayer > rect").getAttribute("x"),10),this.LOG.debug(["plotly_afterPlot"]),this.chartBounds.tsmin!==this.minTick||this.chartBounds.tsmax!==this.maxTick?(this.chartBounds.tsmin=this.minTick,this.chartBounds.tsmax=this.maxTick,this.chartBounds.marginLeft=this.marginLeft,this.chartDraw.emit(this.chartBounds),(this.afterBoundsUpdate||this.standalone)&&(this.LOG.debug(["afterPlot","updateBounds"],this.minTick,this.maxTick),this.emitNewBounds(this.minTick,this.maxTick,this.marginLeft),this.loading=!1,this.afterBoundsUpdate=!1)):this.loading=!1},i.prototype.relayout=function(e){e["xaxis.range"]&&2===e["xaxis.range"].length?(this.LOG.debug(["relayout","updateBounds","xaxis.range"],e["xaxis.range"]),this.chartBounds.msmin=e["xaxis.range"][0],this.chartBounds.msmax=e["xaxis.range"][1],this.chartBounds.tsmin=S.tz(S(this.chartBounds.msmin),this._options.timeZone).valueOf()*this.divider,this.chartBounds.tsmax=S.tz(S(this.chartBounds.msmax),this._options.timeZone).valueOf()*this.divider):e["xaxis.range[0]"]&&e["xaxis.range[1]"]?(this.LOG.debug(["relayout","updateBounds","xaxis.range[x]"],e["xaxis.range[0]"]),this.chartBounds.msmin=e["xaxis.range[0]"],this.chartBounds.msmax=e["xaxis.range[1]"],this.chartBounds.tsmin=S.tz(S(this.chartBounds.msmin),this._options.timeZone).valueOf()*this.divider,this.chartBounds.tsmax=S.tz(S(this.chartBounds.msmax),this._options.timeZone).valueOf()*this.divider):e["xaxis.autorange"]&&(this.LOG.debug(["relayout","updateBounds","autorange"],e,this.minTick,this.maxTick),this.chartBounds.tsmin=this.minTick,this.chartBounds.tsmax=this.maxTick),this.LOG.debug(["relayout","updateBounds"],this.chartBounds),this.emitNewBounds(this.chartBounds.tsmin,this.chartBounds.tsmax,this.marginLeft),this.loading=!1,this.afterBoundsUpdate=!1},i.prototype.sliderChange=function(e){this.LOG.debug(["sliderChange"],e),console.log(e)},i.prototype.updateBounds=function(e,t){this.LOG.debug(["updateBounds"],e,t,this._options),e=e||this.minTick/this.divider,t=t||this.maxTick/this.divider,this.layout.xaxis.autorange=!1,this.LOG.debug(["updateBounds"],S.tz(e,this._options.timeZone).toISOString(),S.tz(t,this._options.timeZone).toISOString()),this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.range=[e,t],this.layout.xaxis.tick0=e):(this.layout.xaxis.range=[S.tz(e,this._options.timeZone).toISOString(),S.tz(t,this._options.timeZone).toISOString()],this.layout.xaxis.tick0=S.tz(e,this._options.timeZone).toISOString()),this.layout=O({},this.layout),this.LOG.debug(["updateBounds"],this.layout),this.afterBoundsUpdate=!0},i.prototype.setRealBounds=function(e){this.afterBoundsUpdate=!0,this.minTick=e.tsmin,this.maxTick=e.tsmax,this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=this.minTick,this._options.bounds.maxDate=this.maxTick;var t={tick0:void 0,range:[]};this._options.showRangeSelector&&(t.rangeslider={bgcolor:"transparent",thickness:40/this.height}),this._options.timeMode&&"timestamp"===this._options.timeMode?(t.tick0=this.minTick/this.divider,t.range=[this.minTick,this.maxTick]):(t.tick0=S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0),t.range=[S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0),S.tz(this.maxTick/this.divider,this._options.timeZone).toISOString(!0)]),this.layout.xaxis=t,this.layout=O({},this.layout)},i.prototype.hover=function(t){this.LOG.debug(["hover"],t);var i,a=Number.MAX_VALUE,n=[];if(this.toolTip.nativeElement.style.display="block",t.points[0]&&"h"!==t.points[0].data.orientation){var o=(t.yvals||[""])[0];t.points.forEach((function(e){n.push(e.curveNumber);var t=Math.abs(e.y-o);t<a&&(a=t,i=e)}))}else{var r=(t.xvals||[""])[0];t.points.forEach((function(e){n.push(e.curveNumber);var t=Math.abs(e.x-r);t<a&&(a=t,i=e)}))}i&&this.highlighted!==i.curveNumber&&(this.highliteCurve.next({on:[i.curveNumber],off:n}),this.highlighted=i.curveNumber),e.prototype.hover.call(this,t,i),this.pointHover.emit(t.event)},i.prototype.unhover=function(t){var i,a=Number.MAX_VALUE;if(t.points[0]&&"h"!==t.points[0].data.orientation){var n=(t.yvals||[""])[0];t.points.forEach((function(e){var t=Math.abs(e.y-n);t<a&&(a=t,i=e)}))}else{var o=(t.xvals||[""])[0];t.points.forEach((function(e){var t=Math.abs(e.x-o);t<a&&(a=t,i=e)}))}i&&this.highlighted!==i.curveNumber&&(this.unhighliteCurve.next([this.highlighted]),this.highlighted=void 0),e.prototype.unhover.call(this,t,i)},i.decorators=[{type:t.Component,args:[{selector:"warpview-chart",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <p class="noData" *ngIf="parsing">Parsing data</p>\n  <div *ngIf="!loading && !noData" >\n    <warpview-plotly #graph\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot($event)"\n                     (relayout)="relayout($event)" (hover)="hover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     (sliderChange)="sliderChange($event)" (unhover)="unhover($event)"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}:host .executionErrorText{color:red;padding:10px;border-radius:3px;background:#faebd7;position:absolute;top:-30px;border:2px solid red}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={hiddenData:[{type:t.Input,args:["hiddenData"]}],type:[{type:t.Input,args:["type"]}],standalone:[{type:t.Input,args:["standalone"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}]},i}(z);var Q=function(){function e(){var t=this;this.createHandleError=function(e){return void 0===e&&(e=""),function(i){return void 0===i&&(i="operation"),t.handleError(e,i)}},this.LOG=new N(e,!0)}return e.prototype.handleError=function(e,t){var i=this;return void 0===e&&(e=""),void 0===t&&(t="operation"),function(a){i.LOG.error([e],a),i.LOG.error([e],t+" failed: "+a.statusText);var n=(a.error||{}).message?a.error.message:a.status?a.statusText:"Server error";return i.LOG.error([e],n),l.of(n)}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}();var P=function(){function e(t,i){this.http=t,this.httpErrorHandler=i,this.LOG=new N(e,!0),this.handleError=i.createHandleError("Warp10Service")}return e.prototype.exec=function(e,t){var i=this;return this.LOG.debug(["exec","warpScript"],t,e),this.http.post(t,e,{observe:"response",responseType:"text"}).pipe(p.tap((function(e){return i.LOG.debug(["exec","result"],e)})),p.catchError(this.handleError("exec")))},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:c.HttpClient},{type:Q}]},e.ngInjectableDef=t.ÉµÉµdefineInjectable({factory:function(){return new e(t.ÉµÉµinject(c.HttpClient),t.ÉµÉµinject(Q))},token:e,providedIn:"root"}),e}();var W=function(e){function i(a,n,o,r,s){var p=e.call(this,a,o,n,r)||this;return p.el=a,p.sizeService=n,p.renderer=o,p.ngZone=r,p.warp10Service=s,p.warpscriptResult=new t.EventEmitter,p.execStatus=new t.EventEmitter,p.execError=new t.EventEmitter,p.type="line",p.url="",p.isAlone=!1,p.loaderMessage="",p.loading=!1,p._gtsFilter="",p._warpScript="",p.execUrl="",p.timeUnit="us",p.LOG=new N(i,p._debug),p}return L(i,e),Object.defineProperty(i.prototype,"gtsFilter",{set:function(e){this._gtsFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"warpscript",{get:function(){return this._warpScript},set:function(e){e&&this._warpScript!==e&&(this._warpScript=e,this.execute(!0))},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.ngAfterViewInit=function(){this._warpScript=this._warpScript||this.warpRef.nativeElement.textContent.trim(),this.LOG.debug(["ngAfterViewInit","warpScript"],this._warpScript),this.el.nativeElement.style.opacity="1",""!==this.warpRef.nativeElement.textContent.trim()&&this.execute(!1)},i.prototype.update=function(e){this.LOG.debug(["update","options"],e)},i.prototype.handleKeyDown=function(e){"r"===e.key&&this.execute(!1)},i.prototype.detectWarpScriptSpecialComments=function(){for(var e=/\s*\/\/\s*@(\w*)\s*(.*)$/g,t=this._warpScript.split("\n"),i=1;i<t.length;i++){var a=t[i];if(!(""===a||a.search("//")>=0))break;for(var n=void 0,o=RegExp(e);n=o.exec(a);){var r=n[1],s=n[2];switch(r){case"endpoint":this.execUrl=s;break;case"timeUnit":this.timeUnit=s.toLowerCase()}}}},i.prototype.execute=function(e){var t=this;this._warpScript&&""!==this._warpScript.trim()&&(this.LOG.debug(["execute"],e),this.error=void 0,this.loading=!e,this.execResult=void 0,this.loaderMessage="Requesting data",this.execUrl=this.url,this.detectWarpScriptSpecialComments(),this.LOG.debug(["execute","warpScript"],this._warpScript),this.warp10Service.exec(this._warpScript,this.execUrl).subscribe((function(e){if(t.loading=!1,t.LOG.debug(["execute"],e),e.body)try{var i=e.body;t.warpscriptResult.emit(i);var a=e.headers;t.status="Your script execution took\n "+V.formatElapsedTime(parseInt(a.get("x-warp10-elapsed"),10))+"\n serverside, fetched\n "+a.get("x-warp10-fetched")+" datapoints and performed\n "+a.get("x-warp10-ops")+"  WarpScript operations.",t.execStatus.emit({message:t.status,ops:parseInt(a.get("x-warp10-ops"),10),elapsed:parseInt(a.get("x-warp10-elapsed"),10),fetched:parseInt(a.get("x-warp10-fetched"),10)}),t._autoRefresh!==t._options.autoRefresh&&(t._autoRefresh=t._options.autoRefresh,t.timer&&window.clearInterval(t.timer),t._autoRefresh&&t._autoRefresh>0&&(t.timer=window.setInterval((function(){return t.execute(!0)}),1e3*t._autoRefresh))),setTimeout((function(){t.execResult=i,t.loading=!1}))}catch(e){t.LOG.error(["execute"],e),t.loading=!1}else t.LOG.error(["execute"],e),t.error=e,t.loading=!1,t.execError.emit(e)}),(function(e){t.loading=!1,t.execError.emit(e),t.LOG.error(["execute"],e)})))},i.prototype.convert=function(e){return[]},i.prototype.chartDrawn=function(e){this.chartDraw.emit(e)},i.decorators=[{type:t.Component,args:[{selector:"warpview-tile",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n<div class="wrapper" [ngClass]="{\'full\':  responsive}">\n  <div class="tilewrapper">\n    <h1 *ngIf="chartTitle">{{chartTitle}}</h1>\n    <div [ngClass]="{\'tile\': true,\'notitle\':  !chartTitle || chartTitle === \'\'}">\n      <warpview-spinner *ngIf="loading" message="Requesting data"></warpview-spinner>\n      <div *ngIf="_options.showErrors && error" style="height: calc(100% - 30px); width: 100%">\n        <warpview-display [responsive]="true" [debug]="debug" [options]="_options"\n                          [data]="{ data: error,  globalParams: {\n  timeMode:  \'custom\', bgColor: \'#D32C2E\', fontColor: \'#ffffff\'}}"></warpview-display>\n      </div>\n      <div *ngIf="!error" style="height: 100%; width: 100%" [hidden]="loading">\n        <warpview-result-tile [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                              (chartDraw)="chartDrawn($event)"\n                              [showLegend]="showLegend" [data]="execResult"></warpview-result-tile>\n      </div>\n    </div>\n  </div>\n  <small *ngIf="_options.showStatus" class="status">{{status}}</small>\n</div>\n\n<div #warpRef style="display: none">\n  <ng-content></ng-content>\n</div>\n',providers:[Q],styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host,warp-view-tile,warpview-tile{width:var(--warp-view-tile-width,100%);max-height:var(--warp-view-tile-height,100%);overflow:auto;min-width:var(--warp-view-tile-width,100%);min-height:var(--warp-view-tile-height,100%)}:host .error,warp-view-tile .error,warpview-tile .error{width:100%;text-align:center;color:#dc3545;font-weight:700}:host .wrapper,warp-view-tile .wrapper,warpview-tile .wrapper{opacity:1;min-height:50px;width:var(--warp-view-tile-width,100%);height:var(--warp-view-tile-height,100%)}:host .wrapper .status,warp-view-tile .wrapper .status,warpview-tile .wrapper .status{position:absolute;z-index:999;bottom:20px;background-color:rgba(255,255,255,.7);padding:1px 5px;font-size:11px;color:#000}:host .wrapper.full,warp-view-tile .wrapper.full,warpview-tile .wrapper.full{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;justify-content:space-around}:host .wrapper .tilewrapper,warp-view-tile .wrapper .tilewrapper,warpview-tile .wrapper .tilewrapper{width:100%;height:100%}:host .wrapper .tilewrapper .tile,warp-view-tile .wrapper .tilewrapper .tile,warpview-tile .wrapper .tilewrapper .tile{width:100%;height:calc(var(--warp-view-tile-height,100%) - 40px);overflow-y:auto;overflow-x:hidden;position:relative}:host .wrapper .tilewrapper .notitle,warp-view-tile .wrapper .tilewrapper .notitle,warpview-tile .wrapper .tilewrapper .notitle{height:100%}:host .wrapper .tilewrapper h1,warp-view-tile .wrapper .tilewrapper h1,warpview-tile .wrapper .tilewrapper h1{font-size:20px;padding:5px;margin:0;color:var(--warp-view-font-color)}:host .wrapper .tilewrapper h1 small,warp-view-tile .wrapper .tilewrapper h1 small,warpview-tile .wrapper .tilewrapper h1 small{font-size:10px;margin-left:10px}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:M},{type:t.Renderer2},{type:t.NgZone},{type:P}]},i.propDecorators={warpRef:[{type:t.ViewChild,args:["warpRef",{static:!0}]}],warpscriptResult:[{type:t.Output,args:["warpscriptResult"]}],execStatus:[{type:t.Output,args:["execStatus"]}],execError:[{type:t.Output,args:["execError"]}],type:[{type:t.Input,args:["type"]}],chartTitle:[{type:t.Input,args:["chartTitle"]}],url:[{type:t.Input,args:["url"]}],isAlone:[{type:t.Input,args:["isAlone"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],warpscript:[{type:t.Input}],handleKeyDown:[{type:t.HostListener,args:["document:keyup",["$event"]]}]},i}(z);var K=function(){function e(){this.message="Loading and parsing data..."}return e.decorators=[{type:t.Component,args:[{selector:"warpview-spinner",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper">\n  <div class="lds-ring">\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n  <h2>{{message}}</h2>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host .wrapper{position:relative;width:100%;height:100%;min-height:230px}:host .wrapper h2{text-align:center;display:inline-block;position:absolute;width:50%;height:64px;margin:auto;bottom:0;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}:host .wrapper .lds-ring{display:inline-block;position:absolute;width:64px;height:64px;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}:host .wrapper .lds-ring div{box-sizing:border-box;display:block;position:absolute;width:51px;height:51px;margin:6px;border:6px solid;border-radius:50%;-webkit-animation:1.2s cubic-bezier(.5,0,.5,1) infinite lds-ring;animation:1.2s cubic-bezier(.5,0,.5,1) infinite lds-ring;border-color:var(--warp-view-spinner-color) transparent transparent transparent}:host .wrapper .lds-ring div:nth-child(1){-webkit-animation-delay:-.45s;animation-delay:-.45s}:host .wrapper .lds-ring div:nth-child(2){-webkit-animation-delay:-.3s;animation-delay:-.3s}:host .wrapper .lds-ring div:nth-child(3){-webkit-animation-delay:-.15s;animation-delay:-.15s}@-webkit-keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes lds-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}']}]}],e.propDecorators={message:[{type:t.Input,args:["message"]}]},e}();var j=function(){function e(e){this.el=e,this.text1="",this.text2="",this.stateChange=new t.EventEmitter,this.state=!1}return Object.defineProperty(e.prototype,"checked",{get:function(){return this.state},set:function(e){this.state=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.state=this.checked},e.prototype.switched=function(){this.state=!this.state,this.stateChange.emit({state:this.state,id:this.el.nativeElement.id})},e.decorators=[{type:t.Component,args:[{selector:"warpview-toggle",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="container">\n  <div class="text">{{text1}}</div>\n  <label class="switch">\n    <input type="checkbox" class="switch-input" [checked]="state" (click)="switched()"/>\n    <span class="switch-label"></span>\n    <span class="switch-handle"></span>\n  </label>\n  <div class="text">{{text2}}</div>\n</div>\n',styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host .switch{position:relative;margin-top:auto;margin-bottom:auto;display:block;width:var(--warp-view-switch-width);height:var(--warp-view-switch-height);padding:3px;border-radius:var(--warp-view-switch-radius);cursor:pointer}:host .switch-input{display:none}:host .switch-label{position:relative;display:block;height:inherit;text-transform:uppercase;background:var(--warp-view-switch-inset-color);border-radius:inherit;box-shadow:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15)}:host .switch-input:checked~.switch-label{background:var(--warp-view-switch-inset-checked-color);box-shadow:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}:host .switch-handle{position:absolute;top:4px;left:4px;width:calc(var(--warp-view-switch-height) - 2px);height:calc(var(--warp-view-switch-height) - 2px);background:var(--warp-view-switch-handle-color);border-radius:100%;box-shadow:1px 1px 5px rgba(0,0,0,.2)}:host .switch-input:checked~.switch-handle{left:calc(var(--warp-view-switch-width) - var(--warp-view-switch-height) - 2px);background:var(--warp-view-switch-handle-checked-color);box-shadow:-1px 1px 5px rgba(0,0,0,.2)}:host .switch-handle,:host .switch-label{-webkit-transition:All .3s;transition:All .3s;-moz-transition:All .3s;-o-transition:All .3s}:host .container{display:-webkit-box;display:flex}:host .text{color:var(--warp-view-font-color);padding:7px}']}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={checked:[{type:t.Input,args:["checked"]}],text1:[{type:t.Input,args:["text1"]}],text2:[{type:t.Input,args:["text2"]}],stateChange:[{type:t.Output,args:["stateChange"]}]},e}();var q=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},yaxis:{exponentformat:"none",fixedrange:!0,showline:!0},margin:{t:10,b:40,r:10,l:50}},r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},i.prototype.convert=function(e){var t=this,i=[];V.isArray(e.data)?(e.data=V.flatDeep(e.data),this.LOG.debug(["convert","isArray"]),e.data.length>0&&V.isGts(e.data[0])?(this.LOG.debug(["convert","isArray 2"]),i=V.flattenGtsIdArray(e.data,0).res):(this.LOG.debug(["convert","isArray 3"]),i=e.data)):(this.LOG.debug(["convert","not array"]),i=[e.data]),this.LOG.debug(["convert","gtsList"],i);var a=[];return i.forEach((function(i,n){if(t.LOG.debug(["convert","gts item"],i),i.v){F.sort(i.v,(function(e,t){return e[0]-t[0]}));var o=V.serializeGtsMetadata(i),r=_.getColor(i.id||n,t._options.scheme),s=((e.params||[])[n]||{datasetColor:r}).datasetColor||r,p={type:"bar",mode:"lines+markers",name:o,text:o,orientation:t._options.horizontal?"h":"v",x:[],y:[],hoverinfo:"none",marker:{color:_.transparentize(s),line:{color:s,width:1}}};i.v.forEach((function(e){var i=e[0];t._options.horizontal?(p.x.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?p.y.push(i):p.y.push(S.tz(S.utc(i/t.divider),t._options.timeZone).toISOString())):(p.y.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?p.x.push(i):p.x.push(S.tz(S.utc(i/t.divider),t._options.timeZone).toISOString()))})),a.push(p)}else t._options.timeMode="custom",t.LOG.debug(["convert","gts"],i),(i.columns||[]).forEach((function(n,o){var r=_.getColor(i.id||o,t._options.scheme),s=((e.params||[])[o]||{datasetColor:r}).datasetColor||r,p={type:"bar",mode:"lines+markers",name:n,text:n,orientation:t._options.horizontal?"h":"v",x:[],y:[],hoverinfo:"none",marker:{color:_.transparentize(s),line:{color:s,width:1}}};t._options.horizontal?(i.rows||[]).forEach((function(e){p.y.unshift(e[0]),p.x.push(e[o+1])})):(i.rows||[]).forEach((function(e){p.x.push(e[0]),p.y.push(e[o+1])})),a.push(p)}))})),this.LOG.debug(["convert","dataset"],a,this._options.horizontal),a},i.prototype.buildGraph=function(){this.LOG.debug(["buildGraph","this.layout"],this.responsive),this.LOG.debug(["buildGraph","this.layout"],this.layout),this.LOG.debug(["buildGraph","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this._showLegend,this.layout.barmode=this._options.stacked?"stack":"group",this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},i.decorators=[{type:t.Component,args:[{selector:"warpview-bar",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display or wrong data format.</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                 [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                 className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                 [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                 [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host .modebar-group path{fill:var(--warp-view-font-color)}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i}(z);var J=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},hovermode:"closest",hoverdistance:20,yaxis:{},margin:{t:10,b:25,r:10,l:50}},r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},i.prototype.convert=function(e){var t=this,i=[];return V.flatDeep(e.data).forEach((function(a,n){var o=Object.keys(a)[0],r=_.getColor(a.id||n,t._options.scheme),s=((e.params||[])[n]||{datasetColor:r}).datasetColor||r,p={type:"scattergl",mode:"markers",name:o,text:o,x:[],y:[],hoverinfo:"none",marker:{color:_.transparentize(s),line:{color:s},size:[]}};if(V.isGts(a)){var l=a.v.map((function(e){return e[0]})),c=a.v.map((function(e){return e[e.length-1]})),h=new Array(a.v.length).fill(10);"timestamp"===t._options.timeMode?p.x=l:"UTC"!==t._options.timeZone?p.x=l.map((function(e){return S.utc(e/t.divider).tz(t._options.timeZone).toISOString()})):p.x=l.map((function(e){return S.utc(e/t.divider).toISOString()})),p.y=c,p.marker.size=h}else a[o].forEach((function(e){p.y.push(e[0]),p.x.push(e[1]),p.marker.size.push(e[2])}));i.push(p)})),this.noData=0===i.length,this.LOG.debug(["convert","dataset"],i),i},i.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.responsive"],this._responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},i.decorators=[{type:t.Component,args:[{selector:"warpview-bubble",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display or wrong data format.</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                 [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                 className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                 [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                 [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i}(z);var X=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.elemsCount=15,r._tabularData=[],r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.loading=!1,this.chartDraw.emit(),this.initChart(this.el)},i.prototype.getHeaderParam=function(e,t,i,a){return this._data.params&&this._data.params[e]&&this._data.params[e][i]&&this._data.params[e][i][t]?this._data.params[e][i][t]:this._data.globalParams&&this._data.globalParams[i]&&this._data.globalParams[i][t]?this._data.globalParams[i][t]:a},i.prototype.convert=function(e){if(V.isArray(e.data)){var t=V.flatDeep(this._data.data);this.LOG.debug(["convert","isArray"],t),e.data.length>0&&V.isGts(t[0])?this._tabularData=this.parseData(t):this._tabularData=this.parseCustomData(t)}else this._tabularData=this.parseCustomData([e.data]);return[]},i.prototype.parseCustomData=function(e){var t=[];return e.forEach((function(e){var i={name:e.title||"",values:e.rows,headers:e.columns};t.push(i)})),this.LOG.debug(["parseCustomData","flatData"],t),t},i.prototype.parseData=function(e){var t=this,i=[];return this.LOG.debug(["parseData"],e),e.forEach((function(e,a){var n={name:"",values:[],headers:[]};V.isGts(e)?(t.LOG.debug(["parseData","isGts"],e),n.name=V.serializeGtsMetadata(e),n.values=e.v.map((function(e){return[t.formatDate(e[0])].concat(e.slice(1,e.length))}))):(t.LOG.debug(["parseData","is not a Gts"],e),n.values=V.isArray(e)?e:[e]),n.headers=[t.getHeaderParam(a,0,"headers","Date")],e.v&&e.v.length>0&&e.v[0].length>2&&n.headers.push(t.getHeaderParam(a,1,"headers","Latitude")),e.v&&e.v.length>0&&e.v[0].length>3&&n.headers.push(t.getHeaderParam(a,2,"headers","Longitude")),e.v&&e.v.length>0&&e.v[0].length>4&&n.headers.push(t.getHeaderParam(a,3,"headers","Elevation")),e.v&&e.v.length>0&&n.headers.push(t.getHeaderParam(a,e.v[0].length-1,"headers","Value")),n.values.length>0&&i.push(n)})),this.LOG.debug(["parseData","flatData"],i,this._options.timeMode),i},i.prototype.formatDate=function(e){return"date"===this._options.timeMode?S.tz(e/this.divider,this._options.timeZone).toISOString():e.toString()},i.decorators=[{type:t.Component,args:[{selector:"warpview-datagrid",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper" style="overflow: auto; height: 100%">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-paginable\n      *ngFor="let data of _tabularData"\n      [data]="data" [options]="_options"\n      [debug]="debug"></warpview-paginable>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={elemsCount:[{type:t.Input,args:["elemsCount"]}]},i}(z);var Z=function(){function e(){this.elemsCount=15,this.windowed=5,this.page=0,this.pages=[],this.displayedValues=[],this._debug=!1,this._options=O({},new B,{timeMode:"date",timeZone:"UTC",timeUnit:"us",bounds:{}}),this.LOG=new N(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){n(e,this._options)||this.drawGridData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(e){e&&(this._data=e,this.drawGridData())},enumerable:!0,configurable:!0}),e.prototype.goto=function(e){this.page=e,this.drawGridData()},e.prototype.next=function(){this.page=Math.min(this.page+1,this._data.values.length-1),this.drawGridData()},e.prototype.prev=function(){this.page=Math.max(this.page-1,0),this.drawGridData()},e.prototype.drawGridData=function(){if(this._options=U.mergeDeep(this._options,this.options),this.LOG.debug(["drawGridData","_options"],this._options),this._data){this.pages=[];for(var e=0;e<(this._data.values||[]).length/this.elemsCount;e++)this.pages.push(e);this.displayedValues=(this._data.values||[]).slice(Math.max(0,this.elemsCount*this.page),Math.min(this.elemsCount*(this.page+1),(this._data.values||[]).length)),this.LOG.debug(["drawGridData","_data"],this._data)}},e.prototype.decodeURIComponent=function(e){return decodeURIComponent(e)},e.prototype.ngOnInit=function(){this.drawGridData()},e.prototype.formatLabel=function(e){return V.formatLabel(e)},e.decorators=[{type:t.Component,args:[{selector:"warpview-paginable",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n  <div class="heading" [innerHTML]="formatLabel(_data.name)"></div>\n  <table>\n    <thead>\n    <th *ngFor="let h of _data.headers">{{h}}</th>\n    </thead>\n    <tbody>\n    <tr *ngFor="let value of displayedValues; even as isEven; odd as isOdd" [ngClass]="{ odd: isOdd, even: isEven}">\n      <td *ngFor="let v of value">\n        <span [innerHTML]="v"></span>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n  <div class="center">\n    <div class="pagination">\n      <div class="prev hoverable" (click)="prev()" *ngIf="page !== 0">&lt;</div>\n      <div class="index disabled" *ngIf="page - windowed > 0">...</div>\n      <span *ngFor="let c of pages">\n        <span *ngIf=" c >= page - windowed && c <= page + windowed"\n             [ngClass]="{ index: true, hoverable: page !== c, active: page === c}" (click)="goto(c)">{{c}}</span>\n      </span>\n      <div class="index disabled" *ngIf="page + windowed < pages.length">...</div>\n      <div class="next hoverable" (click)="next()" *ngIf="page + windowed < (_data.values ||Â []).length - 1">&gt;</div>\n    </div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host table{width:100%;color:var(--warp-view-font-color)}:host table td,:host table th{padding:var(--warp-view-datagrid-cell-padding)}:host table .odd{background-color:var(--warp-view-datagrid-odd-bg-color);color:var(--warp-view-datagrid-odd-color)}:host table .even{background-color:var(--warp-view-datagrid-even-bg-color);color:var(--warp-view-datagrid-even-color)}:host .center{text-align:center}:host .center .pagination{display:inline-block}:host .center .pagination .index,:host .center .pagination .next,:host .center .pagination .prev{color:var(--warp-view-font-color);float:left;padding:8px 16px;text-decoration:none;-webkit-transition:background-color .3s;transition:background-color .3s;border:1px solid var(--warp-view-pagination-border-color);margin:0;cursor:pointer;background-color:var(--warp-view-pagination-bg-color)}:host .center .pagination .index.active,:host .center .pagination .next.active,:host .center .pagination .prev.active{background-color:var(--warp-view-pagination-active-bg-color);color:var(--warp-view-pagination-active-color);border:1px solid var(--warp-view-pagination-active-border-color)}:host .center .pagination .index.hoverable:hover,:host .center .pagination .next.hoverable:hover,:host .center .pagination .prev.hoverable:hover{background-color:var(--warp-view-pagination-hover-bg-color);color:var(--warp-view-pagination-hover-color);border:1px solid var(--warp-view-pagination-hover-border-color)}:host .center .pagination .index.disabled,:host .center .pagination .next.disabled,:host .center .pagination .prev.disabled{cursor:auto;color:var(--warp-view-pagination-disabled-color)}:host .gts-classname{color:var(--gts-classname-font-color,#0074d9)}:host .gts-labelname{color:var(--gts-labelname-font-color,#19a979)}:host .gts-attrname{color:var(--gts-labelname-font-color,#ed4a7b)}:host .gts-separator{color:var(--gts-separator-font-color,#bbb)}:host .gts-labelvalue{color:var(--gts-labelvalue-font-color,#aaa);font-style:italic}:host .gts-attrvalue{color:var(--gts-labelvalue-font-color,#aaa);font-style:italic}:host .round{border-radius:50%;background-color:#bbb;display:inline-block;width:12px;height:12px;border:2px solid #454545}:host ul{list-style:none}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={debug:[{type:t.Input,args:["debug"]}],options:[{type:t.Input,args:["options"]}],data:[{type:t.Input,args:["data"]}],elemsCount:[{type:t.Input,args:["elemsCount"]}],windowed:[{type:t.Input,args:["windowed"]}]},e}();var $=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.toDisplay="",r.defOptions={timeMode:"custom"},r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.ngOnDestroy=function(){this.timer&&clearInterval(this.timer)},i.prototype.update=function(e,t){this.drawChart(),this.flexFont()},i.prototype.drawChart=function(){this.LOG.debug(["drawChart"],this._options,this.defOptions),this.initChart(this.el),this._options=U.mergeDeep(this.defOptions,this._options),this.LOG.debug(["drawChart","afterInit"],this._options,this.defOptions,this.height),this.LOG.debug(["drawChart"],this._data,this.toDisplay),this.flexFont(),this.chartDraw.emit()},i.prototype.convert=function(e){var t;switch(this._options=U.mergeDeep(this.defOptions,this._options),this.LOG.debug(["convert"],this._options.timeMode),t=this._data.data?V.isArray(this._data.data)?this._data.data[0]:this._data.data:V.isArray(this._data)?this._data[0]:this._data,this._options.timeMode){case"date":this.toDisplay=S.tz(parseInt(t,10)/this.divider,this._options.timeZone).toISOString(!0);break;case"duration":var i=S.tz(parseInt(t,10)/this.divider,this._options.timeZone);this.displayDuration(i);break;case"custom":case"timestamp":this.toDisplay=t}return[]},i.prototype.getStyle=function(){if(this._options){var e={"background-color":this._options.bgColor||"transparent"};return this._options.fontColor&&(e.color=this._options.fontColor),e}return{}},i.prototype.flexFont=function(){this.wrapper&&(this.LOG.debug(["flexFont"],this.height),this.fitties&&this.fitties.unsubscribe(),this.fitties=h(this.wrapper.nativeElement,{maxSize:.8*this.el.nativeElement.parentElement.clientHeight,minSize:14}),this.LOG.debug(["flexFont"],"ok",this.el.nativeElement.parentElement.clientHeight),this.fitties.fit(),this.loading=!1)},i.prototype.displayDuration=function(e){var t=this;this.timer=setInterval((function(){var i=S();t.toDisplay=S.duration(e.diff(i)).humanize(!0)}),1e3)},i.decorators=[{type:t.Component,args:[{selector:"warpview-display",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="chart-container" (resized)="flexFont()" [ngStyle]="getStyle()">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <div class="value" #wrapper [hidden]="loading">\n    <span [innerHTML]="toDisplay"></span><small>{{unit}}</small>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host{width:var(--warp-view-chart-width,100%);height:var(--warp-view-chart-height,100%);color:var(--warp-view-font-color);position:relative;overflow:hidden}:host .chart-container{text-align:center;height:calc(100% - 20px);width:100%;justify-items:stretch;min-height:100%;-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex;overflow:hidden}:host .chart-container .value{padding:10px;text-align:center;white-space:nowrap;overflow:hidden;display:inline-block;vertical-align:middle;-ms-grid-row-align:center;align-self:center}:host .chart-container .value span{min-height:100%}:host .chart-container .value small{font-size:.5em}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={wrapper:[{type:t.ViewChild,args:["wrapper",{static:!0}]}]},i}(z);var ee=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.parentWidth=-1,r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.ngAfterViewInit=function(){this.drawChart()},i.prototype.update=function(e,t){this.drawChart()},i.prototype.onResize=function(){var e=this;(this.el.nativeElement.parentElement.clientWidth!==this.parentWidth||this.parentWidth<=0)&&(this.parentWidth=this.el.nativeElement.parentElement.clientWidth,clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){e.el.nativeElement.parentElement.clientWidth>0?(e.LOG.debug(["onResize"],e.el.nativeElement.parentElement.clientWidth),e.drawChart()):e.onResize()}),150))},i.prototype.drawChart=function(){this.loading=!1,this.chartDraw.emit(),this.initChart(this.el)},i.prototype.convert=function(e){var t=this._data.data;return this.heatMapData=this.parseData(V.flatDeep(t)),[]},i.prototype.parseData=function(e){var t=this,i=[],a=[],n=[],o={},r=function(e,t){return e+parseInt(t,10)};return this.LOG.debug(["parseData"],e),e.forEach((function(e,i){var r=V.serializeGtsMetadata(e);e.v.forEach((function(e){var s=d.utc(e[0]/1e3).startOf("day").toISOString();o[s]||(o[s]=[]),a[s]||(a[s]=[]),n.push(e[0]/1e3),a[s].push(e[e.length-1]),o[s].push({name:r,date:e[0]/1e3,value:e[e.length-1],color:_.getColor(i,t._options.scheme),id:i})}))})),Object.keys(o).forEach((function(e){i.push({date:d.utc(e),total:a[e].reduce(r),details:o[e],summary:[]})})),i},i.decorators=[{type:t.Component,args:[{selector:"warpview-drill-down",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <calendar-heatmap [data]="heatMapData" overview="global"\n                      [debug]="debug"\n                      [minColor]="_options.minColor"\n                      [maxColor]="_options.maxColor"></calendar-heatmap>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host .wrapper{position:relative;width:100%;height:100%}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={onResize:[{type:t.HostListener,args:["window:resize"]}]},i}(z);var te=function(){};var ie=function(){function e(i){this.el=i,this.width=U.DEFAULT_WIDTH,this.height=U.DEFAULT_HEIGHT,this.overview="global",this.handler=new t.EventEmitter,this.change=new t.EventEmitter,this._debug=!1,this._minColor=e.DEF_MIN_COLOR,this._maxColor=e.DEF_MAX_COLOR,this.gutter=5,this.gWidth=1e3,this.gHeight=200,this.itemSize=10,this.labelPadding=40,this.transitionDuration=250,this.inTransition=!1,this.tooltipWidth=450,this.tooltipPadding=15,this.history=["global"],this.selected=new te,this.parentWidth=-1,this.getTooltip=function(e){var t='<div class="header"><strong>'+e.date.format("dddd, MMM Do YYYY HH:mm")+"</strong></div><ul>";return(e.summary||[]).forEach((function(e){t+='<li>\n  <div class="round" style="background-color:'+_.transparentize(e.color)+"; border-color:"+e.color+'"></div>\n'+V.formatLabel(e.name)+": "+e.total+"</li>"})),void 0!==e.total&&e.name&&(t+='<li><div class="round"\nstyle="background-color: '+_.transparentize(e.color)+"; border-color: "+e.color+'"\n></div> '+V.formatLabel(e.name)+": "+e.total+"</li>"),t+="</ul>"},this.LOG=new N(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.LOG.debug(["data"],e),e&&(this._data=e,this.calculateDimensions())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minColor",{get:function(){return this._minColor},set:function(e){this._minColor=e,this.calculateDimensions()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColor",{get:function(){return this._maxColor},set:function(e){this._maxColor=e,this.calculateDimensions()},enumerable:!0,configurable:!0}),e.getNumberOfWeeks=function(){var e=Math.round((+d.utc()-+d.utc().subtract(1,"year").startOf("week"))/864e5);return Math.trunc(e/7)+1},e.prototype.onResize=function(){this.el.nativeElement.parentElement.clientWidth!==this.parentWidth&&this.calculateDimensions()},e.prototype.ngAfterViewInit=function(){this.chart=this.div.nativeElement,this.svg=u.select(this.chart).append("svg").attr("class","svg"),this.items=this.svg.append("g"),this.labels=this.svg.append("g"),this.buttons=this.svg.append("g"),this.tooltip=u.select(this.chart).append("div").attr("class","heatmap-tooltip").style("opacity",0),this.calculateDimensions()},e.prototype.calculateDimensions=function(){var t=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){0!==t.el.nativeElement.parentElement.clientWidth?(t.gWidth=t.chart.clientWidth<1e3?1e3:t.chart.clientWidth,t.itemSize=(t.gWidth-t.labelPadding)/e.getNumberOfWeeks()-t.gutter,t.gHeight=t.labelPadding+7*(t.itemSize+t.gutter),t.svg.attr("width",t.gWidth).attr("height",t.gHeight),t.LOG.debug(["calculateDimensions"],t._data),t._data&&t._data[0]&&t._data[0].summary&&t.drawChart()):t.calculateDimensions()}),250)},e.prototype.groupBy=function(e,t){return e.reduce((function(e,i){return(e[i[t]]=e[i[t]]||[]).push(i),e}),{})},e.prototype.updateDataSummary=function(){this._data[0].summary||this._data.map((function(e){var t=e.details.reduce((function(e,t){return e[t.name]?e[t.name].value+=t.value:e[t.name]={value:t.value},e}),{}),i=Object.keys(t).map((function(e){return{name:e,total:t[e].value}}));return e.summary=i.sort((function(e,t){return t.total-e.total})),e}))},e.prototype.drawChart=function(){if(this.svg&&this._data)switch(this.LOG.debug(["drawChart"],[this.overview,this.selected]),this.overview){case"global":this.drawGlobalOverview(),this.change.emit({overview:this.overview,start:d(this._data[0].date),end:d(this._data[this._data.length-1].date)});break;case"year":this.drawYearOverview(),this.change.emit({overview:this.overview,start:d(this.selected.date).startOf("year"),end:d(this.selected.date).endOf("year")});break;case"month":this.drawMonthOverview(),this.change.emit({overview:this.overview,start:d(this.selected.date).startOf("month"),end:d(this.selected.date).endOf("month")});break;case"week":this.drawWeekOverview(),this.change.emit({overview:this.overview,start:d(this.selected.date).startOf("week"),end:d(this.selected.date).endOf("week")});break;case"day":this.drawDayOverview(),this.change.emit({overview:this.overview,start:d(this.selected.date).startOf("day"),end:d(this.selected.date).endOf("day")})}},e.prototype.drawGlobalOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=d.utc(this._data[0].date.startOf("y")),a=d.utc(this._data[this._data.length-1].date.endOf("y")),n=this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")}));n.forEach((function(e){var i=[],a=t.groupBy(e.details,"name");Object.keys(a).forEach((function(e){i.push({name:e,total:a[e].reduce((function(e,t){return e+t.value}),0),color:a[e][0].color,id:a[e][0].id})})),e.summary=i}));for(var o=Math.ceil(d.duration(a.diff(i)).asYears()),r=[],s=0;s<o;s++){var p=d.utc().year(i.year()+s).month(0).date(1).startOf("y");r.push(p)}var l=n.map((function(e){var t,i=e.date;return{date:i,total:n.reduce((function(e,t){return t.date.year()===i.year()&&(e+=t.total),e}),0),summary:(t=n.reduce((function(e,t){return t.date.year()===i.year()&&t.summary.forEach((function(t){e[t.name]?e[t.name].total+=t.total:e[t.name]={total:t.total,color:t.color}})),e}),{}),Object.keys(t).map((function(e){return{name:e,total:t[e].total,color:t[e].color}})).sort((function(e,t){return t.total-e.total})))}}));l=V.cleanArray(l);var c=g.max(l,(function(e){return e.total})),h=r.map((function(e){return e})),u=g.scaleBand().rangeRound([0,this.gWidth]).padding(.05).domain(h.map((function(e){return e.year().toString()}))),w=g.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*c,c]);this.items.selectAll(".item-block-year").remove(),this.items.selectAll(".item-block-year").data(l).enter().append("rect").attr("class","item item-block-year").attr("width",(function(){return(t.gWidth-t.labelPadding)/h.length-5*t.gutter})).attr("height",(function(){return t.gHeight-t.labelPadding})).attr("transform",(function(e){return"translate("+u(e.date.year().toString())+","+2*t.tooltipPadding+")"})).attr("fill",(function(t){return w(t.total)||e.DEF_MAX_COLOR})).on("click",(function(e){t.inTransition||(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeGlobalOverview(),t.overview="year",t.drawChart())})).style("opacity",0).on("mouseover",(function(e){if(!t.inTransition){for(var i=u(e.date.year().toString())+2*t.tooltipPadding;t.gWidth-i<t.tooltipWidth+5*t.tooltipPadding;)i-=10;var a=4*t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(g.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).transition().delay((function(e,i){return t.transitionDuration*(i+1)/10})).duration((function(){return t.transitionDuration})).ease(g.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-year").remove(),this.labels.selectAll(".label-year").data(h).enter().append("text").attr("class","label label-year").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e.year()})).attr("x",(function(e){return u(e.year().toString())})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block-year").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(t){return t.date.year()===e.year()?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-year").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})).on("click",(function(){t.inTransition||(t.inTransition=!0,t.selected=l[0],t.hideTooltip(),t.removeGlobalOverview(),t.overview="year",t.drawChart())}))},e.prototype.drawYearOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=d(this.selected.date).startOf("year"),a=d(this.selected.date).endOf("year"),n=this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")}));n.forEach((function(e){var i=[],a=t.groupBy(e.details,"name");Object.keys(a).forEach((function(e){i.push({name:e,total:a[e].reduce((function(e,t){return e+t.value}),0),color:a[e][0].color,id:a[e][0].id})})),e.summary=i})),n=V.cleanArray(n);var o=g.max(n,(function(e){return e.total})),r=g.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*o,o]);this.items.selectAll(".item-circle").remove(),this.items.selectAll(".item-circle").data(n).enter().append("rect").attr("class","item item-circle").style("opacity",0).attr("x",(function(e){return t.calcItemX(e,i)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("rx",(function(e){return t.calcItemSize(e,o)})).attr("ry",(function(e){return t.calcItemSize(e,o)})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).attr("fill",(function(e){return e.total>0?r(e.total):"transparent"})).on("click",(function(e){t.inTransition||0!==e.total&&(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeYearOverview(),t.overview="day",t.drawChart())})).on("mouseover",(function(e){if(!t.inTransition){var a=u.select(u.event.currentTarget),n=function(){a.transition().duration(t.transitionDuration).ease(g.easeLinear).attr("x",(function(e){return t.calcItemX(e,i)-(1.1*t.itemSize-t.itemSize)/2})).attr("y",(function(e){return t.calcItemY(e)-(1.1*t.itemSize-t.itemSize)/2})).attr("width",1.1*t.itemSize).attr("height",1.1*t.itemSize).transition().duration(t.transitionDuration).ease(g.easeLinear).attr("x",(function(e){return t.calcItemX(e,i)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).on("end",n)};n();var r=t.calcItemX(e,i)+t.itemSize/2;t.gWidth-r<t.tooltipWidth+3*t.tooltipPadding&&(r-=t.tooltipWidth+2*t.tooltipPadding);var s=t.calcItemY(e)+t.itemSize/2;t.tooltip.html(t.getTooltip(e)).style("left",r+"px").style("top",s+"px").transition().duration(t.transitionDuration/2).ease(g.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||(u.select(u.event.currentTarget).transition().duration(t.transitionDuration/2).ease(g.easeLinear).attr("x",(function(e){return t.calcItemX(e,i)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})),t.hideTooltip())})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(g.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1}));for(var s=Math.ceil(d.duration(a.diff(i)).asMonths()),p=[],l=1;l<s;l++)p.push(d(this.selected.date).month((i.month()+l)%12).startOf("month"));var c=g.scaleLinear().range([0,this.gWidth]).domain([0,p.length]);this.labels.selectAll(".label-month").remove(),this.labels.selectAll(".label-month").data(p).enter().append("text").attr("class","label label-month").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e.format("MMM")})).attr("x",(function(e,t){return c(t)+(c(t)-c(t-1))/2})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){if(!t.inTransition){var i=d(e);t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(e){return d(e.date).isSame(i,"month")?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})).on("click",(function(e){t.inTransition||t._data.filter((function(t){return t.date.isBetween(d(e).startOf("month"),d(e).endOf("month"),null,"[]")})).length&&(t.selected={date:e},t.inTransition=!0,t.hideTooltip(),t.removeYearOverview(),t.overview="month",t.drawChart())}));var h=g.timeDays(d.utc().startOf("week").toDate(),d.utc().endOf("week").toDate()),w=g.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(h.map((function(e){return d.utc(e).weekday().toString()})));this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-day").data(h).enter().append("text").attr("class","label label-day").attr("x",this.labelPadding/3).attr("y",(function(e,t){return w(t.toString())+w.bandwidth()/1.75})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return d.utc(e).format("dddd")[0]})).on("mouseenter",(function(e){if(!t.inTransition){var i=d.utc(e);t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(e){return d(e.date).day()===i.day()?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-circle").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.drawMonthOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=d(this.selected.date).startOf("month"),a=d(this.selected.date).endOf("month"),n=[];this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")})).map((function(e){var i=[];e.details.forEach((function(e){var t=d.utc(e.date),a=Math.floor(t.hours()/3);i[a]||(i[a]={date:t.startOf("hour"),total:0,details:[],summary:[]}),i[a].total+=e.value,i[a].details.push(e)})),i.forEach((function(e){var i=t.groupBy(e.details,"name");Object.keys(i).forEach((function(t){e.summary.push({name:t,total:g.sum(i[t],(function(e){return e.total})),color:i[t][0].color})}))})),n=n.concat(i)})),n=V.cleanArray(n),this.LOG.debug(["drawMonthOverview"],[this.overview,this.selected,n]);for(var o=g.max(n,(function(e){return e.total})),r=g.timeDays(d(this.selected.date).startOf("week").toDate(),d(this.selected.date).endOf("week").toDate()),s=g.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(r.map((function(e){return d.utc(e).weekday().toString()}))),p=[i],l=d(i);l.week()!==a.week();)p.push(d(l.add(1,"week")));n.forEach((function(e){var i=[],a=t.groupBy(e.details,"name");Object.keys(a).forEach((function(e){i.push({name:e,total:a[e].reduce((function(e,t){return e+t.value}),0),color:a[e][0].color,id:a[e][0].id})})),e.summary=i}));var c=g.scaleBand().rangeRound([this.labelPadding,this.gWidth]).padding(.05).domain(p.map((function(e){return e.week()+""}))),h=g.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*o,o]);this.items.selectAll(".item-block-month").remove(),this.items.selectAll(".item-block-month").data(n).enter().append("rect").style("opacity",0).attr("class","item item-block-month").attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("x",(function(e){return t.calcItemXMonth(e,i,c(e.date.week().toString()))+(t.itemSize-t.calcItemSize(e,o))/2})).attr("rx",(function(e){return t.calcItemSize(e,o)})).attr("ry",(function(e){return t.calcItemSize(e,o)})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).attr("fill",(function(e){return e.total>0?h(e.total):"transparent"})).on("click",(function(e){t.inTransition||0!==e.total&&(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeMonthOverview(),t.overview="day",t.drawChart())})).on("mouseover",(function(e){if(!t.inTransition){for(var i=c(e.date.week().toString())+t.tooltipPadding;t.gWidth-i<t.tooltipWidth+3*t.tooltipPadding;)i-=10;var a=s(e.date.weekday().toString())+t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(g.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(g.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-week").remove(),this.labels.selectAll(".label-week").data(p).enter().append("text").attr("class","label label-week").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return"Week "+e.week()})).attr("x",(function(e){return c(e.week().toString())})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(t){return d(t.date).week()===e.week()?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})).on("click",(function(e){t.inTransition||(t.inTransition=!0,t.selected={date:e},t.hideTooltip(),t.removeMonthOverview(),t.overview="week",t.drawChart())})),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-day").data(r).enter().append("text").attr("class","label label-day").attr("x",this.labelPadding/3).attr("y",(function(e,t){return s(t)+s.bandwidth()/1.75})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return d.utc(e).format("dddd")[0]})).on("mouseenter",(function(e){if(!t.inTransition){var i=d.utc(e);t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(e){return d(e.date).day()===i.day()?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-month").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.drawWeekOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview);var i=d(this.selected.date).startOf("week"),a=d(this.selected.date).endOf("week"),n=[];this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")})).map((function(e){var i=[];e.details.forEach((function(e){var t=d(e.date),a=t.hours();i[a]||(i[a]={date:t.startOf("hour"),total:0,details:[],summary:[]}),i[a].total+=e.value,i[a].details.push(e)})),i.forEach((function(e){var i=t.groupBy(e.details,"name");Object.keys(i).forEach((function(t){return e.summary.push({name:t,total:g.sum(i[t],(function(e){return e.value})),color:i[t][0].color})}))})),n=n.concat(i)})),n=V.cleanArray(n);var o=g.max(n,(function(e){return e.total})),r=g.timeDays(d.utc().startOf("week").toDate(),d.utc().endOf("week").toDate()),s=g.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(r.map((function(e){return d.utc(e).weekday().toString()}))),p=[];g.range(0,24).forEach((function(e){return p.push(d.utc().hours(e).startOf("hour").format("HH:mm"))}));var l=g.scaleBand().rangeRound([this.labelPadding,this.gWidth]).padding(.01).domain(p),c=g.scaleLinear().range([this.minColor||e.DEF_MIN_COLOR,this.maxColor||e.DEF_MAX_COLOR]).domain([-.15*o,o]);this.items.selectAll(".item-block-week").remove(),this.items.selectAll(".item-block-week").data(n).enter().append("rect").style("opacity",0).attr("class","item item-block-week").attr("y",(function(e){return t.calcItemY(e)+(t.itemSize-t.calcItemSize(e,o))/2})).attr("x",(function(e){return t.gutter+l(d(e.date).startOf("hour").format("HH:mm"))+(t.itemSize-t.calcItemSize(e,o))/2})).attr("rx",(function(e){return t.calcItemSize(e,o)})).attr("ry",(function(e){return t.calcItemSize(e,o)})).attr("width",(function(e){return t.calcItemSize(e,o)})).attr("height",(function(e){return t.calcItemSize(e,o)})).attr("fill",(function(e){return e.total>0?c(e.total):"transparent"})).on("click",(function(e){t.inTransition||0!==e.total&&(t.inTransition=!0,t.selected=e,t.hideTooltip(),t.removeWeekOverview(),t.overview="day",t.drawChart())})).on("mouseover",(function(e){if(!t.inTransition){for(var i=l(d(e.date).startOf("hour").format("HH:mm"))+t.tooltipPadding;t.gWidth-i<t.tooltipWidth+3*t.tooltipPadding;)i-=10;var a=s(e.date.weekday().toString())+t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(g.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(g.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-week").remove(),this.labels.selectAll(".label-week").data(p).enter().append("text").attr("class","label label-week").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e})).attr("x",(function(e){return l(e)})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(t){return d(t.date).startOf("hour").format("HH:mm")===e?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-day").data(r).enter().append("text").attr("class","label label-day").attr("x",this.labelPadding/3).attr("y",(function(e,t){return s(t.toString())+s.bandwidth()/1.75})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return d.utc(e).format("dddd")[0]})).on("mouseenter",(function(e){if(!t.inTransition){var i=d.utc(e);t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(e){return d(e.date).day()===i.day()?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block-week").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.drawDayOverview=function(){var t=this;this.history[this.history.length-1]!==this.overview&&this.history.push(this.overview),Object.keys(this.selected).length||(this.selected=this._data[this._data.length-1]);var i=d(this.selected.date).startOf("day"),a=d(this.selected.date).endOf("day"),n=[];this._data.filter((function(e){return e.date.isBetween(i,a,null,"[]")})).map((function(e){var i=[];e.details.forEach((function(e){var t=d(e.date),a=t.hours();i[a]||(i[a]={date:t.startOf("hour"),total:0,details:[],summary:[]}),i[a].total+=e.value,i[a].details.push(e)})),i.forEach((function(e){var i=t.groupBy(e.details,"name");Object.keys(i).forEach((function(t){e.summary.push({name:t,total:g.sum(i[t],(function(e){return e.value})),color:i[t][0].color})}))})),n=n.concat(i)}));var o=[];n.forEach((function(e){var t=e.date;e.summary.forEach((function(e){e.date=t,o.push(e)}))})),n=V.cleanArray(n);var r=g.max(o,(function(e){return e.total})),s=this.selected.summary.map((function(e){return e.name})),p=g.scaleBand().rangeRound([this.labelPadding,this.gHeight]).domain(s),l=[];g.range(0,24).forEach((function(e){return l.push(d.utc().hours(e).startOf("hour").format("HH:mm"))}));var c=g.scaleBand().rangeRound([this.labelPadding,this.gWidth]).padding(.01).domain(l);this.items.selectAll(".item-block").remove(),this.items.selectAll(".item-block").data(o).enter().append("rect").attr("class","item item-block").attr("x",(function(e){return t.gutter+c(d(e.date).startOf("hour").format("HH:mm"))+(t.itemSize-t.calcItemSize(e,r))/2})).attr("y",(function(e){return(p(e.name)||1)-(t.itemSize-t.calcItemSize(e,r))/2})).attr("rx",(function(e){return t.calcItemSize(e,r)})).attr("ry",(function(e){return t.calcItemSize(e,r)})).attr("width",(function(e){return t.calcItemSize(e,r)})).attr("height",(function(e){return t.calcItemSize(e,r)})).attr("fill",(function(t){return g.scaleLinear().range(["#ffffff",t.color||e.DEF_MIN_COLOR]).domain([-.5*r,r])(t.total)})).style("opacity",0).on("mouseover",(function(e){if(!t.inTransition){for(var i=c(d(e.date).startOf("hour").format("HH:mm"))+t.tooltipPadding;t.gWidth-i<t.tooltipWidth+3*t.tooltipPadding;)i-=10;var a=p(e.name)+t.tooltipPadding;t.tooltip.html(t.getTooltip(e)).style("left",i+"px").style("top",a+"px").transition().duration(t.transitionDuration/2).ease(g.easeLinear).style("opacity",1)}})).on("mouseout",(function(){t.inTransition||t.hideTooltip()})).on("click",(function(e){t.handler&&t.handler.emit(e)})).transition().delay((function(){return(Math.cos(Math.PI*Math.random())+1)*t.transitionDuration})).duration((function(){return t.transitionDuration})).ease(g.easeLinear).style("opacity",1).call((function(e,t){e.empty()&&t();var i=0;e.each((function(){return++i})).on("end",(function(){--i||t.apply(this,arguments)}))}),(function(){return t.inTransition=!1})),this.labels.selectAll(".label-time").remove(),this.labels.selectAll(".label-time").data(l).enter().append("text").attr("class","label label-time").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e})).attr("x",(function(e){return c(e)})).attr("y",this.labelPadding/2).on("mouseenter",(function(e){if(!t.inTransition){var i=e;t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(e){return e.date.format("HH:mm")===i?1:.1}))}})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)}));var h=this.labelPadding;this.labels.selectAll(".label-project").remove(),this.labels.selectAll(".label-project").data(s).enter().append("text").attr("class","label label-project").attr("x",this.gutter).attr("y",(function(e){return p(e)+t.itemSize/2})).attr("min-height",(function(){return p.bandwidth()})).style("text-anchor","left").attr("font-size",(function(){return Math.floor(t.labelPadding/3)+"px"})).text((function(e){return e})).each((function(){for(var e=u.select(this),t=e.node().getComputedTextLength(),i=e.text();t>1.5*h&&i.length>0;)i=i.slice(0,-1),e.text(i+"..."),t=e.node().getComputedTextLength()})).on("mouseenter",(function(e){t.inTransition||t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",(function(t){return t.name===e?1:.1}))})).on("mouseout",(function(){t.inTransition||t.items.selectAll(".item-block").transition().duration(t.transitionDuration).ease(g.easeLinear).style("opacity",1)})),this.drawButton()},e.prototype.calcItemX=function(e,t){var i=Math.round((+d(e.date)-+t.startOf("week"))/864e5);return Math.trunc(i/7)*(this.itemSize+this.gutter)+this.labelPadding},e.prototype.calcItemXMonth=function(e,t,i){var a=d(e.date).hours();return Math.trunc(a/3)*(this.itemSize+this.gutter)+i},e.prototype.calcItemY=function(e){return this.labelPadding+e.date.weekday()*(this.itemSize+this.gutter)},e.prototype.calcItemSize=function(e,t){return t<=0?this.itemSize:.75*this.itemSize+this.itemSize*e.total/t*.25},e.prototype.drawButton=function(){var e=this;this.buttons.selectAll(".button").remove();var t=this.buttons.append("g").attr("class","button button-back").style("opacity",0).on("click",(function(){e.inTransition||(e.inTransition=!0,"year"===e.overview?e.removeYearOverview():"month"===e.overview?e.removeMonthOverview():"week"===e.overview?e.removeWeekOverview():"day"===e.overview&&e.removeDayOverview(),e.history.pop(),e.overview=e.history.pop(),e.drawChart())}));t.append("circle").attr("cx",this.labelPadding/2.25).attr("cy",this.labelPadding/2.5).attr("r",this.itemSize/2),t.append("text").attr("x",this.labelPadding/2.25).attr("y",this.labelPadding/2.5).attr("dy",(function(){return Math.floor(e.gWidth/100)/3})).attr("font-size",(function(){return Math.floor(e.labelPadding/3)+"px"})).html("&#x2190;"),t.transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",1)},e.prototype.removeGlobalOverview=function(){this.items.selectAll(".item-block-year").transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",0).remove(),this.labels.selectAll(".label-year").remove()},e.prototype.removeYearOverview=function(){this.items.selectAll(".item-circle").transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",0).remove(),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-month").remove(),this.hideBackButton()},e.prototype.removeMonthOverview=function(){this.items.selectAll(".item-block-month").transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",0).remove(),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-week").remove(),this.hideBackButton()},e.prototype.removeWeekOverview=function(){var e=this;this.items.selectAll(".item-block-week").transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",0).attr("x",(function(t,i){return i%2==0?-e.gWidth/3:e.gWidth/3})).remove(),this.labels.selectAll(".label-day").remove(),this.labels.selectAll(".label-week").remove(),this.hideBackButton()},e.prototype.removeDayOverview=function(){var e=this;this.items.selectAll(".item-block").transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",0).attr("x",(function(t,i){return i%2==0?-e.gWidth/3:e.gWidth/3})).remove(),this.labels.selectAll(".label-time").remove(),this.labels.selectAll(".label-project").remove(),this.hideBackButton()},e.prototype.hideTooltip=function(){this.tooltip.transition().duration(this.transitionDuration/2).ease(g.easeLinear).style("opacity",0)},e.prototype.hideBackButton=function(){this.buttons.selectAll(".button").transition().duration(this.transitionDuration).ease(g.easeLinear).style("opacity",0).remove()},e.DEF_MIN_COLOR="#ffffff",e.DEF_MAX_COLOR="#333333",e.decorators=[{type:t.Component,args:[{selector:"calendar-heatmap",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div #chart></div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host{position:relative;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}:host .item{cursor:pointer}:host .label{cursor:pointer;fill:#aaa;font-family:Helvetica,arial,\'Open Sans\',sans-serif}:host .button{cursor:pointer;fill:transparent;stroke-width:2;stroke:#aaa}:host .button text{stroke-width:1;text-anchor:middle;fill:#aaa}:host .heatmap-tooltip{pointer-events:none;position:absolute;z-index:9999;width:450px;max-width:650px;overflow:hidden;padding:15px;font-size:12px;line-height:14px;color:#fff;font-family:Helvetica,arial,\'Open Sans\',sans-serif;background:rgba(0,0,0,.75)}:host .heatmap-tooltip ul{list-style:none;padding:0}:host .heatmap-tooltip ul li{padding:0}:host .heatmap-tooltip ul li .gtsInfo{padding-left:20px;width:auto;max-width:650px}:host .heatmap-tooltip .header strong{display:inline-block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:host .heatmap-tooltip .round{border-radius:50%;background-color:#bbb;display:inline-block;width:12px;height:12px;border:2px solid #454545}']}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={debug:[{type:t.Input,args:["debug"]}],data:[{type:t.Input,args:["data"]}],minColor:[{type:t.Input,args:["minColor"]}],maxColor:[{type:t.Input,args:["maxColor"]}],div:[{type:t.ViewChild,args:["chart",{static:!0}]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],overview:[{type:t.Input,args:["overview"]}],handler:[{type:t.Output,args:["handler"]}],change:[{type:t.Output,args:["change"]}],onResize:[{type:t.HostListener,args:["window:resize"]}]},e}();var ae=function(){function e(e){this.el=e,this.modalTitle="",this.kbdLastKeyPressed=[],this.warpViewModalOpen=new t.EventEmitter,this.warpViewModalClose=new t.EventEmitter,this.opened=!1}return e.prototype.open=function(){this.el.nativeElement.style.display="block",this.el.nativeElement.style.zIndex="999999",this.opened=!0,this.warpViewModalOpen.emit({})},e.prototype.close=function(){this.el.nativeElement.style.display="none",this.el.nativeElement.style.zIndex="-1",this.opened=!1,this.warpViewModalClose.emit({})},e.prototype.isOpened=function(){var e=this;return new Promise((function(t){t(e.opened)}))},e.prototype.handleKeyDown=function(e){"Escape"===e[0]&&this.close()},e.prototype.ngAfterViewInit=function(){var e=this;this.el.nativeElement.addEventListener("click",(function(t){"WARP-VIEW-MODAL"===t.path[0].nodeName&&e.close()}))},e.decorators=[{type:t.Component,args:[{selector:"warpview-modal",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="popup">\n  <div class="header">\n    <div class="title" [innerHTML]="modalTitle"></div>\n    <div class="close" (click)="close()">&times;</div>\n  </div>\n  <div class="body">\n    <ng-content></ng-content>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host{position:fixed;top:0;left:0;z-index:0;display:none;width:100%;height:100%;overflow:hidden;outline:0;background-color:rgba(0,0,0,.3)}:host .popup{position:relative;width:100%;height:auto;background-color:var(--warp-view-popup-bg-color);top:10%;z-index:999999;background-clip:padding-box;border:1px solid var(--warp-view-popup-border-color);border-radius:.3rem;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;pointer-events:auto;outline:0;margin:1.75rem auto}@media (min-width:576px){:host .popup{max-width:800px}}:host .popup .header{background-color:var(--warp-view-popup-header-bg-color);display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between;padding:1rem;border-bottom:1px solid #e9ecef;border-top-left-radius:.3rem;border-top-right-radius:.3rem}:host .popup .header .title{margin-bottom:0;line-height:1.5;color:var(--warp-view-popup-title-color)}:host .popup .header .close{padding:1rem;margin:-1rem -1rem -1rem auto;cursor:pointer;color:var(--warp-view-popup-close-color)}:host .popup .body{position:relative;background-color:var(--warp-view-popup-body-bg-color);color:var(--warp-view-popup-body-color);height:auto;padding:10px}']}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={modalTitle:[{type:t.Input,args:["modalTitle"]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],warpViewModalOpen:[{type:t.Output,args:["warpViewModalOpen"]}],warpViewModalClose:[{type:t.Output,args:["warpViewModalClose"]}],handleKeyDown:[{type:t.HostListener,args:["kbdLastKeyPressed",["$event"]]}]},e}();var ne=function(){function e(){this.maxToShow=5,this.warpViewSelectedGTS=new t.EventEmitter,this.warpViewModalOpen=new t.EventEmitter,this.warpViewModalClose=new t.EventEmitter,this.current=0,this._gts=[],this._options=new B,this._kbdLastKeyPressed=[],this._hiddenData=[],this._debug=!1,this.displayed=[],this.modalOpenned=!1,this.LOG=new N(e,this.debug)}return Object.defineProperty(e.prototype,"options",{set:function(e){this.LOG.debug(["onOptions"],e),"string"==typeof e&&(e=JSON.parse(e)),n(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=U.mergeDeep(this._options,e),this.prepareData())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtsList",{set:function(e){this._gtsList=e,this.LOG.debug(["_gtsList"],this._gtsList),this.prepareData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtslist",{get:function(){return this._gtsList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.LOG.debug(["data"],e),e&&(this._data=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e,this.prepareData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kbdLastKeyPressed",{get:function(){return this._kbdLastKeyPressed},set:function(e){if(this._kbdLastKeyPressed=e,"s"!==e[0]||this.modalOpenned){if(this.modalOpenned)switch(e[0]){case"ArrowUp":case"j":this.current=Math.max(0,this.current-1),this.prepareData();break;case"ArrowDown":case"k":this.current=Math.min(this._gts.length-1,this.current+1),this.prepareData();break;case" ":this.warpViewSelectedGTS.emit({gts:this._gts[this.current],selected:this.hiddenData.indexOf(this._gts[this.current].id)>-1});break;default:return}}else this.showPopup()},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.prepareData()},e.prototype.onWarpViewModalOpen=function(){this.modalOpenned=!0,this.warpViewModalOpen.emit({})},e.prototype.onWarpViewModalClose=function(){this.modalOpenned=!1,this.warpViewModalClose.emit({})},e.prototype.isOpened=function(){return this.modal.isOpened()},e.prototype.showPopup=function(){this.current=0,this.prepareData(),this.modal.open()},e.prototype.close=function(){this.modal.close()},e.prototype.prepareData=function(){this._gtsList&&this._gtsList.data&&(this._gts=V.flatDeep([this._gtsList.data]),this.displayed=this._gts.slice(Math.max(0,Math.min(this.current-this.maxToShow,this._gts.length-2*this.maxToShow)),Math.min(this._gts.length,this.current+this.maxToShow+Math.abs(Math.min(this.current-this.maxToShow,0)))),this.LOG.debug(["prepareData"],this.displayed))},e.prototype.isHidden=function(e){return!this.displayed.find((function(t){return!!e&&e.id===t.id}))},e.decorators=[{type:t.Component,args:[{selector:"warpview-gts-popup",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<warpview-modal [kbdLastKeyPressed]="kbdLastKeyPressed"\n                modalTitle="GTS Selector"\n                #modal\n                (warpViewModalClose)="onWarpViewModalClose()"\n                (warpViewModalOpen)="onWarpViewModalOpen()">\n  <div class="up-arrow" *ngIf="this.current > 0"></div>\n  <ul>\n    <li *ngFor="let g of _gts; index as index"\n        [ngClass]="{ selected: current == index, hidden: isHidden(g.id) }"\n    >\n      <warpview-chip [node]="{gts: g}" [name]="g.c" [hiddenData]="hiddenData" [options]="_options"></warpview-chip>\n    </li>\n  </ul>\n  <div class="down-arrow" *ngIf="current < _gts.length - 1"></div>\n</warpview-modal>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={modal:[{type:t.ViewChild,args:["modal",{static:!0}]}],options:[{type:t.Input,args:["options"]}],gtsList:[{type:t.Input,args:["gtsList"]}],debug:[{type:t.Input,args:["debug"]}],data:[{type:t.Input,args:["data"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],maxToShow:[{type:t.Input,args:["maxToShow"]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}],warpViewModalOpen:[{type:t.Output,args:["warpViewModalOpen"]}],warpViewModalClose:[{type:t.Output,args:["warpViewModalClose"]}]},e}();var oe=function(e){function i(a,n,o,r){var p=e.call(this,a,n,o,r)||this;return p.el=a,p.renderer=n,p.sizeService=o,p.ngZone=r,p.kbdLastKeyPressed=[],p.warpViewSelectedGTS=new t.EventEmitter,p._gtsFilter="x",p.gtsList=[],p.params=[],p.expand=!1,p.initOpen=new s.Subject,p.LOG=new N(i,p._debug),p}return L(i,e),Object.defineProperty(i.prototype,"gtsFilter",{get:function(){return this._gtsFilter},set:function(e){this._gtsFilter=e},enumerable:!0,configurable:!0}),i.prototype.ngAfterViewInit=function(){this.LOG.debug(["componentDidLoad","data"],this._data),this._data&&this.doRender(),this._options.foldGTSTree&&!this.expand&&this.foldAll(),this._options.foldGTSTree||this.initOpen.next()},i.prototype.update=function(e,t){this.doRender(),this._options.foldGTSTree&&!this.expand&&this.foldAll()},i.prototype.doRender=function(){if(this.LOG.debug(["doRender","gtsList"],this._data),this._options=U.mergeDeep(this.defOptions,this._options),this._data){var e=V.getData(this._data).data;this.params=this._data.params||[],this.LOG.debug(["doRender","gtsList","dataList"],e),e&&(this.expand=!this._options.foldGTSTree,this.gtsList=V.flattenGtsIdArray(e,0).res,this.LOG.debug(["doRender","gtsList"],this.gtsList,this._options.foldGTSTree,this.expand),this.loading=!1,this.chartDraw.emit())}},i.prototype.foldAll=function(){var e=this;this.root?this.expand=!1:setTimeout((function(){return e.foldAll()}))},i.prototype.toggleVisibility=function(){this.expand=!this.expand},i.prototype.convert=function(e){return[]},i.prototype.warpViewSelectedGTSHandler=function(e){this.LOG.debug(["warpViewSelectedGTS"],e),this.warpViewSelectedGTS.emit(e)},i.decorators=[{type:t.Component,args:[{selector:"warpview-gts-tree",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper">\n  <div class="stack-level" (click)="toggleVisibility()">\n    <span [ngClass]="{expanded: this.expand, collapsed: !this.expand}" #root></span> Results\n  </div>\n  <warpview-tree-view [events]="initOpen.asObservable()"\n                      [gtsList]="gtsList" [branch]="false" *ngIf="expand" [params]="params"\n                      [options]="_options" (warpViewSelectedGTS)="warpViewSelectedGTSHandler($event)"\n                      [debug]="debug" [hiddenData]="hiddenData" [gtsFilter]="gtsFilter"\n                      [kbdLastKeyPressed]="kbdLastKeyPressed"></warpview-tree-view>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host .wrapper{text-align:left}:host .stack-level{font-size:1em;padding-top:5px;cursor:pointer;color:var(--gts-stack-font-color)}:host .stack-level+div{padding-left:25px}:host .expanded{padding:1px 10px;margin-right:5px;background-image:var(--gts-tree-expanded-icon);background-position:center left;background-repeat:no-repeat}:host .collapsed{padding:1px 10px;margin-right:5px;background-image:var(--gts-tree-collapsed-icon);background-repeat:no-repeat;background-position:center left}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={root:[{type:t.ViewChild,args:["root",{static:!0}]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}]},i}(z);var re=function(){function e(){this.gtsFilter="x",this.branch=!1,this.hidden=!1,this.kbdLastKeyPressed=[],this.warpViewSelectedGTS=new t.EventEmitter,this.hide={},this.initOpen=new s.Subject,this._debug=!1,this._hiddenData=[],this.LOG=new N(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=D(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.LOG.debug(["ngOnInit"],this.gtsList),this.gtsList.forEach((function(t,i){e.hide[i+""]=!1})),this.eventsSubscription=this.events.subscribe((function(){return e.open()}))},e.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},e.prototype.toggleVisibility=function(e){this.LOG.debug(["toggleVisibility"],e,this.hide),this.hide[e+""]=!this.hide[e+""]},e.prototype.isHidden=function(e){return!!this.hide[e+""]&&this.hide[e+""]},e.prototype.isGts=function(e){return V.isGts(e)},e.prototype.warpViewSelectedGTSHandler=function(e){this.LOG.debug(["warpViewSelectedGTS"],e),this.warpViewSelectedGTS.emit(e)},e.prototype.open=function(){var e=this;this.gtsList.forEach((function(t,i){e.hide[i+""]=!0})),setTimeout((function(){return e.initOpen.next()}))},e.decorators=[{type:t.Component,args:[{selector:"warpview-tree-view",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="list">\n  <ul *ngIf="gtsList">\n    <li *ngFor="let gts of gtsList; index as index; first as first" >\n      <warpview-chip\n        *ngIf="isGts(gts)"\n        [options]="options" (warpViewSelectedGTS)="warpViewSelectedGTSHandler($event)" [param]="params[gts.id]"\n        [node]="{gts: gts}" [name]="gts.c" [gtsFilter]="gtsFilter" [debug]="debug" [hiddenData]="hiddenData"\n        [kbdLastKeyPressed]="kbdLastKeyPressed"></warpview-chip>\n      <span *ngIf="!isGts(gts)">\n        <span *ngIf="gts">\n          <span *ngIf="branch">\n            <span>\n            <span [ngClass]="{expanded:  hide[index + \'\'], collapsed: !hide[index + \'\']}"\n                  (click)="toggleVisibility(index)" [id]="\'span-\' + index"> </span>\n                    <small (click)="toggleVisibility(index)"> List of {{gts.length}}\n                      item{{gts.length > 1 ? \'s\' : \'\'}}</small>\n           </span>\n          </span>\n          <span *ngIf="!branch">\n            <span class="stack-level">\n              <span [ngClass]="{expanded: hide[index + \'\'], collapsed: !hide[index + \'\']}"\n                    (click)="toggleVisibility(index)" [id]="\'span-\' + index"></span>\n              <span (click)="toggleVisibility(index)">{{first ? \'[TOP]\' : \'[\' + (index + 1) + \']\'}}&nbsp;\n                <small [id]="\'inner-\' + index">List of {{gts.length}} item{{gts.length > 1 ? \'s\' : \'\'}}</small>\n              </span>\n                  </span>\n          </span>\n    <warpview-tree-view [gtsList]="gts" [branch]="true" *ngIf="isHidden(index)"\n                        [debug]="debug" [gtsFilter]="gtsFilter" [params]="params"\n                        [events]="initOpen.asObservable()"\n                        [options]="options" (warpViewSelectedGTS)="warpViewSelectedGTSHandler($event)"\n                        [kbdLastKeyPressed]="kbdLastKeyPressed" [hiddenData]="hiddenData"></warpview-tree-view>\n        </span>\n      </span>\n    </li>\n  </ul>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host ul{margin:0;padding:0;list-style:none;border:none;overflow:hidden}:host li{color:var(--gts-stack-font-color,#000);position:relative;padding:0 0 0 20px;line-height:20px}:host .list,:host li .stack-level{font-size:1em;padding-top:5px}:host .list+div,:host li .stack-level+div{padding-left:25px}:host li .expanded{padding:1px 10px;margin-right:5px;background-image:var(--gts-tree-expanded-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==));background-position:center left;background-repeat:no-repeat}:host li .collapsed{padding:1px 10px;margin-right:5px;background-image:var(--gts-tree-collapsed-icon,url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=));background-repeat:no-repeat;background-position:center left}:host li .gtsInfo{white-space:normal;word-wrap:break-word}:host li .gtsInfo[disabled]{color:#aaa;cursor:not-allowed}:host li .normal{border-radius:50%;background-color:#bbb;display:inline-block}:host li i,:host li span{cursor:pointer}:host li .selected{background-color:#adf;font-weight:700;padding:1px 5px}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={debug:[{type:t.Input,args:["debug"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],options:[{type:t.Input,args:["options"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],gtsList:[{type:t.Input,args:["gtsList"]}],params:[{type:t.Input,args:["params"]}],branch:[{type:t.Input,args:["branch"]}],hidden:[{type:t.Input,args:["hidden"]}],events:[{type:t.Input}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}]},e}();var se=function(){};var pe=function(){function e(){this.param=new B,this.options=new B,this.warpViewSelectedGTS=new t.EventEmitter,this.refreshCounter=0,this._gtsFilter="x",this._debug=!1,this._kbdLastKeyPressed=[],this._hiddenData=[],this._node={selected:!0,gts:se},this.LOG=new N(e,this.debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e,this.LOG.debug(["hiddenData"],e,this._node,this._node.gts,this._node.gts.c),this._node&&this._node.gts&&this._node.gts.c&&(this._node=O({},this._node,{selected:-1===this.hiddenData.indexOf(this._node.gts.id),label:V.serializeGtsMetadata(this._node.gts)}),this.LOG.debug(["hiddenData"],this._node),this.colorizeChip())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtsFilter",{get:function(){return this._gtsFilter},set:function(e){this._gtsFilter=e,""!==this._gtsFilter.slice(1)?this.setState(new RegExp(this._gtsFilter.slice(1),"gi").test(V.serializeGtsMetadata(this._node.gts))):this.setState(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kbdLastKeyPressed",{set:function(e){this._kbdLastKeyPressed=e,"a"===e[0]&&this.setState(!0),"n"===e[0]&&this.setState(!1)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._node=O({},this.node,{selected:-1===this.hiddenData.indexOf(this.node.gts.id)})},e.prototype.ngAfterViewInit=function(){(""!==this.gtsFilter.slice(1)&&new RegExp(this.gtsFilter.slice(1),"gi").test(V.serializeGtsMetadata(this._node.gts))||this.hiddenData.indexOf(this._node.gts.id)>-1)&&this.setState(!1),this.colorizeChip()},e.prototype.colorizeChip=function(){if(this.chip){if(this._node.selected&&this.chip.nativeElement){var e=_.getColor(this._node.gts.id,this.options.scheme),t=(this.param||{datasetColor:e}).datasetColor||e;this.chip.nativeElement.style.setProperty("background-color",_.transparentize(t)),this.chip.nativeElement.style.setProperty("border-color",t)}else this.chip.nativeElement.style.setProperty("background-color","#eeeeee");this.refreshCounter++}},e.prototype.toArray=function(e){return void 0===e?[]:Object.keys(e).map((function(t){return{name:t,value:e[t]}}))},e.prototype.switchPlotState=function(e){return e.preventDefault(),this.setState(!this._node.selected),!1},e.prototype.setState=function(e){this._node&&this._node.gts&&(this._node=O({},this._node,{selected:e,label:V.serializeGtsMetadata(this._node.gts)}),this.LOG.debug(["switchPlotState"],this._node),this.colorizeChip(),this.warpViewSelectedGTS.emit(this._node))},e.decorators=[{type:t.Component,args:[{selector:"warpview-chip",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n   <span (click)="switchPlotState($event)" *ngIf="_node && _node.gts && _node.gts.l">\n     <i class="normal" #chip></i>\n     <span class="gtsInfo">\n       <span class=\'gts-classname\'>&nbsp; {{_node.gts.c}}</span>\n       <span class=\'gts-separator\'>&#x007B; </span>\n       <span *ngFor="let label of toArray(_node.gts.l); index as index; last as last">\n         <span class=\'gts-labelname\'>{{label.name}}</span>\n         <span class=\'gts-separator\'>=</span>\n         <span class=\'gts-labelvalue\'>{{label.value}}</span>\n         <span [hidden]="last">, </span>\n       </span>\n       <span class="gts-separator"> &#x007D; </span>\n         <span class=\'gts-separator\'>&#x007B; </span>\n         <span *ngFor="let label of toArray(_node.gts.a); index as index; last as last">\n           <span class=\'gts-attrname\'>{{label.name}}</span>\n           <span class=\'gts-separator\'>=</span>\n           <span class=\'gts-attrvalue\'>{{label.value}}</span>\n           <span [hidden]="last">, </span>\n         </span>\n       <span class="gts-separator"> &#x007D;</span>\n       </span>\n   </span>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host div span{cursor:pointer}:host .normal{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={chip:[{type:t.ViewChild,args:["chip",{static:!1}]}],name:[{type:t.Input,args:["name"]}],node:[{type:t.Input,args:["node"]}],param:[{type:t.Input,args:["param"]}],options:[{type:t.Input,args:["options"]}],debug:[{type:t.Input,args:["debug"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],kbdLastKeyPressed:[{type:t.Input,args:["kbdLastKeyPressed"]}],warpViewSelectedGTS:[{type:t.Output,args:["warpViewSelectedGTS"]}]},e}();var le=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.imageTitle="",r.parentWidth=-1,r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.ngAfterViewInit=function(){this.LOG.debug(["ngAfterViewInit"],this._options),this.drawChart()},i.prototype.update=function(e,t){this.drawChart()},i.prototype.onResize=function(){var e=this;(this.el.nativeElement.parentElement.clientWidth!==this.parentWidth||this.parentWidth<=0)&&(this.parentWidth=this.el.nativeElement.parentElement.clientWidth,clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){e.el.nativeElement.parentElement.clientWidth>0?(e.LOG.debug(["onResize"],e.el.nativeElement.parentElement.clientWidth),e.drawChart()):e.onResize()}),150))},i.prototype.drawChart=function(){if(this._data&&this._data.data&&0!==this._data.data.length){this.initChart(this.el),this.toDisplay=[];var e=this._data;if(this.LOG.debug(["drawChart","gts"],e),"string"==typeof e)try{e=JSON.parse(e)}catch(e){}e.data&&e.data.length>0&&V.isEmbeddedImage(e.data[0])?(this._options=U.mergeDeep(this._options,e.globalParams||{}),this.toDisplay.push(e.data[0])):e.data&&V.isEmbeddedImage(e.data)&&this.toDisplay.push(e.data),this.LOG.debug(["drawChart","this.data","this.toDisplay"],this.data,this.toDisplay),this.loading=!1,this.chartDraw.emit()}},i.prototype.getStyle=function(){if(this.LOG.debug(["getStyle"],this._options),this._options){var e={"background-color":this._options.bgColor||"transparent",width:this.width,height:"auto"};return this._options.fontColor&&(e.color=this._options.fontColor),this.LOG.debug(["getStyle","style"],e),e}return{}},i.prototype.convert=function(e){return[]},i.decorators=[{type:t.Component,args:[{selector:"warpview-image",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div class="chart-container" id="wrapper" *ngIf="toDisplay">\n    <div *ngFor="let img of toDisplay" [ngStyle]="getStyle()">\n      <img [src]="img" class="responsive" alt="Result"/>\n    </div>\n  </div>\n  <warpview-spinner *ngIf="!toDisplay" message="Parsing data"></warpview-spinner>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host div{height:var(--warp-view-chart-height);width:var(--warp-view-chart-width)}:host .chart-container{width:var(--warp-view-chart-width,100%);height:var(--warp-view-chart-height,100%);position:relative;overflow:hidden}:host .chart-container div{height:99%!important;width:99%;display:block}:host .chart-container div .responsive{width:99%;height:99%;-o-object-fit:scale-down;object-fit:scale-down}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={imageTitle:[{type:t.Input,args:["imageTitle"]}],onResize:[{type:t.HostListener,args:["window:resize"]}]},i}(z);var ce=function(){function e(){}return e.toLeafletMapPaths=function(t,i,a,n){void 0===a&&(a=1e3);for(var o=[],r=(t.gts||[]).length,s=function(r){var s=t.gts[r];if(V.isGtsToPlotOnMap(s)&&0===(i||[]).filter((function(e){return e===s.id})).length){var p={};p.path=e.gtsToPath(s,a),t.params&&t.params[r]&&t.params[r].key?p.key=t.params[r].key:p.key=V.serializeGtsMetadata(s),t.params&&t.params[r]&&t.params[r].color?p.color=t.params[r].color:p.color=_.getColor(r,n),o.push(p)}},p=0;p<r;p++)s(p);return o},e.gtsToPath=function(e,t){void 0===t&&(t=1e3);for(var i=[],a=(e.v||[]).length,n=0;n<a;n++){var o=e.v[n],r=o.length;r>=4&&i.push({ts:Math.floor(o[0]/t),lat:o[1],lon:o[2],val:o[r-1]})}return i},e.annotationsToLeafletPositions=function(t,i,a,n){void 0===a&&(a=1e3);for(var o=[],r=(t.gts||[]).length,s=function(r){var s=t.gts[r];if(V.isGtsToAnnotate(s)&&0===(i||[]).filter((function(e){return e===s.id})).length){p.LOG.debug(["annotationsToLeafletPositions"],s);var l={},c=(t.params||[])[r];c||(c={}),l.path=e.gtsToPath(s,a),e.extractCommonParameters(l,c,r,n),c.render&&(l.render=c.render),"marker"===l.render&&(l.marker=t.params&&t.params[r]?t.params[r].marker:"circle"),"weightedDots"===l.render&&e.validateWeightedDotsPositionArray(l,c),p.LOG.debug(["annotationsToLeafletPositions","annotations"],l),o.push(l)}},p=this,l=0;l<r;l++)s(l);return o},e.extractCommonParameters=function(t,i,a,n){i=i||{},t.key=i.key||"",t.color=i.color||_.getColor(a,n),t.borderColor=i.borderColor||"#000",t.properties=i.properties||{},void 0===i.baseRadius||isNaN(parseInt(i.baseRadius,10))||parseInt(i.baseRadius,10)<0?t.baseRadius=e.BASE_RADIUS:t.baseRadius=i.baseRadius},e.validateWeightedDotsPositionArray=function(t,i){if(void 0===i.minValue||void 0===i.maxValue)return e.LOG.error(["validateWeightedDotsPositionArray"],"When using 'weightedDots' or 'weightedColoredDots' rendering, 'maxValue' and 'minValue' parameters are compulsory"),void(t.render=void 0);if(t.maxValue=i.maxValue,t.minValue=i.minValue,"number"!=typeof t.minValue||"number"!=typeof t.maxValue||t.minValue>=t.maxValue)return e.LOG.error(["validateWeightedDotsPositionArray"],"When using 'weightedDots' or 'weightedColoredDots' rendering, 'maxValue' and 'minValue' must be numbers and 'maxValue' must be greater than 'minValue'"),void(t.render=void 0);if(!V.isPositionsArrayWithValues(t)&&!V.isPositionsArrayWithTwoValues(t))return e.LOG.error(["validateWeightedDotsPositionArray"],"When using 'weightedDots' or 'weightedColoredDots' rendering, positions must have an associated value"),void(t.render=void 0);void 0===i.numSteps||isNaN(parseInt(i.numSteps,10))||parseInt(i.numSteps,10)<0?t.numSteps=5:t.numSteps=i.numSteps;for(var a=(t.maxValue-t.minValue)/t.numSteps,n=[],o=0;o<t.numSteps-1;o++)n[o]=t.minValue+(o+1)*a;n[t.numSteps-1]=t.maxValue;var r=(t||[]).length;for(o=0;o<r;o++){var s=t[o],p=s[2];for(var l in s[4]=t.numSteps-1,n)if(p<=n[l]){s[4]=l;break}}return!0},e.toLeafletMapPositionArray=function(t,i,a){for(var n=[],o=(t.gts||[]).length,r=function(o){var r=t.gts[o];if(V.isPositionArray(r)&&0===(i||[]).filter((function(e){return e===r.id})).length){s.LOG.debug(["toLeafletMapPositionArray"],r,t.params[o]);var p=r,l=t.params[o]||{};e.extractCommonParameters(p,l,o,a),void 0!==l.render&&(p.render=l.render),"weightedDots"===p.render&&e.validateWeightedDotsPositionArray(p,l),"coloredWeightedDots"===p.render&&e.validateWeightedColoredDotsPositionArray(p,l),"marker"===p.render&&(p.marker=l.marker),s.LOG.debug(["toLeafletMapPositionArray","posArray"],p),n.push(p)}},s=this,p=0;p<o;p++)r(p);return n},e.validateWeightedColoredDotsPositionArray=function(t,i){if(e.validateWeightedDotsPositionArray(t,i)){if(void 0===i.minColorValue||void 0===i.maxColorValue||void 0===i.startColor||void 0===i.endColor)return e.LOG.error(["validateWeightedColoredDotsPositionArray"],"When using 'weightedColoredDots' rendering, 'maxColorValue', 'minColorValue', 'startColor' and 'endColor' parameters are compulsory"),void(t.render=void 0);if(t.maxColorValue=i.maxColorValue,t.minColorValue=i.minColorValue,"number"!=typeof t.minColorValue||"number"!=typeof t.maxColorValue||t.minColorValue>=t.maxColorValue)return e.LOG.error(["validateWeightedColoredDotsPositionArray"],["When using weightedColoredDots' rendering, 'maxColorValue' and 'minColorValue' must be numbers and 'maxColorValue' must be greater than 'minColorValue'",{maxColorValue:t.maxColorValue,minColorValue:t.minColorValue}]),void(t.render=void 0);var a=/^#(?:[0-9a-f]{3}){1,2}$/i;if("string"!=typeof i.startColor||"string"!=typeof i.endColor||!a.test(i.startColor)||!a.test(i.endColor))return e.LOG.error(["validateWeightedColoredDotsPositionArray"],["When using weightedColoredDots' rendering, 'startColor' and 'endColor' parameters must be RGB colors in #rrggbb format",{startColor:i.startColor,endColor:i.endColor,tests:[typeof i.startColor,typeof i.endColor,a.test(i.startColor),a.test(i.endColor),a.test(i.startColor)]}]),void(t.render=void 0);t.startColor={r:parseInt(i.startColor.substring(1,3),16),g:parseInt(i.startColor.substring(3,5),16),b:parseInt(i.startColor.substring(5,7),16)},t.endColor={r:parseInt(i.endColor.substring(1,3),16),g:parseInt(i.endColor.substring(3,5),16),b:parseInt(i.endColor.substring(5,7),16)},void 0===i.numColorSteps||isNaN(parseInt(i.numColorSteps,10))||parseInt(i.numColorSteps,10)<0?t.numColorSteps=5:t.numColorSteps=i.numColorSteps,t.colorGradient=_.hsvGradientFromRgbColors(t.startColor,t.endColor,t.numColorSteps);for(var n=(t.maxColorValue-t.minColorValue)/t.numColorSteps,o=[],r=0;r<t.numColorSteps;r++)o[r]=t.minColorValue+(r+1)*n;t.steps=o,t.positions.forEach((function(e){var i=e[3];e[5]=t.numColorSteps-1;for(var a=0;a<o.length-1;a++)if(i<o[a]){e[5]=a;break}}))}},e.getBoundsArray=function(e,t,i,a){var n,o=[];this.LOG.debug(["getBoundsArray","paths"],e),n=(e||[]).length;for(var r=0;r<n;r++)for(var s=e[r],p=(s.path||[]).length,l=0;l<p;l++){var c=s.path[l];o.push([c.lat,c.lon])}this.LOG.debug(["getBoundsArray","positionsData"],t),n=(t||[]).length;for(r=0;r<n;r++){var h=t[r];for(p=(h.positions||[]).length,l=0;l<p;l++){c=h.positions[l];o.push([c[0],c[1]])}}this.LOG.debug(["getBoundsArray","annotationsData"],i),n=(i||[]).length;for(r=0;r<n;r++){var d=i[r];for(p=(d.path||[]).length,l=0;l<p;l++){c=d.path[l];o.push([c.lat,c.lon])}}n=(a||[]).length;for(r=0;r<n;r++){var g=a[r];switch(g.geometry.type){case"MultiPolygon":g.geometry.coordinates.forEach((function(e){return e.forEach((function(e){return e.forEach((function(e){return o.push([e[1],e[0]])}))}))}));break;case"Polygon":g.geometry.coordinates.forEach((function(e){return e.forEach((function(e){return o.push([e[1],e[0]])}))}));break;case"LineString":g.geometry.coordinates.forEach((function(e){return o.push([e[1],e[0]])}));break;case"Point":o.push([g.geometry.coordinates[1],g.geometry.coordinates[0]])}}if(1===o.length)return o;var u=90,w=-180,f=-90,v=180;this.LOG.debug(["getBoundsArray"],o),n=(o||[]).length;for(r=0;r<n;r++){var m=o[r];m[0]>f&&(f=m[0]),m[0]<u&&(u=m[0]),m[1]>w&&(w=m[1]),m[1]<v&&(v=m[1])}return[[u,w],[f,v]]},e.pathDataToLeaflet=function(e,t){for(var i=[],a=void 0===t||void 0===t.from||t.from<0?0:t.from,n=void 0===t||void 0===t.to||t.to>=e.length?e.length-1:t.to,o=a;o<=n;o++)i.push([e[o].lat,e[o].lon]);return i},e.toGeoJSON=function(e){var t=["Point","LineString","Polygon","MultiPolygon"],i=[];return e.gts.forEach((function(e){e.type&&"Feature"===e.type&&e.geometry&&e.geometry.type&&t.indexOf(e.geometry.type)>-1?i.push(e):e.type&&t.indexOf(e.type)>-1&&i.push({type:"Feature",geometry:e})})),i},e.BASE_RADIUS=2,e.LOG=new N(e,!0),e.mapTypes={NONE:void 0,DEFAULT:{link:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},HOT:{link:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles\n style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by\n <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'},TOPO:{link:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors,\n <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a>\n  (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'},TOPO2:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN,\n       GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"},SURFER:{link:"https://maps.heigit.org/openmapsurfer/tiles/roads/webmercator/{z}/{x}/{y}.png",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of\n Heidelberg</a> | Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},HYDRA:{link:"https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},HYDRA2:{link:"https://{s}.tile.openstreetmap.se/hydda/base/{z}/{x}/{y}.png",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a>\n &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},TONER:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},TONER_LITE:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},TERRAIN:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},ESRI:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan,\n METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"},SATELLITE:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN,\n IGP, UPR-EGP, and the GIS User Community"},OCEANS:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"},GRAY:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",attibs:""},GRAYSCALE:{link:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"},WATERCOLOR:{link:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy;\n  <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd"},CARTODB:{link:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy;\n <a href="https://carto.com/attributions">CartoDB</a>',subdomains:"abcd"},CARTODB_DARK:{link:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy;\n <a href="https://carto.com/attributions">CartoDB</a>',subdomains:"abcd"}},e}();var he=function(){function e(i,a,n){var o=this;this.el=i,this.sizeService=a,this.renderer=n,this.heatData=[],this.responsive=!1,this.showLegend=!0,this.width=U.DEFAULT_WIDTH,this.height=U.DEFAULT_HEIGHT,this.change=new t.EventEmitter,this.chartDraw=new t.EventEmitter,this.divider=1,this._options=new B,this._firstDraw=!0,this._debug=!1,this.defOptions=U.mergeDeep(new B,{map:{heatControls:!1,tiles:[],dotsLimit:1e3},timeMode:"date",showRangeSelector:!0,gridLineColor:"#8e8e8e",showDots:!1,timeZone:"UTC",timeUnit:"us",bounds:{}}),this.currentValuesMarkers=[],this.annotationsMarkers=[],this.positionArraysMarkers=[],this._iconAnchor=[20,52],this._popupAnchor=[0,-50],this.pathData=[],this.annotationsData=[],this.positionData=[],this.geoJson=[],this.firstDraw=!0,this.finalHeight=0,this.pathDataLayer=w.featureGroup(),this.annotationsDataLayer=w.featureGroup(),this.positionDataLayer=w.featureGroup(),this.tileLayerGroup=w.featureGroup(),this.geoJsonLayer=w.featureGroup(),this.LOG=new N(e,this.debug),this.LOG.debug(["constructor"],this.debug),this.sizeService.sizeChanged$.subscribe((function(){o._map&&o.resizeMe()}))}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{set:function(e){if(this.LOG.debug(["onOptions"],e),!n(this._options,e)){var t=e.map.startZoom!==this._options.map.startZoom||e.map.startLat!==this._options.map.startLat||e.map.startLong!==this._options.map.startLong;this._options=e,this.divider=V.getDivider(this._options.timeUnit),this.drawMap(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this.LOG.debug(["onData"],e),this.currentValuesMarkers=[],this.annotationsMarkers=[],this.positionArraysMarkers=[],e&&(this._data=e,this.drawMap(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenData",{get:function(){return this._hiddenData},set:function(e){this._hiddenData=e,this.drawMap(!1)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._options=U.mergeDeep(this._options,this.defOptions)},e.prototype.resizeMe=function(){var e=this;this.LOG.debug(["resizeMe"],this.wrapper.nativeElement.parentElement.getBoundingClientRect());var t=this.wrapper.nativeElement.parentElement.getBoundingClientRect().height,i=this.wrapper.nativeElement.parentElement.getBoundingClientRect().width;this._options.map.showTimeSlider&&this.timeSlider&&this.timeSlider.nativeElement&&(t-=this.timeSlider.nativeElement.getBoundingClientRect().height),this._options.map.showTimeRange&&this.timeRangeSlider&&this.timeRangeSlider.nativeElement&&(t-=this.timeRangeSlider.nativeElement.getBoundingClientRect().height),this.finalHeight=t,this.renderer.setStyle(this.mapDiv.nativeElement,"width","calc("+i+"px - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+" - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+")"),this.renderer.setStyle(this.mapDiv.nativeElement,"height","calc("+t+"px - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+" - "+getComputedStyle(this.wrapper.nativeElement).getPropertyValue("--warp-view-map-margin").trim()+")"),this.width=i,this.height=t,this._map&&setTimeout((function(){return e._map.invalidateSize()}))},e.prototype.heatRadiusDidChange=function(e){this._heatLayer.setOptions({radius:e.detail.valueAsNumber}),this.LOG.debug(["heatRadiusDidChange"],e.detail.valueAsNumber)},e.prototype.heatBlurDidChange=function(e){this._heatLayer.setOptions({blur:e.detail.valueAsNumber}),this.LOG.debug(["heatBlurDidChange"],e.detail.valueAsNumber)},e.prototype.heatOpacityDidChange=function(e){var t=e.detail.valueAsNumber/100;this._heatLayer.setOptions({minOpacity:t}),this.LOG.debug(["heatOpacityDidChange"],e.detail.valueAsNumber)},e.prototype.drawMap=function(e){this.LOG.debug(["drawMap"],this._data),this._options=U.mergeDeep(this._options,this.defOptions),this.timeStart=this._options.map.timeStart,S.tz.setDefault(this._options.timeZone);var t=this._data;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){return}var i,a;V.isArray(t)&&t[0]&&(t[0]instanceof k||t[0].hasOwnProperty("data"))&&(t=t[0]),this._map&&this._map.invalidateSize(!0),t.data?(i=t.data,this._options=U.mergeDeep(t.globalParams||{},this._options),this.timeSpan=this.timeSpan||this._options.map.timeSpan,a=t.params):(i=t,a=[]),this.divider=V.getDivider(this._options.timeUnit),this.LOG.debug(["drawMap"],i,this._options,t.globalParams);for(var n=V.flatDeep(i),o=n.length,r=0;r<o;r++){var s=n[r];s.v&&(F.sort(s.v,(function(e,t){return e[0]-t[0]})),s.i=r,r++)}this.LOG.debug(["GTSLib.flatDeep(dataList)"],n),this.displayMap({gts:n,params:a},e)}},e.prototype.icon=function(e,t){void 0===t&&(t="");var i=""+e.slice(1),a=""!==t?t:"circle";return w.icon({iconUrl:"https://cdn.mapmarker.io/api/v1/font-awesome/v4/pin?icon=fa-"+a+"&iconSize=17&size=40&hoffset="+("circle"===a?0:-1)+"&voffset=-4&color=fff&background="+i,iconAnchor:this._iconAnchor,popupAnchor:this._popupAnchor})},e.prototype.patchMapTileGapBug=function(){var e=w.GridLayer.prototype._initTile;e.isPatched||(w.GridLayer.include({_initTile:function(t){e.call(this,t);var i=this.getTileSize();t.style.width=i.x+1.5+"px",t.style.height=i.y+1+"px"}}),w.GridLayer.prototype._initTile.isPatched=!0)},e.prototype.displayMap=function(e,t){var i=this;void 0===t&&(t=!1),this.currentValuesMarkers=[],this.LOG.debug(["drawMap"],e,this._options,this._hiddenData||[]),this.lowerTimeBound||(this.lowerTimeBound=this._options.map.timeSliderMin/this.divider,this.upperTimeBound=this._options.map.timeSliderMax/this.divider);var a=this.height||U.DEFAULT_HEIGHT,n=this.width||U.DEFAULT_WIDTH;if(this.responsive&&0===this.finalHeight?this.resizeMe():(this._options.map.showTimeSlider&&this.timeSlider&&this.timeSlider.nativeElement&&(a-=this.timeSlider.nativeElement.getBoundingClientRect().height),this._options.map.showTimeRange&&this.timeRangeSlider&&this.timeRangeSlider.nativeElement&&(a-=this.timeRangeSlider.nativeElement.getBoundingClientRect().height)),this.width=n,this.height=a,0!==e.gts.length){if(this.pathData=ce.toLeafletMapPaths(e,this._hiddenData||[],this.divider,this._options.scheme)||[],this.annotationsData=ce.annotationsToLeafletPositions(e,this._hiddenData,this.divider,this._options.scheme)||[],this.positionData=ce.toLeafletMapPositionArray(e,this._hiddenData||[],this._options.scheme)||[],this.geoJson=ce.toGeoJSON(e),this.LOG.debug(["displayMap"],this.pathData,this.annotationsData,this.positionData),"NONE"!==this._options.map.mapType){var o=ce.mapTypes[this._options.map.mapType||"DEFAULT"],r={maxZoom:24,maxNativeZoom:19};o.attribution&&(r.attribution=o.attribution),o.subdomains&&(r.subdomains=o.subdomains),this.tilesLayer=w.tileLayer(o.link,r)}this._map?(this.LOG.debug(["displayMap"],"map exists"),this.pathDataLayer.clearLayers(),this.annotationsDataLayer.clearLayers(),this.positionDataLayer.clearLayers(),this.geoJsonLayer.clearLayers(),this.tileLayerGroup.clearLayers()):(this.LOG.debug(["displayMap"],"build map"),this._map=w.map(this.mapDiv.nativeElement,{preferCanvas:!0,layers:[this.tileLayerGroup,this.geoJsonLayer,this.pathDataLayer,this.annotationsDataLayer,this.positionDataLayer],zoomAnimation:!0,maxZoom:24}),this.tilesLayer.addTo(this._map),this.LOG.debug(["displayMap"],"build map",this.tilesLayer),this.geoJsonLayer.bringToBack(),this.tilesLayer.bringToBack(),this._map.on("load",(function(){return i.LOG.debug(["displayMap","load"],i._map.getCenter().lng,i.currentLong,i._map.getZoom())})),this._map.on("zoomend",(function(){i.firstDraw||(i.LOG.debug(["moveend"],i._map.getCenter()),i.currentZoom=i._map.getZoom())})),this._map.on("moveend",(function(){i.firstDraw||(i.LOG.debug(["moveend"],i._map.getCenter()),i.currentLat=i._map.getCenter().lat,i.currentLong=i._map.getCenter().lng)})));var s=(this.pathData||[]).length;this.LOG.debug(["displayMap"],"build map done",s);for(var p=0;p<s;p++){if(c=this.pathData[p])(l=this.updateGtsPath(c))&&(this.currentValuesMarkers.push(l.beforeCurrentValue),this.currentValuesMarkers.push(l.afterCurrentValue),this.currentValuesMarkers.push(l.currentValue))}this.LOG.debug(["displayMap"],"this.pathData",this.pathData),s=(this.annotationsData||[]).length;for(p=0;p<s;p++){var l,c=this.annotationsData[p];(l=this.updateGtsPath(c))&&("line"===c.render&&(this.currentValuesMarkers.push(l.beforeCurrentValue),this.currentValuesMarkers.push(l.afterCurrentValue)),this.currentValuesMarkers.push(l.currentValue))}this._map&&(this.pathDataLayer=w.featureGroup(this.currentValuesMarkers||[]).addTo(this._map)),this.LOG.debug(["displayMap","annotationsMarkers"],this.annotationsMarkers),this.LOG.debug(["displayMap","this.hiddenData"],this.hiddenData),this.LOG.debug(["displayMap","this.positionData"],this.positionData),s=(this.positionData||[]).length;for(p=0;p<s;p++){c=this.positionData[p];this.positionArraysMarkers=this.positionArraysMarkers.concat(this.updatePositionArray(c))}this.LOG.debug(["displayMap"],"this.po sitionData"),s=(this.annotationsData||[]).length;for(p=0;p<s;p++){c=this.annotationsData[p];this.positionArraysMarkers=this.positionArraysMarkers.concat(this.updateAnnotation(c))}this.LOG.debug(["displayMap"],"this.annotationsData"),(this._options.map.tiles||[]).forEach((function(e){i.LOG.debug(["displayMap"],e),i._options.map.showTimeRange?i.tileLayerGroup.addLayer(w.tileLayer(e.replace("{start}",S(i.timeStart).toISOString()).replace("{end}",S(i.timeEnd).toISOString()),{subdomains:"abcd",maxNativeZoom:19,maxZoom:40})):i.tileLayerGroup.addLayer(w.tileLayer(e,{subdomains:"abcd",maxNativeZoom:19,maxZoom:40}))})),this.LOG.debug(["displayMap"],"this.tiles"),this.LOG.debug(["displayMap","positionArraysMarkers"],this.positionArraysMarkers),this.LOG.debug(["displayMap","annotationsMarkers"],this.annotationsMarkers),s=(this.positionArraysMarkers||[]).length;for(p=0;p<s;p++){this.positionArraysMarkers[p].addTo(this.positionDataLayer)}s=(this.annotationsMarkers||[]).length;for(p=0;p<s;p++){this.annotationsMarkers[p].addTo(this.annotationsDataLayer)}this.LOG.debug(["displayMap","geoJson"],this.geoJson),s=(this.geoJson||[]).length;var h=function(t){var a=d.geoJson[t],n=_.getColor(t,d._options.scheme),o={style:function(){return{color:e.params&&e.params[t]&&e.params[t].color||n,fillColor:e.params&&e.params[t]?_.transparentize(e.params[t].fillColor||n):_.transparentize(n)}}};"Point"===a.geometry.type&&(o.pointToLayer=function(a,o){return w.marker(o,{icon:i.icon(n,e.params&&e.params[t]?e.params[t].marker:"circle"),opacity:1})});var r="",s=w.geoJSON(a,o);a.properties&&(Object.keys(a.properties).forEach((function(e){return r+="<b>"+e+"</b>: "+a.properties[e]+"<br />"})),s.bindPopup(r)),s.addTo(d.geoJsonLayer)},d=this;for(p=0;p<s;p++)h(p);if(this.pathData.length>0||this.positionData.length>0||this.annotationsData.length>0||this.geoJson.length>0){var g=w.featureGroup([this.geoJsonLayer,this.annotationsDataLayer,this.positionDataLayer,this.pathDataLayer]);this.LOG.debug(["displayMap","setView"],"fitBounds",g.getBounds()),this.LOG.debug(["displayMap","setView"],{lat:this.currentLat,lng:this.currentLong},{lat:this._options.map.startLat,lng:this._options.map.startLong}),this.bounds=g.getBounds(),setTimeout((function(){i.bounds&&i.bounds.isValid()?((i.currentLat||i._options.map.startLat)&&(i.currentLong||i._options.map.startLong)?i._map.setView({lat:i.currentLat||i._options.map.startLat||0,lng:i.currentLong||i._options.map.startLong||0},i.currentZoom||i._options.map.startZoom||10,{animate:!1,duration:500}):i._map.fitBounds(i.bounds,{padding:[1,1],animate:!1,duration:0}),i.currentLat=i._map.getCenter().lat,i.currentLong=i._map.getCenter().lng):(i.LOG.debug(["displayMap","setView"],{lat:i.currentLat,lng:i.currentLong}),i._map.setView({lat:i.currentLat||i._options.map.startLat||0,lng:i.currentLong||i._options.map.startLong||0},i.currentZoom||i._options.map.startZoom||10,{animate:!1,duration:500}))}),10)}else this.LOG.debug(["displayMap","lost"],"lost",this.currentZoom,this._options.map.startZoom),this._map.setView([this.currentLat||this._options.map.startLat||0,this.currentLong||this._options.map.startLong||0],this.currentZoom||this._options.map.startZoom||2,{animate:!1,duration:0});this.heatData&&this.heatData.length>0&&(this._heatLayer=w.heatLayer(this.heatData,{radius:this._options.map.heatRadius,blur:this._options.map.heatBlur,minOpacity:this._options.map.heatOpacity}),this._heatLayer.addTo(this._map)),this.firstDraw=!1,this.resizeMe(),this.patchMapTileGapBug(),this.chartDraw.emit(!0)}},e.prototype.updateAnnotation=function(e){var t,i,a=[];switch(e.render){case"marker":t=this.icon(e.color,e.marker),i=(e.path||[]).length;for(var n=0;n<i;n++){var o=e.path[n];(l=w.marker(o,{icon:t,opacity:1})).bindPopup(o.val.toString()),a.push(l)}break;case"weightedDots":i=(e.path||[]).length;for(n=0;n<i;n++){var r=e.path[n];if(0===(this._hiddenData||[]).filter((function(t){return t===e.key})).length){var s=parseInt(r.val,10);isNaN(s)&&(s=0);var p=50*(s-(e.minValue||0))/(e.maxValue||50),l=w.circleMarker(r,{radius:0===p?1:p,color:e.borderColor,fillColor:e.color,fillOpacity:.5,weight:1});this.addPopup(e,r.val,l),a.push(l)}}break;case"dots":default:i=(e.path||[]).length;for(n=0;n<i;n++){o=e.path[n];(l=w.circleMarker(o,{radius:e.baseRadius,color:e.color,fillColor:e.color,fillOpacity:1})).bindPopup(o.val.toString()),a.push(l)}}return a},e.prototype.updateGtsPath=function(e){for(var t,i=w.polyline(ce.pathDataToLeaflet(e.path,{to:0}),{color:e.color,opacity:1}),a=w.polyline(ce.pathDataToLeaflet(e.path,{from:0}),{color:e.color,opacity:.7}),n=(e.path||[]).length,o=0;o<n;o++){var r=e.path[o],s=void 0;s=this._options.timeMode&&"timestamp"===this._options.timeMode?parseInt(r.ts,10):(S(parseInt(r.ts,10)).utc(!0).toISOString()||"").replace("Z","UTC"===this._options.timeZone?"Z":""),t=w.circleMarker([r.lat,r.lon],{radius:ce.BASE_RADIUS,color:e.color,fillColor:e.color,fillOpacity:.7}).bindPopup("<p>"+s+"</p><p><b>"+e.key+"</b>: "+r.val.toString()+"</p>")}return n>0?{beforeCurrentValue:i,afterCurrentValue:a,currentValue:t}:void 0},e.prototype.addPopup=function(e,t,i){if(e){var a="";e.key&&(a="<p><b>"+e.key+"</b>: "+(t||"na")+"</p>"),Object.keys(e.properties||[]).forEach((function(t){return a+="<b>"+t+"</b>: "+e.properties[t]+"<br />"})),i.bindPopup(a)}},e.prototype.updatePositionArray=function(e){var t,i,a,n,o,r=[];switch(this.LOG.debug(["updatePositionArray"],e),e.render){case"path":t=w.polyline(e.positions,{color:e.color,opacity:1}),r.push(t);break;case"marker":i=this.icon(e.color,e.marker),o=(e.positions||[]).length;for(var s=0;s<o;s++){var p=e.positions[s];if(0===(this.hiddenData||[]).filter((function(t){return t===e.key})).length){var l=w.marker({lat:p[0],lng:p[1]},{icon:i,opacity:1});this.addPopup(e,p[2],l),r.push(l)}this.LOG.debug(["updatePositionArray","build marker"],i)}break;case"coloredWeightedDots":this.LOG.debug(["updatePositionArray","coloredWeightedDots"],e),a=[],n=[];for(var c=0;c<e.numColorSteps;c++)a[c]=0,n[c]=0;o=(e.positions||[]).length;for(s=0;s<o;s++){p=e.positions[s];if(0===(this._hiddenData||[]).filter((function(t){return t===e.key})).length){this.LOG.debug(["updatePositionArray","coloredWeightedDots","radius"],e.baseRadius*p[4]);l=w.circleMarker({lat:p[0],lng:p[1]},{radius:e.baseRadius*(parseInt(p[4],10)+1),color:e.borderColor,fillColor:_.rgb2hex(e.colorGradient[p[5]].r,e.colorGradient[p[5]].g,e.colorGradient[p[5]].b),fillOpacity:.7});this.addPopup(e,p[2],l),r.push(l)}}break;case"weightedDots":o=(e.positions||[]).length;for(s=0;s<o;s++){p=e.positions[s];if(0===(this._hiddenData||[]).filter((function(t){return t===e.key})).length){l=w.circleMarker({lat:p[0],lng:p[1]},{radius:e.baseRadius*(parseInt(p[4],10)+1),color:e.borderColor,fillColor:e.color,fillOpacity:.7});this.addPopup(e,p[2],l),r.push(l)}}break;case"dots":default:o=(e.positions||[]).length;for(s=0;s<o;s++){p=e.positions[s];if(0===(this._hiddenData||[]).filter((function(t){return t===e.key})).length){l=w.circleMarker({lat:p[0],lng:p[1]},{radius:e.baseRadius,color:e.borderColor,fillColor:e.color,fillOpacity:1});this.addPopup(e,p[2],l),r.push(l)}}}return r},e.prototype.resize=function(){var e=this;return new Promise((function(t){e.resizeMe(),t(!0)}))},e.prototype.onRangeSliderChange=function(e){this.LOG.debug(["onRangeSliderChange"],e),this.timeStart=e.value||S().valueOf(),this.timeEnd=e.highValue||S().valueOf(),this.drawMap(!0)},e.prototype.onRangeSliderWindowChange=function(e){this.LOG.debug(["onRangeSliderWindowChange"],e),this.lowerTimeBound===e.min&&this.upperTimeBound===e.max||(this.lowerTimeBound=e.min,this.upperTimeBound=e.max)},e.prototype.onSliderChange=function(e){this.LOG.debug(["onSliderChange"],e,S(e.value).toISOString()),this._firstDraw=!1,this.timeEnd!==e.value&&(this.timeSpan=this.timeSpan||this._options.map.timeSpan,this.timeEnd=e.value||S().valueOf(),this.timeStart=(e.value||S().valueOf())-this.timeSpan/this.divider,this.LOG.debug(["onSliderChange"],S(this.timeStart).toISOString(),S(this.timeEnd).toISOString()),this.change.emit(this.timeStart),this.drawMap(!0))},e.prototype.updateTimeSpan=function(e){this.LOG.debug(["updateTimeSpan"],e.target.value),this.timeSpan!==e.target.value&&(this.timeSpan=e.target.value,this.timeStart=(this.timeEnd||S().valueOf())-this.timeSpan/this.divider,this.drawMap(!0))},e.decorators=[{type:t.Component,args:[{selector:"warpview-map",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper" #wrapper (resized)="resizeMe()">\n  <div class="map-container">\n    <div #mapDiv></div>\n    <div *ngIf="_options.map.showTimeSlider && !_options.map.showTimeRange" #timeSlider>\n      <warpview-slider\n        [min]="_options.map.timeSliderMin / divider" [max]="_options.map.timeSliderMax / divider"\n        [value]="minTimeValue / divider"\n        [step]="_options.map.timeSliderStep" [mode]="_options.map.timeSliderMode"\n        (change)="onSliderChange($event)"\n        [debug]="debug"\n      ></warpview-slider>\n    </div>\n    <div *ngIf="_options.map.showTimeSlider && _options.map.showTimeRange" #timeRangeSlider>\n      \x3c!--    <warpview-range-slider *ngIf="!_options.map.timeSpan && lowerTimeBound"\n                                  [min]="lowerTimeBound" [max]="upperTimeBound"\n                                  [minValue]="minTimeValue / divider"\n                                  [maxValue]="maxTimeValue / divider"\n                                  [step]="_options.map.timeSliderStep"\n                                  [mode]="_options.map.timeSliderMode"\n                                  [debug]="_debug"\n                                  (change)="onRangeSliderChange($event)"\n           ></warpview-range-slider>--\x3e\n\n      <warpview-range-slider\n        [min]="(_options.map.timeSliderMin / divider)" [max]="(_options.map.timeSliderMax / divider)"\n        [minValue]="minTimeValue / divider"\n        [maxValue]="maxTimeValue / divider"\n        [mode]="_options.map.timeSliderMode"\n        [debug]="debug"\n        (change)="onRangeSliderWindowChange($event)"\n      ></warpview-range-slider>\n      <warpview-slider *ngIf="_options.map.timeSpan && lowerTimeBound"\n                       [min]="lowerTimeBound" [max]="upperTimeBound"\n                       [step]="(this.timeSpan || this._options.map.timeSpan) / divider"\n                       [mode]="_options.map.timeSliderMode"\n                       [debug]="debug"\n                       (change)="onSliderChange($event)"\n      ></warpview-slider>\n      <div *ngIf="_options.map?.timeSpan">\n        <label for="timeSpan">Timespan: </label>\n        <select id="timeSpan" (change)="updateTimeSpan($event)">\n          <option *ngFor="let ts of _options.map.timeSpanList" [value]="ts.value">{{ts.label}}</option>\n        </select>\n      </div>\n    </div>\n    <warpview-heatmap-sliders\n      *ngIf="_options.map.heatControls"\n      (heatRadiusDidChange)="heatRadiusDidChange($event)"\n      (heatBlurDidChange)="heatBlurDidChange($event)"\n      (heatOpacityDidChange)="heatOpacityDidChange($event)"\n    ></warpview-heatmap-sliders>\n  </div>\n\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host,warp-view-map,warpview-map{width:100%;height:100%;min-height:100px}:host div.wrapper,warp-view-map div.wrapper,warpview-map div.wrapper{width:100%;height:100%;min-height:100px;padding:var(--warp-view-map-margin);overflow:hidden}:host div.wrapper div.leaflet-container,:host div.wrapper div.map-container,warp-view-map div.wrapper div.leaflet-container,warp-view-map div.wrapper div.map-container,warpview-map div.wrapper div.leaflet-container,warpview-map div.wrapper div.map-container{min-width:100%;min-height:100px;width:100%;height:100%;position:relative;overflow:hidden}:host div.wrapper .leaflet-container,warp-view-map div.wrapper .leaflet-container,warpview-map div.wrapper .leaflet-container{min-width:100%;min-height:100%;width:100%;height:100%}']}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:M},{type:t.Renderer2}]},e.propDecorators={mapDiv:[{type:t.ViewChild,args:["mapDiv",{static:!0}]}],wrapper:[{type:t.ViewChild,args:["wrapper",{static:!0}]}],timeSlider:[{type:t.ViewChild,args:["timeSlider",{static:!1}]}],timeRangeSlider:[{type:t.ViewChild,args:["timeRangeSlider",{static:!1}]}],heatData:[{type:t.Input,args:["heatData"]}],responsive:[{type:t.Input,args:["responsive"]}],showLegend:[{type:t.Input,args:["showLegend"]}],width:[{type:t.Input,args:["width"]}],height:[{type:t.Input,args:["height"]}],debug:[{type:t.Input,args:["debug"]}],options:[{type:t.Input,args:["options"]}],data:[{type:t.Input,args:["data"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],change:[{type:t.Output,args:["change"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}]},e}();var de=function(){function e(){this.heatRadiusDidChange=new t.EventEmitter,this.heatBlurDidChange=new t.EventEmitter,this.heatOpacityDidChange=new t.EventEmitter}return e.prototype.radiusChanged=function(e){this.heatRadiusDidChange.emit(e)},e.prototype.blurChanged=function(e){this.heatBlurDidChange.emit(e)},e.prototype.opacityChanged=function(e){this.heatOpacityDidChange.emit(e)},e.decorators=[{type:t.Component,args:[{selector:"warpview-heatmap-sliders",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div>\n  <div class="container">\n    <div class="options">\n      <label for="radius">Radius </label>\n      <input type="number" id="radius" value="25" min="10" max="50" (click)="radiusChanged($event.target)"/>\n      <br/>\n      <label for="blur">Blur </label>\n      <input type="number" id="blur" value="15" min="10" max="50" (click)="blurChanged($event.target)"/>\n      <br/>\n      <label for="opacity">Opacity </label>\n      <input type="number" id="opacity" value="50" min="10" max="100" (click)="opacityChanged($event.target)"/>\n    </div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}']}]}],e.propDecorators={radiusValue:[{type:t.Input,args:["radiusValue"]}],minRadiusValue:[{type:t.Input,args:["minRadiusValue"]}],maxRadiusValue:[{type:t.Input,args:["maxRadiusValue"]}],blurValue:[{type:t.Input,args:["blurValue"]}],minBlurValue:[{type:t.Input,args:["minBlurValue"]}],maxBlurValue:[{type:t.Input,args:["maxBlurValue"]}],heatRadiusDidChange:[{type:t.Output,args:["heatRadiusDidChange"]}],heatBlurDidChange:[{type:t.Output,args:["heatBlurDidChange"]}],heatOpacityDidChange:[{type:t.Output,args:["heatOpacityDidChange"]}]},e}();var ge=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.chartDraw=new t.EventEmitter,s._type="pie",s.layout={showlegend:!0,legend:{orientation:"h",bgcolor:"transparent"},orientation:270,margin:{t:10,b:25,r:10,l:10}},s.LOG=new N(i,s._debug),s}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),n(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=U.mergeDeep(this._options,e)),this.drawChart()},i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.layout.legend.font={color:this.getCSSColor(this.el.nativeElement,"--warp-view-font-color","#000")},this.layout.textfont={color:this.getCSSColor(this.el.nativeElement,"--warp-view-font-color","#000")},this.loading=!1)},i.prototype.convert=function(e){var t=this,i=e.data,a=[];this.LOG.debug(["convert","gtsList"],i);var n={values:[],labels:[],marker:{colors:[],line:{width:3,color:[]}},textfont:{color:this.getLabelColor(this.el.nativeElement)},hoverlabel:{bgcolor:this.getCSSColor(this.el.nativeElement,"--warp-view-chart-legend-bg","#000000"),bordercolor:"grey",font:{color:this.getCSSColor(this.el.nativeElement,"--warp-view-chart-legend-color","#ffffff")}},type:"pie"};return i.forEach((function(i,a){if(!V.isGts(i)){var o=_.getColor(a,t._options.scheme),r=((e.params||[])[a]||{datasetColor:o}).datasetColor||o;n.values.push(i[1]),n.labels.push(i[0]),n.marker.colors.push(_.transparentize(r)),n.marker.line.color.push(r),"donut"===t._type&&(n.hole=.5),t.unit&&(n.title={text:t.unit})}})),n.values.length>0&&a.push(n),this.noData=0===a.length,a},i.decorators=[{type:t.Component,args:[{selector:"warpview-pie",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display or wrong data format.</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}]},i}(z);var ue=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.CHART_MARGIN=.05,r._type="gauge",r.LOG=new N(i,r._debug),r}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),n(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=U.mergeDeep(this._options,e)),this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.LOG.debug(["drawChart","plotlyData"],this.plotlyData,this._type),this.layout.autosize=!0,this.layout.grid={rows:Math.ceil(this.plotlyData.length/2),columns:2,pattern:"independent",xgap:.2,ygap:.2},this.layout.margin={t:25,r:25,l:25,b:25},"bullet"===this._type&&(this.layout.height=100*this.plotlyData.length,this.el.nativeElement.style.height=this.layout.height+"px",this.layout.margin.l=300,this.layout.yaxis={automargin:!0},this.layout.grid={rows:this.plotlyData.length,columns:1,pattern:"independent"}),this.loading=!1)},i.prototype.convert=function(e){var t=this;this.LOG.debug(["convert"],e);var i=e.data,a=[],n=Number.MIN_VALUE;if(this.LOG.debug(["convert","gtsList"],i),i&&0!==i.length&&!(i[0].length<2)){i.forEach((function(e){return n=Math.max(n,e[1])}));var o=0,r=-1/(i.length/2);return i.forEach((function(s,p){p%2!=0?o=.5:(o=0,r+=1/(i.length/2));var l=_.getColor(s.id||p,t._options.scheme),c=((e.params||[])[p]||{datasetColor:l}).datasetColor||l,h=i.length>1?{x:[o+t.CHART_MARGIN,o+.5-t.CHART_MARGIN],y:[r+t.CHART_MARGIN,r+1/(i.length/2)-2*t.CHART_MARGIN]}:{x:[0,1],y:[0,1]};("bullet"===t._type||e.params&&e.params[p].type&&"bullet"===e.params[p].type)&&(h.x=[t.CHART_MARGIN,1-t.CHART_MARGIN],h.y=[(p>0?p/i.length:0)+t.CHART_MARGIN,(p+1)/i.length-t.CHART_MARGIN]),a.push({domain:h,align:"left",value:s[1],delta:{reference:e.params&&e.params[p].delta?e.params[p].delta+s[1]:0,font:{color:t.getLabelColor(t.el.nativeElement)}},title:{text:s[0],align:"center",font:{color:t.getLabelColor(t.el.nativeElement)}},number:{font:{color:t.getLabelColor(t.el.nativeElement)}},type:"indicator",mode:e.params&&e.params[p].delta?"number+delta+gauge":"gauge+number",gauge:{bgcolor:"transparent",shape:e.params&&e.params[p].type?e.params[p].type:t._type||"gauge",bordercolor:t.getGridColor(t.el.nativeElement),axis:{range:[null,n],tickcolor:t.getGridColor(t.el.nativeElement),tickfont:{color:t.getGridColor(t.el.nativeElement)}},bar:{color:_.transparentize(c),line:{width:1,color:c}}}}),t.LOG.debug(["convert","dataList"],p)})),this.LOG.debug(["convert","dataList"],a),a}},i.decorators=[{type:t.Component,args:[{selector:"warpview-gauge",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width,100%);height:var(--warp-view-chart-height,100%)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}]},i}(z);var we=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.pointHover=new t.EventEmitter,s.warpViewChartResize=new t.EventEmitter,s.chartDraw=new t.EventEmitter,s.boundsDidChange=new t.EventEmitter,s.displayExpander=!0,s._type="line",s.visibility=[],s.expanded=!1,s._standalone=!0,s.maxTick=Number.MIN_VALUE,s.minTick=Number.MAX_VALUE,s.visibleGtsId=[],s.gtsId=[],s.dataHashset={},s.lineHeight=30,s.chartBounds=new G,s.layout={showlegend:!1,hovermode:"closest",xaxis:{gridwidth:1,fixedrange:!1,autorange:!1,automargin:!1,showticklabels:!0},autosize:!1,autoexpand:!1,yaxis:{showticklabels:!1,fixedrange:!0,dtick:1,gridwidth:1,tick0:0,nticks:2,rangemode:"tozero",tickson:"boundaries",automargin:!0,showline:!0,zeroline:!0},margin:{t:30,b:2,r:10,l:10}},s.marginLeft=50,s._autoResize=!1,s.LOG=new N(i,s._debug),s}return L(i,e),Object.defineProperty(i.prototype,"hiddenData",{set:function(e){var t=this,i=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","previousVisibility"],i),this._hiddenData=e,this.visibility=[],this.visibleGtsId.forEach((function(i){return t.visibility.push(e.indexOf(i)<0&&-1!==i)})),this.LOG.debug(["hiddenData","hiddendygraphfullv"],this.visibility);var a=JSON.stringify(this.visibility);if(this.LOG.debug(["hiddenData","json"],i,a),i!==a){var n=[],o=[];this.gtsId.forEach((function(e,i){t._hiddenData.indexOf(e)>-1?o.push(i):n.push(i)})),n.length>0&&this.graph.restyleChart({visible:!0},n),o.length>0&&this.graph.restyleChart({visible:!1},o),this.LOG.debug(["hiddendygraphtrig","destroy"],"redraw by visibility change")}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"standalone",{get:function(){return this._standalone},set:function(e){this._standalone!==e&&(this._standalone=e,this.drawChart())},enumerable:!0,configurable:!0}),i.prototype.handleKeyDown=function(e){var t=this;"Control"===e.key&&(this.trimmed=setInterval((function(){t.toolTip.nativeElement.querySelector("#tooltip-body")&&t.toolTip.nativeElement.querySelector("#tooltip-body").classList.add("full")}),100))},i.prototype.handleKeyup=function(e){this.LOG.debug(["document:keyup"],e),"Control"===e.key&&this.toolTip.nativeElement.querySelector("#tooltip-body")&&(this.trimmed&&clearInterval(this.trimmed),this.toolTip.nativeElement.querySelector("#tooltip-body").classList.remove("full"))},i.prototype.update=function(e,t){e&&(this._options=U.mergeDeep(this._options,e)),this.drawChart(t)},i.prototype.updateBounds=function(e,t,i){this.LOG.debug(["updateBounds"],e,t,this._options),this._options.bounds.minDate=e,this._options.bounds.maxDate=t,this.layout.xaxis.autorange=!1,this.LOG.debug(["updateBounds"],S.tz(e/this.divider,this._options.timeZone).toISOString(),S.tz(t/this.divider,this._options.timeZone).toISOString()),this.minTick=e,this.maxTick=t,this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.tick0=e/this.divider,this.layout.xaxis.range=[e/this.divider,t/this.divider]):(this.layout.xaxis.tick0=S.tz(e/this.divider,this._options.timeZone).toISOString(),this.layout.xaxis.range=[S.tz(e/this.divider,this._options.timeZone).toISOString(),S.tz(t/this.divider,this._options.timeZone).toISOString()]),this.layout.margin.l=i,this.marginLeft=i,this.layout=O({},this.layout),this.LOG.debug(["updateBounds"],O({},this.layout.xaxis.range))},i.prototype.drawChart=function(e){if(void 0===e&&(e=!1),this.initChart(this.el)){this.el.nativeElement.style.display="block",this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.LOG.debug(["drawChart","hiddenData"],this._hiddenData),this.LOG.debug(["drawChart","this._options.bounds"],this._options.bounds),this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.yaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.yaxis.showline=!!this._standalone,this.layout.yaxis.zerolinecolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.gridcolor=this.getGridColor(this.el.nativeElement),this.layout.xaxis.autorange=!!this._standalone,this.layout.xaxis.showticklabels=!!this._standalone,this.displayExpander=this.plotlyData.length>1;var t=this.plotlyData.filter((function(e){return e.y.length>0})).length;this.layout.margin.l=this._standalone?10:50,this.layout.margin.b=this._standalone?50:1;var i=(this.expanded?this.lineHeight*t:this.lineHeight)+this.layout.margin.t+this.layout.margin.b;this.el.nativeElement.style.height=i+"px",this.height=i,this.layout.height=this.height,this.LOG.debug(["drawChart","height"],this.height,t,i),this.layout.yaxis.range=[0,this.expanded?t:1],this.LOG.debug(["drawChart","this.layout"],this.layout),this._options.timeMode&&"timestamp"===this._options.timeMode?(this.layout.xaxis.tick0=this.minTick/this.divider,this.layout.xaxis.range=[this.minTick/this.divider,this.maxTick/this.divider],this.layout.xaxis.type="linear"):(this.layout.xaxis.tick0=S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0),this.layout.xaxis.range=[S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0),S.tz(this.maxTick/this.divider,this._options.timeZone).toISOString(!0)],this.layout.xaxis.type="date"),this.plotlyConfig.scrollZoom=!0,this.plotlyConfig=O({},this.plotlyConfig),this.layout=O({},this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig,this.plotlyData),this.loading=!1}else this.el.nativeElement.style.display="none"},i.prototype.relayout=function(e){e["xaxis.range"]&&2===e["xaxis.range"].length?(this.LOG.debug(["relayout","updateBounds","xaxis.range"],e["xaxis.range"]),this.chartBounds.msmin=e["xaxis.range"][0],this.chartBounds.msmax=e["xaxis.range"][1],this.chartBounds.tsmin=S.tz(S(this.chartBounds.msmin),this._options.timeZone).valueOf(),this.chartBounds.tsmax=S.tz(S(this.chartBounds.msmax),this._options.timeZone).valueOf()):e["xaxis.range[0]"]&&e["xaxis.range[1]"]?(this.LOG.debug(["relayout","updateBounds","xaxis.range[x]"],e["xaxis.range[0]"]),this.chartBounds.msmin=e["xaxis.range[0]"],this.chartBounds.msmax=e["xaxis.range[1]"],this.chartBounds.tsmin=S.tz(S(this.chartBounds.msmin),this._options.timeZone).valueOf(),this.chartBounds.tsmax=S.tz(S(this.chartBounds.msmax),this._options.timeZone).valueOf()):e["xaxis.autorange"]&&(this.LOG.debug(["relayout","updateBounds","autorange"],e),this.chartBounds.tsmin=this.minTick/this.divider,this.chartBounds.tsmax=this.maxTick/this.divider),this.emitNewBounds(S.utc(this.chartBounds.tsmin).valueOf(),S.utc(this.chartBounds.msmax).valueOf())},i.prototype.hover=function(e){this.LOG.debug(["hover"],e);var t=this.toolTip.nativeElement;this.pointHover.emit({x:e.event.offsetX,y:e.event.offsetY});var i=e.xvals[0];e.points[0]&&(i=e.points[0].x);var a=this.el.nativeElement.getBoundingClientRect(),n=this.plotlyData.filter((function(e){return e.y.length>0})).length;t.style.opacity="1",t.style.display="block",t.style.paddingLeft=(this._standalone?0:40)+"px",t.style.top=(this.expanded?n-1-(e.points[0].y+.5):-1)*this.lineHeight+this.layout.margin.t+6+"px",t.classList.remove("right","left"),t.innerHTML='<div class="tooltip-body trimmed" id="tooltip-body">\n<span class="tooltip-date">'+("timestamp"===this._options.timeMode?i:S(i).utc().toISOString().replace("Z","UTC"===this._options.timeZone?"Z":"")||"")+"</span>\n<ul>\n<li>"+V.formatLabel(e.points[0].data.name)+': <span class="value">'+e.points[0].text+"</span></li>\n</ul>\n      </div>",e.event.offsetX>a.width/2?t.classList.add("left"):t.classList.add("right"),t.style.pointerEvents="none"},i.prototype.unhover=function(){this.toolTip.nativeElement.style.display="none"},i.prototype.afterPlot=function(e){this.loading=!1,this.chartBounds.tsmin=this.minTick,this.chartBounds.tsmax=this.maxTick,this.chartDraw.emit(this.chartBounds),this.LOG.debug(["afterPlot"],this.chartBounds,e)},i.prototype.emitNewBounds=function(e,t){this._options.timeMode&&"timestamp"===this._options.timeMode?this.boundsDidChange.emit({bounds:{min:e,max:t},source:"annotation"}):this.boundsDidChange.emit({bounds:{min:S.tz(e,this._options.timeZone).valueOf(),max:S.tz(t,this._options.timeZone).valueOf()},source:"annotation"})},i.prototype.convert=function(e){var t=this,i=[],a=V.flatDeep(V.flattenGtsIdArray(e.data,0).res);this.maxTick=Number.NEGATIVE_INFINITY,this.minTick=Number.POSITIVE_INFINITY,this.visibleGtsId=[],this.gtsId=[];var n=a.filter((function(e){return e.v&&V.isGtsToPlot(e)}));a=a.filter((function(e){return e.v&&!V.isGtsToPlot(e)}));var o=!0,r=100*V.getDivider(this._options.timeUnit);return a.forEach((function(e){var t=e.v.map((function(e){return e[0]})),i=e.v.length;o=(o=o&&t[0]>-r&&t[0]<r)&&t[i-1]>-r&&t[i-1]<r})),o||"timestamp"===this._options.timeMode?this.layout.xaxis.type="linear":this.layout.xaxis.type="date",a.forEach((function(a,n){if(a.v){var r=a.v.length,s=V.serializeGtsMetadata(a),p=_.getColor(a.id,t._options.scheme),l=((e.params||[])[n]||{datasetColor:p}).datasetColor||p,c={type:"scatter",mode:"markers",name:s,x:[],y:[],text:[],hoverinfo:"none",connectgaps:!1,visible:!(t._hiddenData.filter((function(e){return e===a.id})).length>0),line:{color:l},marker:{symbol:"line-ns-open",color:l,size:20,width:5}};t.visibleGtsId.push(a.id),t.gtsId.push(a.id),t._options.timeMode&&"timestamp"===t._options.timeMode?t.layout.xaxis.type="linear":t.layout.xaxis.type="date";var h=a.v.map((function(e){return e[0]}));if(c.text=a.v.map((function(e){return e[e.length-1]})),c.y=a.v.map((function(){return(t.expanded?n:0)+.5})),r>0){t.minTick=h[0],t.maxTick=h[0];for(var d=1;d<r;d++){var g=h[d];t.minTick=g<t.minTick?g:t.minTick,t.maxTick=g>t.maxTick?g:t.maxTick}}o||"timestamp"===t._options.timeMode?c.x=h:"UTC"!==t._options.timeZone?c.x=h.map((function(e){return S.utc(e/t.divider).tz(t._options.timeZone).toISOString()})):c.x=h.map((function(e){return S.utc(e/t.divider).toISOString()})),c.x.length>0&&i.push(c)}})),n.length>0&&(n.forEach((function(e){e.v.forEach((function(e){var i=e[0];i<t.minTick&&(t.minTick=i),i>t.maxTick&&(t.maxTick=i)}))})),0===a.length&&(this.dataHashset[this.minTick]||(this.dataHashset[this.minTick]=[0]),this.dataHashset[this.maxTick]||(this.dataHashset[this.maxTick]=[0]),this.visibility.push(!1),this.visibleGtsId.push(-1))),o&&(this._options.timeMode="timestamp"),i},i.prototype.toggle=function(){this.expanded=!this.expanded,this.drawChart()},i.prototype.setRealBounds=function(e){this.minTick=e.tsmin,this.maxTick=e.tsmax,this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=this.minTick,this._options.bounds.maxDate=this.maxTick;var t={tick0:void 0,range:[]};this._options.timeMode&&"timestamp"===this._options.timeMode?(t.tick0=this.minTick/this.divider,t.range=[this.minTick/this.divider,this.maxTick/this.divider]):(t.tick0=S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0),t.range=[S.tz(this.minTick/this.divider,this._options.timeZone).toISOString(!0),S.tz(this.maxTick/this.divider,this._options.timeZone).toISOString(!0)]),this.layout.xaxis=t,this.layout=O({},this.layout)},i.decorators=[{type:t.Component,args:[{selector:"warpview-annotation",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer (mouseleave)="hideTooltip()">\n  <button *ngIf="displayExpander && plotlyData && plotlyData.length > 1" class="expander" (click)="toggle()"\n          title="collapse/expand">+/-</button>\n  <div #toolTip class="tooltip"></div>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <div *ngIf="!loading && !noData">\n    <div class="upperLine" [ngStyle]="{left: standalone? \'10px\': marginLeft + \'px\'}"></div>\n    <warpview-plotly #graph\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot($event)"\n                     (relayout)="relayout($event)" className="chart" (hover)="hover($event)" (unhover)="unhover()"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host{display:block}:host .expander{position:absolute;top:0;left:0;width:35px;z-index:9}:host #chartContainer{height:auto;position:relative}:host #chartContainer div.upperLine{position:absolute;top:30px;left:0;height:0;border-bottom:1px solid var(--warp-view-chart-grid-color,#8e8e8e);right:10px}:host .date{text-align:right;display:block;height:20px;vertical-align:middle;line-height:20px;position:absolute;top:0;left:40px}:host .chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}:host .tooltip{position:absolute;width:calc(100% - 50px);z-index:999;margin-left:10px;top:-1000px}:host .tooltip .tooltip-body{background-color:#ffffffcc;padding-left:10px;padding-right:10px;width:auto;max-width:100%;vertical-align:middle;line-height:20px;height:50px;overflow:visible;margin:1px;color:var(--warp-view-annotationtooltip-font-color)}:host .tooltip .tooltip-body ul{list-style:none;padding-top:0;margin-top:10px}:host .tooltip .tooltip-body.trimmed{max-width:49%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .tooltip .tooltip-body.full{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .tooltip .tooltip-body .timestamp{font-size:1rem}:host .tooltip .tooltip-body .value{color:var(--warp-view-annotationtooltip-value-font-color)}:host .tooltip .tooltip-body .tooltip-date{font-weight:700;font-size:.8rem;text-align:left;display:block;width:100%;height:.8rem;padding-top:5px;vertical-align:middle;line-height:.8rem}:host .tooltip .tooltip-body .round{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;margin-right:5px}:host .tooltip.left .tooltip-body{text-align:left;float:left}:host .tooltip.left .tooltip-body .tooltip-date{text-align:left}:host .tooltip.right .tooltip-body{text-align:right;float:right}:host .tooltip.right .tooltip-body .tooltip-date{text-align:right}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={chartContainer:[{type:t.ViewChild,args:["chartContainer",{static:!0}]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],type:[{type:t.Input,args:["type"]}],standalone:[{type:t.Input,args:["standalone"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}],handleKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]},{type:t.HostListener,args:["document:keydown",["$event"]]}],handleKeyup:[{type:t.HostListener,args:["keyup",["$event"]]},{type:t.HostListener,args:["document:keyup",["$event"]]}]},i}(z);var fe=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={paper_bgcolor:"rgba(0,0,0,0)",showlegend:!0,legend:{orientation:"h"},font:{size:12,familly:"'Quicksand', sans-serif"},polar:{bgcolor:"rgba(0,0,0,0)",angularaxis:{type:"category"},radialaxis:{visible:!0}},orientation:270,margin:{t:10,b:25,r:10,l:10}},r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),n(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=U.mergeDeep(this._options,e)),this.drawChart()},i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.layout.polar.radialaxis.color=this.getGridColor(this.el.nativeElement),this.layout.polar.angularaxis.color=this.getGridColor(this.el.nativeElement),this.layout.showlegend=!!this.showLegend,this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.loading=!1)},i.prototype.convert=function(e){var t=this,i=[],a=(V.getDivider(this._options.timeUnit),V.flatDeep(V.flattenGtsIdArray(e.data,0).res));this.LOG.debug(["convert","gtsList"],a);var n=Number.MAX_VALUE,o=Number.MIN_VALUE;return a.forEach((function(a,r){var s=_.getColor(r,t._options.scheme),p=((e.params||[])[a.id]||{datasetColor:s}).datasetColor||s,l={r:[],theta:[],marker:{line:{color:p,width:1},color:_.transparentize(p)},fillcolor:_.transparentize(p),hoverinfo:"none",name:V.serializeGtsMetadata(a),text:V.serializeGtsMetadata(a),fill:"toself",type:"barpolar"};a.v.forEach((function(e){var i=e[0];n=Math.min(n,e[e.length-1]),o=Math.max(o,e[e.length-1]),l.r.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?l.theta.push(i.toString()):l.theta.push(S.tz(S.utc(i/t.divider),t._options.timeZone).toISOString())})),t.unit&&(l.title={text:t.unit}),i.push(l)})),this.layout.polar.radialaxis.range=[n,o],i},i.decorators=[{type:t.Component,args:[{selector:"warpview-polar",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host .bglayer{display:none}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i}(z);var ve=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={paper_bgcolor:"transparent",showlegend:!0,legend:{orientation:"h"},font:{size:12},polar:{bgcolor:"transparent",angularaxis:{type:"category"},radialaxis:{visible:!0}},margin:{t:0,b:25,r:10,l:10}},r.LOG=new N(i,r._debug),r}return L(i,e),i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),n(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=U.mergeDeep(this._options,e)),this.drawChart()},i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.layout.polar.radialaxis.color=this.getGridColor(this.el.nativeElement),this.layout.polar.angularaxis.color=this.getGridColor(this.el.nativeElement),this.layout.showlegend=this.showLegend,this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.LOG.debug(["drawChart","this.plotlyData"],this.plotlyData),this.loading=!1)},i.prototype.convert=function(e){var t=this,i=[],a=(V.getDivider(this._options.timeUnit),V.flatDeep(V.flattenGtsIdArray(e.data,0).res));this.LOG.debug(["convert","gtsList"],a);var n=Number.MAX_VALUE,o=Number.MIN_VALUE;return a.forEach((function(a,r){var s=_.getColor(r,t._options.scheme),p=((e.params||[])[a.id]||{datasetColor:s}).datasetColor||s,l={r:[],theta:[],line:{color:p},marker:{line:{color:p,width:1},color:_.transparentize(p)},fillcolor:_.transparentize(p),hoverinfo:"none",name:V.serializeGtsMetadata(a),text:V.serializeGtsMetadata(a),type:"scatterpolar",fill:"toself"};a.v.forEach((function(e){var i=e[0];l.r.push(e[e.length-1]),n=Math.min(n,e[e.length-1]),o=Math.max(o,e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?l.theta.push(i.toString()):l.theta.push(S.tz(S.utc(i/t.divider),t._options.timeZone).toISOString())})),i.push(l)})),this.layout.polar.radialaxis.range=[n,o],i},i.decorators=[{type:t.Component,args:[{selector:"warpview-radar",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host .bglayer{display:none}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i}(z);var me=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.showLine=!1,s.isAlone=!1,s.initialChartHeight=400,s.initialMapHeight=400,s.warpViewChartResize=new t.EventEmitter,s._options=O({},new B,{showControls:!0,showGTSTree:!0,showDots:!0,timeZone:"UTC",timeUnit:"us",timeMode:"date",bounds:{}}),s._toHide=[],s.showChart=!0,s.showMap=!1,s.timeClipValue="",s.kbdLastKeyPressed=[],s.warningMessage="",s.loading=!1,s.gtsIdList=[],s.kbdCounter=0,s.gtsFilterCount=0,s.gtsBrowserIndex=-1,s._gtsFilter="x",s._type="line",s.chartBounds={tsmin:Number.MAX_VALUE,tsmax:Number.MIN_VALUE,msmax:"",msmin:"",marginLeft:0},s.preventDefaultKeyList=["Escape","/"],s.preventDefaultKeyListInModals=["Escape","ArrowUp","ArrowDown"," ","/"],s.LOG=new N(i,s._debug),s}return L(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gtsFilter",{get:function(){return this._gtsFilter},set:function(e){this._gtsFilter=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.ngAfterViewInit=function(){this.drawChart(!0),this.resizeArea()},i.prototype.handleKeydown=function(e){this.LOG.debug(["handleKeydown"],e),this.isAlone||this.handleKeyPress(e).then((function(){}))},i.prototype.stateChange=function(e){var t=this;switch(this.LOG.debug(["stateChange"],e),e.id){case"timeSwitch":e.state?this._options.timeMode="timestamp":this._options.timeMode="date",this.drawChart();break;case"typeSwitch":e.state?this._type="step":this._type="line",this.drawChart();break;case"chartSwitch":this.showChart=e.state,this.drawChart();break;case"mapSwitch":this.showMap=e.state,this.showMap&&requestAnimationFrame((function(){return t.map.resize()}))}},i.prototype.boundsDidChange=function(e){this.LOG.debug(["updateBounds"],e),this._options.bounds=this._options.bounds||{},this._options.bounds.minDate!==e.bounds.min&&this._options.bounds.maxDate!==e.bounds.max&&(this._options.bounds=this._options.bounds||{},this._options.bounds.minDate=e.bounds.min,this._options.bounds.maxDate=e.bounds.max,"chart"===e.source?this.annotation.updateBounds(e.bounds.min,e.bounds.max,e.bounds.marginLeft):"annotation"===e.source&&this.chart.updateBounds(e.bounds.min,e.bounds.max),this.LOG.debug(["updateBounds"],S.tz(e.bounds.min,this._options.timeZone).toDate(),S.tz(e.bounds.max,this._options.timeZone).toDate()),this.line.nativeElement.style.left="-100px")},i.prototype.onWarpViewModalClose=function(){this.mainPlotDiv.nativeElement.focus()},i.prototype.warpViewSelectedGTS=function(e){var t=this;this.LOG.debug(["warpViewSelectedGTS"],e),this._toHide.find((function(t){return t===e.gts.id}))||e.selected?e.selected&&(this._toHide=this._toHide.filter((function(t){return t!==e.gts.id}))):this._toHide.push(e.gts.id),this.LOG.debug(["warpViewSelectedGTS","this._toHide"],this._toHide),this.ngZone.run((function(){t._toHide=D(t._toHide)}))},i.prototype.handleMouseMove=function(e){e.preventDefault(),this.showLine&&this.line&&(this.line.nativeElement.style.left=Math.max(e.pageX-this.left,50)+"px")},i.prototype.handleMouseEnter=function(e){e.preventDefault(),this.left=this.left||this.main.nativeElement.getBoundingClientRect().left,this.showLine=!0,this.line&&this.renderer.setStyle(this.line.nativeElement,"display","block")},i.prototype.handleMouseOut=function(e){this.line&&(this.showLine=!1,this.renderer.setStyle(this.line.nativeElement,"left","-100px"),this.renderer.setStyle(this.line.nativeElement,"display","none"))},i.prototype.update=function(e,t){var i=this;if(e){var a=!1;Object.keys(e).forEach((function(t){a=!i._options.hasOwnProperty(t)||(a||!n(e[t],i._options[t]))})),this.LOG&&this.LOG.debug(["onOptions","optionChanged"],a),a&&(this.LOG&&this.LOG.debug(["onOptions","options"],e),this._options=e,this.drawChart(!1)),this.drawChart(t)}else this.drawChart(t)},i.prototype.inputTextKeyboardEvents=function(e){e.stopImmediatePropagation(),"Enter"===e.key?this.applyFilter():"Escape"===e.key&&(this.pushKbdEvent("Escape"),this.modal.close())},i.prototype.tzSelected=function(){var e=this.tzSelector.nativeElement.value;this.LOG.debug(["timezone","tzselect"],e),this._options.timeZone=e,this.tzSelector.nativeElement.setAttribute("class","UTC"===e?"defaulttz":"customtz"),this.drawChart()},i.prototype.getTimeClip=function(){return this.LOG.debug(["getTimeClip"],this.chart.getTimeClip()),this.chart.getTimeClip()},i.prototype.resizeChart=function(e){this.LOG.debug(["resizeChart"],e),this.sizeService.change(new Y(this.width,e))},i.prototype.drawChart=function(e){var t=this;if(void 0===e&&(e=!1),this.LOG.debug(["drawCharts"],this._data,this._options),this._data&&this._data.data&&0!==this._data.data.length){if(this.timeClip&&this.timeClip.close(),this.modal&&this.modal.close(),this.LOG.debug(["PPts"],"firstdraw ",e),e){var i=100*V.getDivider(this._options.timeUnit),a=this._data.data;if(a){var n=V.flattenGtsIdArray(a,0).res;n=V.flatDeep(n);var o=!0;n.forEach((function(e){t.gtsIdList.push(e.id),e.v.length>0&&(o=(o=o&&e.v[0][0]>-i&&e.v[0][0]<i)&&e.v[e.v.length-1][0]>-i&&e.v[e.v.length-1][0]<i,e.v.length)})),o&&(this._options.timeMode="timestamp"),this.LOG.debug(["drawCharts","parsed","timestampMode"],o)}}this.gtsList=this._data,this._options=O({},this._options),this.LOG.debug(["drawCharts","parsed"],this._data,this._options),this.resizeArea()}},i.prototype.focus=function(e){var t=e.path.map((function(e){return(e.id||"").slice(0,4)}));!this.isAlone&&t.indexOf("tzSe")<0&&t.indexOf("map-")<0&&this.mainPlotDiv.nativeElement.focus()},i.prototype.handleKeyPress=function(e){return C(this,void 0,void 0,(function(){var t,i,a=this;return I(this,(function(n){switch(n.label){case 0:return this.LOG.debug(["handleKeyPress"],e),this.preventDefaultKeyList.indexOf(e.key)>=0&&e.preventDefault(),[4,this.timeClip.isOpened()];case 1:return(i=n.sent())?[3,3]:[4,this.modal.isOpened()];case 2:i=n.sent(),n.label=3;case 3:return(t=i)?[3,5]:[4,this.gtsPopupModal.isOpened()];case 4:t=n.sent(),n.label=5;case 5:if(t&&this.preventDefaultKeyListInModals.indexOf(e.key)>=0&&e.preventDefault(),"/"===e.key)this.modal.open(),this.filterInput.nativeElement.focus(),this.filterInput.nativeElement.select();else if("t"===e.key)this.chart.getTimeClip().then((function(e){a.timeClipValue="<p>keep data between\n          "+("timestamp"===a._options.timeMode?e.tsmin:S.tz(e.tsmin,a._options.timeZone).toLocaleString())+" and\n          "+("timestamp"===a._options.timeMode?e.tsmax:S.tz(e.tsmax,a._options.timeZone).toLocaleString())+"\n          "+("us"!==a._options.timeUnit?" (for a "+a._options.timeUnit+" platform)":"")+"</p>\n          <pre><code>"+Math.round(e.tsmax)+" "+Math.round(e.tsmax-e.tsmin)+" TIMECLIP</code></pre>",a.timeClip.open()}));else if("b"===e.key||"B"===e.key)this.gtsBrowserIndex<0&&(this.gtsBrowserIndex=0),"b"===e.key?(this.gtsBrowserIndex++,this.gtsBrowserIndex===this.gtsIdList.length&&(this.gtsBrowserIndex=0)):(this.gtsBrowserIndex--,this.gtsBrowserIndex<0&&(this.gtsBrowserIndex=this.gtsIdList.length-1)),this._toHide=this.gtsIdList.filter((function(e){return e!==a.gtsIdList[a.gtsBrowserIndex]}));else{if("n"===e.key)return this._toHide=D(this.gtsIdList),[2,!1];"a"===e.key?this._toHide=[]:"Escape"===e.key?(this.timeClip.isOpened().then((function(e){e&&a.timeClip.close()})),this.modal.isOpened().then((function(e){e&&a.modal.close()})),this.gtsPopupModal.isOpened().then((function(e){e&&a.gtsPopupModal.close()}))):this.pushKbdEvent(e.key)}return this.LOG.debug(["handleKeyPress","this.gtsIdList"],this._toHide,this.gtsBrowserIndex),[2]}}))}))},i.prototype.applyFilter=function(){this.gtsFilterCount++,this._gtsFilter=this.gtsFilterCount.toString().slice(0,1)+this.filterInput.nativeElement.value,this.modal.close()},i.prototype.pushKbdEvent=function(e){this.kbdCounter++,this.kbdLastKeyPressed=[e,this.kbdCounter.toString()]},i.prototype.getTZ=function(){return S.tz.names()},i.prototype.convert=function(e){return[]},i.prototype.onChartDraw=function(e){this.chartBounds&&e&&this.chartBounds.tsmin!==Math.min(this.chartBounds.tsmin,e.tsmin)&&this.chartBounds.tsmax!==Math.max(this.chartBounds.tsmax,e.tsmax)&&(this.chartBounds.tsmin=Math.min(this.chartBounds.tsmin,e.tsmin),this.chartBounds.tsmax=Math.max(this.chartBounds.tsmax,e.tsmax),this.annotation.setRealBounds(this.chartBounds),this.chart.setRealBounds(this.chartBounds),this.chartDraw.emit(),this.LOG.debug(["onChartDraw","this.chartBounds"],this.chartBounds,e)),this.chartDraw.emit(e)},i.prototype.resizeArea=function(){var e=this;setTimeout((function(){var t=e.el.nativeElement.getBoundingClientRect().height;t>0&&(e.GTSTree&&(t-=e.GTSTree.nativeElement.getBoundingClientRect().height),e.controls&&(t-=e.controls.nativeElement.getBoundingClientRect().height),e.initialChartHeight=t)}))},i.decorators=[{type:t.Component,args:[{selector:"warpview-plot",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div #mainPlotDiv tabindex="0" (click)="focus($event)" id="focusablePlotDiv">\n  <warpview-modal [kbdLastKeyPressed]="kbdLastKeyPressed" modalTitle="TimeClip" #timeClip\n                  (warpViewModalClose)="onWarpViewModalClose()"\n  >\n    <div #timeClipElement [innerHTML]="timeClipValue"></div>\n  </warpview-modal>\n  <warpview-modal [kbdLastKeyPressed]="kbdLastKeyPressed" modalTitle="GTS Filter" #modal\n                  (warpViewModalClose)="onWarpViewModalClose()"\n  >\n    <label for="filterInput">Enter a regular expression to filter GTS.</label>\n    <br />\n    <input tabindex="1" type="text" (keypress)="inputTextKeyboardEvents($event)" #filterInput id="filterInput"\n           (keydown)="inputTextKeyboardEvents($event)" (keyup)="inputTextKeyboardEvents($event)"\n           [value]="gtsFilter.slice(1)"/>\n    <button (click)="applyFilter()" [innerHTML]="_options.popupButtonValidateLabel || \'Apply\'"\n            class="{{_options.popupButtonValidateClass}}" tabindex="2"\n            type="button">\n    </button>\n  </warpview-modal>\n  <warpview-gts-popup [maxToShow]="5" [hiddenData]="_toHide" [gtsList]="gtsList"\n                      [kbdLastKeyPressed]="kbdLastKeyPressed"\n                      [options]="_options" [debug]="debug"\n                      (warpViewModalClose)="onWarpViewModalClose()"\n                      (warpViewSelectedGTS)="warpViewSelectedGTS($event)"\n                      #gtsPopupModal></warpview-gts-popup>\n  <div class="inline" *ngIf="_options.showControls" #controls>\n    <warpview-toggle id="timeSwitch" text1="Date" text2="Timestamp"\n                     (stateChange)="stateChange($event)"\n                     [checked]="_options.timeMode === \'timestamp\'"></warpview-toggle>\n    <warpview-toggle id="typeSwitch" text1="Line" text2="Step"\n                     (stateChange)="stateChange($event)"></warpview-toggle>\n    <warpview-toggle id="chartSwitch" text1="Hide chart" text2="Display chart"\n                     (stateChange)="stateChange($event)"\n                     [checked]="showChart"></warpview-toggle>\n    <warpview-toggle id="mapSwitch" text1="Hide map" text2="Display map"\n                     (stateChange)="stateChange($event)" [checked]="showMap"></warpview-toggle>\n    <div class="tzcontainer">\n      <label for="tzSelector"></label>\n      <select id="tzSelector" class="defaulttz" #tzSelector (change)="tzSelected()">\n        <option *ngFor="let z of getTZ()" [value]="z" [selected]="z === \'UTC\'"\n                [ngClass]="{\'defaulttz\' :z === \'UTC\',\'customtz\': z !== \'UTC\'}">{{z}}</option>\n      </select>\n    </div>\n  </div>\n  <div *ngIf="warningMessage" class="warningMessage">{{warningMessage}}</div>\n  <warpview-gts-tree\n    *ngIf="_options.showGTSTree"\n    [data]="gtsList" id="tree" [gtsFilter]="gtsFilter" [debug]="debug" #GTSTree\n    (warpViewSelectedGTS)="warpViewSelectedGTS($event)"\n    [hiddenData]="_toHide" [options]="_options"\n    [kbdLastKeyPressed]="kbdLastKeyPressed"\n  ></warpview-gts-tree>\n  <div *ngIf="showChart" #main class="main-container"\n       (mouseleave)="handleMouseOut($event)"\n       (mousemove)="handleMouseMove($event)"\n       (mouseenter)="handleMouseEnter($event)">\n    <div class="bar" #line></div>\n    <div class="annotation">\n      <warpview-annotation #annotation\n                           [data]="gtsList" [responsive]="true"\n                           (boundsDidChange)="boundsDidChange($event)"\n                           (chartDraw)="onChartDraw($event)"\n                           [showLegend]=\'showLegend\' [debug]="debug" [standalone]="false"\n                           [hiddenData]="_toHide" [options]="_options"\n      ></warpview-annotation>\n    </div>\n    <warpview-resize minHeight="100" [initialHeight]="initialChartHeight" [debug]="debug"\n                     (resize)="resizeChart($event)"\n    >\n      <warpview-chart [responsive]="true" [standalone]="false" [data]="gtsList"\n                      [showLegend]="showLegend"\n                      (boundsDidChange)="boundsDidChange($event)"\n                      (chartDraw)="onChartDraw($event)"\n                      #chart [debug]="debug" [hiddenData]="_toHide" [type]="type" [options]="_options"\n      ></warpview-chart>\n    </warpview-resize>\n  </div>\n  <warpview-resize *ngIf="showMap" minHeight="100" [initialHeight]="initialMapHeight" [debug]="debug">\n    <div class="map-container">\n      <warpview-map [options]="_options" #map [data]="gtsList" [debug]="debug" [responsive]="true"\n                    [hiddenData]="_toHide"\n      ></warpview-map>\n    </div>\n  </warpview-resize>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host,warp-view-plot,warpview-plot{position:relative;height:100%}:host .main-container,warp-view-plot .main-container,warpview-plot .main-container{position:relative}:host .map-container,warp-view-plot .map-container,warpview-plot .map-container{height:100%;width:100%;margin-right:20px;position:relative}:host .bar,warp-view-plot .bar,warpview-plot .bar{width:1px;left:-100px;position:absolute;background-color:transparent;-webkit-backface-visibility:hidden;backface-visibility:hidden;top:0;bottom:55px;overflow:hidden;display:none;z-index:0;pointer-events:none;border-left:dashed 2px var(--warp-view-bar-color)}:host .inline,warp-view-plot .inline,warpview-plot .inline{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap;-webkit-box-pack:space-evenly;justify-content:space-evenly;-webkit-box-align:stretch;align-items:stretch;width:100%}:host label,warp-view-plot label,warpview-plot label{display:inline-block}:host input,warp-view-plot input,warpview-plot input{display:block;width:calc(100% - 20px);padding:5px;font-size:1rem;font-weight:400;line-height:1.5}:host .annotation,warp-view-plot .annotation,warpview-plot .annotation{max-width:100%;padding-top:20px;margin-bottom:0}:host #focusablePlotDiv:focus,warp-view-plot #focusablePlotDiv:focus,warpview-plot #focusablePlotDiv:focus{outline:0}:host #tzSelector,warp-view-plot #tzSelector,warpview-plot #tzSelector{height:var(--warp-view-switch-height);border-radius:var(--warp-view-switch-radius);padding-left:calc(var(--warp-view-switch-radius)/ 2);padding-right:5px;box-shadow:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);color:var(--warp-view-font-color);border:none;margin:auto}:host .defaulttz,warp-view-plot .defaulttz,warpview-plot .defaulttz{background:var(--warp-view-switch-inset-color)}:host .customtz,warp-view-plot .customtz,warpview-plot .customtz{background:var(--warp-view-switch-inset-checked-color)}:host .tzcontainer,warp-view-plot .tzcontainer,warpview-plot .tzcontainer{display:-webkit-box;display:flex}:host .chart-container,warp-view-plot .chart-container,warpview-plot .chart-container{height:var(--warp-view-plot-chart-height);width:100%}:host #bottomPlaceHolder,warp-view-plot #bottomPlaceHolder,warpview-plot #bottomPlaceHolder{height:200px;width:100%}:host .warningMessage,warp-view-plot .warningMessage,warpview-plot .warningMessage{color:orange;padding:10px;border-radius:3px;background:#faebd7;margin:1em;display:block;border:2px solid orange}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={mainPlotDiv:[{type:t.ViewChild,args:["mainPlotDiv",{static:!0}]}],timeClip:[{type:t.ViewChild,args:["timeClip",{static:!0}]}],modal:[{type:t.ViewChild,args:["modal",{static:!0}]}],chart:[{type:t.ViewChild,args:["chart",{static:!1}]}],gtsPopupModal:[{type:t.ViewChild,args:["gtsPopupModal",{static:!1}]}],annotation:[{type:t.ViewChild,args:["annotation",{static:!1}]}],map:[{type:t.ViewChild,args:["map",{static:!1}]}],timeClipElement:[{type:t.ViewChild,args:["timeClipElement",{static:!0}]}],GTSTree:[{type:t.ViewChild,args:["GTSTree",{static:!0}]}],controls:[{type:t.ViewChild,args:["controls",{static:!0}]}],filterInput:[{type:t.ViewChild,args:["filterInput",{static:!0}]}],tzSelector:[{type:t.ViewChild,args:["tzSelector",{static:!1}]}],line:[{type:t.ViewChild,args:["line",{static:!1}]}],main:[{type:t.ViewChild,args:["main",{static:!1}]}],type:[{type:t.Input,args:["type"]}],gtsFilter:[{type:t.Input,args:["gtsFilter"]}],isAlone:[{type:t.Input,args:["isAlone"]}],initialChartHeight:[{type:t.Input,args:["initialChartHeight"]}],initialMapHeight:[{type:t.Input,args:["initialMapHeight"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],handleKeydown:[{type:t.HostListener,args:["keydown",["$event"]]}]},i}(z);var be=function(){function e(i,a){this.el=i,this.renderer=a,this.minHeight="10",this.initialHeight=100,this.resize=new t.EventEmitter,this.dragging=!1,this._debug=!1,this.LOG=new N(e,this._debug)}return Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;this.LOG.debug(["ngAfterViewInit"],this.initialHeight),this.renderer.setStyle(this.wrapper.nativeElement,"height",this.initialHeight+"px"),this.handleDiv.nativeElement.addEventListener("mousedown",(function(t){0===t.button&&(e.moveListener=e.handleDraggingMove.bind(e),e.clickUpListener=e.handleDraggingEnd.bind(e),document.addEventListener("mousemove",e.moveListener,!1),document.addEventListener("mouseup",e.clickUpListener,!1))}))},e.prototype.handleDraggingEnd=function(){this.dragging=!1,this.moveListener&&(document.removeEventListener("mousemove",this.moveListener,!1),this.moveListener=null),this.clickUpListener&&(document.removeEventListener("mouseup",this.clickUpListener,!1),this.clickUpListener=null)},e.prototype.handleDraggingMove=function(e){e.preventDefault(),this.LOG.debug(["handleDraggingMove"],e);var t=this.handleDiv.nativeElement.parentElement.getBoundingClientRect().top-document.body.getBoundingClientRect().top,i=e.pageY-t+this.handleDiv.nativeElement.getBoundingClientRect().height/2;i<parseInt(this.minHeight,10)&&(i=parseInt(this.minHeight,10)),this.renderer.setStyle(this.handleDiv.nativeElement.parentElement,"height",i+"px"),this.LOG.debug(["handleDraggingMove"],i),this.resize.emit(i)},e.decorators=[{type:t.Component,args:[{selector:"warpview-resize",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="wrapper" #wrapper>\n  <ng-content></ng-content>\n  <div class="handle" #handleDiv></div>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host .handle,warp-view-resize .handle,warpview-resize .handle{width:100%;height:var(--warp-view-resize-handle-height);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=);background-color:var(--warp-view-resize-handle-color);background-repeat:no-repeat;background-position:50%;position:absolute;bottom:0}:host .handle:hover,warp-view-resize .handle:hover,warpview-resize .handle:hover{cursor:row-resize}:host .wrapper,warp-view-resize .wrapper,warpview-resize .wrapper{width:100%;position:relative;padding-bottom:var(--warp-view-resize-handle-height);height:100%}']}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},e.propDecorators={handleDiv:[{type:t.ViewChild,args:["handleDiv",{static:!0}]}],wrapper:[{type:t.ViewChild,args:["wrapper",{static:!0}]}],minHeight:[{type:t.Input,args:["minHeight"]}],initialHeight:[{type:t.Input,args:["initialHeight"]}],debug:[{type:t.Input,args:["debug"]}],resize:[{type:t.Output,args:["resize"]}]},e}();var Ae=function(){function e(){this.mode="timestamp",this.change=new t.EventEmitter,this.show=!1,this._step=0,this.loaded=!1,this.manualRefresh=new t.EventEmitter,this._debug=!1,this.LOG=new N(e,this.debug),this.LOG.debug(["constructor"],this.debug)}return Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this.LOG.debug(["min"],e),this._min=e,this.setOptions()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this.LOG.debug(["max"],e),this._max=e,this.setOptions()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this.LOG.debug(["step"],e),this._step!==e&&(this._step=e,this.setOptions())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,this.LOG.setDebug(e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.loaded=!1,this.setOptions()},e.prototype.setOptions=function(){var e=this;if(this._min||this._max){this.LOG.debug(["_step"],this._step);var t=Math.min(Math.max(this.value||Number.MIN_VALUE,this._min),this._max);if(t!==this.value&&this.loaded&&this.change.emit(t),this.value=t,this.loaded=!0,this.LOG.debug(["noUiSlider"],this.slider),this.slider)if(this._uiSlider)this.updateSliderOptions();else{var i={start:[this.value+1],tooltips:[this.getFormat()],range:{min:[this._min],max:[this._max]}};this._step&&this._step>0&&(i.step=Math.floor((this._max-this._min)/this._step)),this._uiSlider=m.create(this.slider.nativeElement,i),this._uiSlider.on("end",(function(t){e.LOG.debug(["onChange"],t),e.value=parseInt(t[0],10),e.change.emit({value:parseInt(t[0],10)})}))}}},e.prototype.updateSliderOptions=function(){this.slider.nativeElement.noUiSlider.set([this.value]);var e={range:{min:[this._min],max:[this._max]}};this._step&&this._step>0&&(e.step=Math.floor((this._max-this._min)/this._step)),this.slider.nativeElement.noUiSlider.updateOptions(e)},e.prototype.format=function(e){return"timestamp"!==this.mode?d(e).utc(!0).format("YYYY/MM/DD hh:mm:ss"):e.toString()},e.prototype.getFormat=function(){var e=this;return{to:function(t){return e.format(t)},from:function(e){return e.replace(",-","")}}},e.decorators=[{type:t.Component,args:[{selector:"warpview-slider",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="custom-slider" *ngIf="loaded">\n  <div style="display: flex; width: 100%;justify-content: flex-start;">\n    <div>{{format(_min)}}</div>\n    <div #slider style="flex-grow: 4"></div>\n    <div>{{format(_max)}}</div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.noUi-origin{left:100%}.noUi-target{max-width:100%;margin:0 20px 40px}.noUi-connect{left:0;background:var(--warp-slider-connect-color)}.noUi-handle{background:var(--warp-slider-handle-bg-color);border:1px solid var(--warp-slider-handle-color);border-radius:3px;cursor:pointer;box-shadow:var(--warp-slider-handle-shadow)}.noUi-handle:after,.noUi-handle:before{background:var(--warp-slider-handle-color)}.noUi-tooltip{display:none}.noUi-active .noUi-tooltip{display:block}:host .custom-slider{margin-top:50px}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={slider:[{type:t.ViewChild,args:["slider",{static:!1}]}],min:[{type:t.Input,args:["min"]}],max:[{type:t.Input,args:["max"]}],value:[{type:t.Input,args:["value"]}],step:[{type:t.Input,args:["step"]}],mode:[{type:t.Input,args:["mode"]}],debug:[{type:t.Input,args:["debug"]}],change:[{type:t.Output,args:["change"]}]},e}();var ye=function(e){function i(){var t=e.call(this)||this;return t.LOG=new N(i,t.debug),t.LOG.debug(["constructor"],t.debug),t}return L(i,e),i.prototype.ngOnInit=function(){this.setOptions(),this.minValue=this.minValue||this._min,this.maxValue=this.maxValue||this._max},i.prototype.ngAfterViewInit=function(){this.loaded=!1,this.setOptions()},i.prototype.onChange=function(e){this.change.emit({value:this.minValue,highValue:this.maxValue}),this.LOG.debug(["onChange"],e,{value:this.minValue,highValue:this.maxValue})},i.prototype.setOptions=function(){var e=this;if(this.LOG.debug(["setOptions"],this._min,this._max),(this._min||this._max)&&(this.loaded=!0,this.value=Math.max(this.value||Number.MIN_VALUE,this._min),this.LOG.debug(["noUiSlider"],this.slider),this.slider))if(this._uiSlider)this.updateSliderOptions();else{var t={start:[this.minValue,this.maxValue],connect:!0,tooltips:[this.getFormat(),this.getFormat()],range:{min:[this._min],max:[this._max]}};this._step&&this._step>0&&(t.step=Math.floor((this._max-this._min)/this._step)),m.create(this.slider.nativeElement,t).on("end",(function(t){e.LOG.debug(["onChange"],t),e.change.emit({min:parseInt(t[0],10),max:parseInt(t[1],10)})}))}},i.decorators=[{type:t.Component,args:[{selector:"warpview-range-slider",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div class="custom-slider" *ngIf="loaded">\n  <div style="display: flex; width: 100%;justify-content: flex-start;">\n    <div>{{format(_min)}}</div>\n    <div #slider style="flex-grow: 4"></div>\n    <div>{{format(_max)}}</div>\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.noUi-origin{left:100%}.noUi-target{max-width:100%;margin:0 20px 40px}.noUi-connect{left:0;background:var(--warp-slider-connect-color)}.noUi-handle{background:var(--warp-slider-handle-bg-color);border:1px solid var(--warp-slider-handle-color);border-radius:3px;cursor:pointer;box-shadow:var(--warp-slider-handle-shadow)}.noUi-handle:after,.noUi-handle:before{background:var(--warp-slider-handle-color)}.noUi-tooltip{display:none}.noUi-active .noUi-tooltip{display:block}:host .custom-slider{margin-top:50px}']}]}],i.ctorParameters=function(){return[]},i.propDecorators={slider:[{type:t.ViewChild,args:["slider",{static:!1}]}],minValue:[{type:t.Input,args:["minValue"]}],maxValue:[{type:t.Input,args:["maxValue"]}]},i}(Ae);var Se=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},yaxis:{},margin:{t:10,b:25,r:10,l:50}},r._type="histogram2d",r.visibility=[],r.visibilityStatus="unknown",r.maxTick=0,r.minTick=0,r.visibleGtsId=[],r.LOG=new N(i,r._debug),r}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},i.prototype.convert=function(e){var t=this,i=this._options.histo||{histnorm:"density",histfunc:"count"},a=[];this.LOG.debug(["convert"],this._options),this.visibility=[];var n=V.flatDeep(V.flattenGtsIdArray([e.data],0).res)||[];this.maxTick=Number.NEGATIVE_INFINITY,this.minTick=Number.POSITIVE_INFINITY,this.visibleGtsId=[];n.filter((function(e){return t.LOG.debug(["convert"],V.isGtsToPlot(e)),e.v&&!V.isGtsToPlot(e)}));return n=n.filter((function(e){return e.v&&V.isGtsToPlot(e)})),"unknown"===this.visibilityStatus&&(this.visibilityStatus=n.length>0?"plottableShown":"nothingPlottable"),this._options.timeMode&&"timestamp"===this._options.timeMode?this.layout.xaxis.type="linear":this.layout.xaxis.type="date",n.forEach((function(n,o){if(n.v&&V.isGtsToPlot(n)){var r=V.serializeGtsMetadata(n),s=_.getColor(o,t._options.scheme),p=((e.params||[])[n.id]||{datasetColor:s}).datasetColor||s,l={type:t._type,histnorm:i.histnorm||"density",histfunc:i.histfunc||"count",contours:{showlabels:!0,labelfont:{color:"white"}},colorbar:{tickcolor:t.getGridColor(t.el.nativeElement),thickness:0,tickfont:{color:t.getLabelColor(t.el.nativeElement)},x:1+n.id/20,xpad:0},showscale:t.showLegend,colorscale:_.getColorGradient(n.id,t._options.scheme),autocolorscale:!1,name:r,text:r,x:[],y:[],line:{color:p},hoverinfo:"none",connectgaps:!1,visible:t._hiddenData.filter((function(e){return e===n.id})).length>=0};n.v.forEach((function(e){var i=e[0];l.y.push(e[e.length-1]),t._options.timeMode&&"timestamp"===t._options.timeMode?l.x.push(i):l.x.push(S.tz(S.utc(i/t.divider),t._options.timeZone).toISOString())})),a.push(l)}})),this.LOG.debug(["convert","dataset"],a),a},i.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this.responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},i.decorators=[{type:t.Component,args:[{selector:"warpview-spectrum",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     (relayout)="relayout($event)" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}:host .executionErrorText{color:red;padding:10px;border-radius:3px;background:#faebd7;position:absolute;top:-30px;border:2px solid red}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}]},i}(z);var xe=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{type:"-"},yaxis:{zeroline:!1},boxmode:"group",margin:{t:10,b:25,r:10,l:10}},r._type="box",r.LOG=new N(i,r._debug),r}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},i.prototype.convert=function(e){var t=this,i=[];this.LOG.debug(["convert"],this._options,this._type);var a=V.flatDeep(V.flattenGtsIdArray(e.data,0).res);a=a.filter((function(e){return e.v&&V.isGtsToPlot(e)}));var n="YYYY/MM/DD hh:mm:ss".slice(0,"YYYY/MM/DD hh:mm:ss".lastIndexOf(this._options.split||"D")+1);return a.forEach((function(a,n){if(a.v){var o=V.serializeGtsMetadata(a),r=_.getColor(a.id,t._options.scheme),s={type:"box",boxmean:"sd",marker:{color:((e.params||[])[n]||{datasetColor:r}).datasetColor||r},name:o,x:"box"===t._type?void 0:[],y:[],boxpoints:!1};t._options.showDots&&(s.boxpoints="all"),a.v.forEach((function(e){s.y.push(e[e.length-1]),"box-date"===t._type&&s.x.push(S.tz(S.utc(e[0]/t.divider),t._options.timeZone).toISOString())})),i.push(s)}})),this.LOG.debug(["convert","dataset"],i,n),i},i.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this.responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.xaxis.showticklabels="box-date"===this._type,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},i.prototype.hover=function(e){},i.decorators=[{type:t.Component,args:[{selector:"warpview-box",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}]},i}(z);var Le=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,xaxis:{},yaxis:{},zaxis:{},margin:{t:10,b:25,r:10,l:10}},r._type="line3d",r.LOG=new N(i,r._debug),r}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},i.prototype.convert=function(e){var t=this,i=[];return this.LOG.debug(["convert"],e,this._options,this._type),V.flatDeep(V.flattenGtsIdArray(e.data,0).res).filter((function(e){return e.v&&V.isGts(e)})).forEach((function(a,n){if(a.v){var o=V.serializeGtsMetadata(a),r=_.getColor(a.id,t._options.scheme),s=((e.params||[])[n]||{datasetColor:r}).datasetColor||r,p={mode:"line",type:"scatter3d",marker:{color:_.transparentize(s),size:3,symbol:"circle",line:{color:s,width:0}},line:{color:s,width:1},name:o,x:[],y:[],z:[]};a.v.forEach((function(e){e.length>2?(p.x.push(e[1]),p.y.push(e[2]),e.length>4?p.z.push(e[3]):p.z.push(0)):(p.x.push(e[0]),p.y.push(e[1]),p.z.push(0))})),i.push(p)}})),i},i.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this.responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this.showLegend,this.layout.yaxis.color=this.getGridColor(this.el.nativeElement),this.layout.xaxis.color=this.getGridColor(this.el.nativeElement),this.layout.zaxis.color=this.getGridColor(this.el.nativeElement),this.loading=!1},i.decorators=[{type:t.Component,args:[{selector:"warpview-3d-line",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}]},i}(z);var Oe=function(e){function i(t,a,n,o){var r=e.call(this,t,a,n,o)||this;return r.el=t,r.renderer=a,r.sizeService=n,r.ngZone=o,r.layout={showlegend:!1,margin:{t:10,b:25,r:10,l:10},geo:{projection:{type:"orthographic"},showframe:!0,fitbounds:"locations",showocean:!0,oceancolor:_.transparentize("#004eff",.2),showland:!0,landcolor:_.transparentize("#6F694E",.2),showlakes:!0,lakecolor:_.transparentize("#004eff",.2),showcountries:!0,lonaxis:{showgrid:!0,gridcolor:"rgb(102, 102, 102)"},lataxis:{showgrid:!0,gridcolor:"rgb(102, 102, 102)"}}},r._type="scattergeo",r.geoData=[],r.LOG=new N(i,r._debug),r}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.drawChart()},i.prototype.update=function(e){this.drawChart()},i.prototype.drawChart=function(){this.initChart(this.el)&&(this.plotlyConfig.scrollZoom=!0,this.buildGraph())},i.prototype.convert=function(e){var t=this,i=[];return this.geoData=[],this.LOG.debug(["convert"],e,this._options,this._type),V.flatDeep(V.flattenGtsIdArray(e.data,0).res).filter((function(e){return e.v&&V.isGts(e)})).forEach((function(a,n){if(a.v){var o={path:[]},r=V.serializeGtsMetadata(a),s=_.getColor(a.id,t._options.scheme),p=((e.params||[])[n]||{datasetColor:s}).datasetColor||s,l={mode:"lines",type:"scattergeo",marker:{color:_.transparentize(p),size:3,symbol:"circle",line:{color:p,width:0}},line:{color:p,width:1},name:r,lon:[],lat:[],hoverinfo:"none"};a.v.forEach((function(e){e.length>2&&(l.lat.push(e[1]),l.lon.push(e[2]),o.path.push({lat:e[1],lon:e[2]}))})),t.geoData.push(o),i.push(l)}})),i},i.prototype.buildGraph=function(){this.LOG.debug(["drawChart","this.layout"],this._responsive),this.LOG.debug(["drawChart","this.layout"],this.layout),this.LOG.debug(["drawChart","this.plotlyConfig"],this.plotlyConfig),this.layout.showlegend=this._showLegend;var e=ce.getBoundsArray(this.geoData,[],[],[]);this.LOG.debug(["drawChart","bounds"],e),this.layout.geo.lonaxis.color=this.getGridColor(this.el.nativeElement),this.layout.geo.lataxis.range=[e[0][0],e[1][0]],this.layout.geo.lonaxis.range=[e[0][1],e[1][1]],this.layout.geo.lataxis.color=this.getGridColor(this.el.nativeElement),this.layout=O({},this.layout),this.loading=!1},i.decorators=[{type:t.Component,args:[{selector:"warpview-globe",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer" #chartContainer>\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div *ngIf="!loading && !noData">\n    <warpview-plotly #graph *ngIf="plotlyData?.length > 0"\n                     [data]="plotlyData" [layout]="layout" [config]="plotlyConfig" (afterPlot)="afterPlot()"\n                     className="chart" (hover)="hover($event)" (unhover)="unhover($event)"\n                     [updateOnLayoutChange]="true" [updateOnDataChange]="true" [debug]="debug"\n                     [style]="{position: \'relative\', width: \'100%\', height: \'100%\'}"></warpview-plotly>\n  </div>\n  <div #toolTip class="tooltip" [ngStyle]="getTooltipPosition()"></div>\n</div>\n',encapsulation:t.ViewEncapsulation.ShadowDom,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}.tooltip{background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;text-align:left;position:absolute;display:none;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;max-width:50%;z-index:999;height:auto!important;left:-1000px}.tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}:host{display:block;height:100%}:host #chartContainer{height:100%}:host #chartContainer div{height:100%}:host div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}]},i}(z);var Ce=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.pointHover=new t.EventEmitter,s.warpViewChartResize=new t.EventEmitter,s.chartDraw=new t.EventEmitter,s.boundsDidChange=new t.EventEmitter,s.visibility=[],s.maxTick=Number.MIN_VALUE,s.minTick=Number.MAX_VALUE,s.visibleGtsId=[],s._type="drops",s.eventConf={d3:g,axis:{verticalGrid:!0,tickPadding:6},indicator:!1,label:{text:function(e){return e.name}},drop:{date:function(e){return new Date(e.date)},color:function(e){return e.color},onMouseOver:function(e){s.LOG.debug(["onMouseOver"],e),s.pointHover.emit({x:g.event.offsetX,y:g.event.offsetY});var t=g.select(s.toolTip.nativeElement);t.transition().duration(200).style("opacity",1).style("pointer-events","auto"),t.html('<div class="tooltip-body">\n<b class="tooltip-date">'+("timestamp"===s._options.timeMode?e.date:S(e.date.valueOf()).utc().toISOString()||"")+'</b>\n<div><i class="chip"  style="background-color: '+_.transparentize(e.color,.7)+";border: 2px solid "+e.color+';"></i>\n'+V.formatLabel(e.name)+': <span class="value">'+e.value+"</span>\n</div></div>").style("left",g.event.offsetX-30+"px").style("top",g.event.offsetY+20+"px")},onMouseOut:function(){u.select(s.toolTip.nativeElement).transition().duration(500).style("opacity",0).style("pointer-events","none")}}},s.LOG=new N(i,s._debug),s}return L(i,e),Object.defineProperty(i.prototype,"type",{set:function(e){this._type=e,this.drawChart()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hiddenData",{set:function(e){var t=this,i=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","previousVisibility"],i),this._hiddenData=e,this.visibility=[],this.visibleGtsId.forEach((function(i){return t.visibility.push(e.indexOf(i)<0&&-1!==i)})),this.LOG.debug(["hiddenData","hiddendygraphfullv"],this.visibility);var a=JSON.stringify(this.visibility);this.LOG.debug(["hiddenData","json"],i,a),i!==a&&(this.drawChart(),this.LOG.debug(["hiddendygraphtrig","destroy"],"redraw by visibility change"))},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this._options=this._options||this.defOptions},i.prototype.ngOnDestroy=function(){this.elemChart&&u.select(this.elemChart.nativeElement).remove()},i.prototype.update=function(e,t){this.LOG.debug(["onOptions","before"],this._options,e),n(e,this._options)||(this.LOG.debug(["options","changed"],e),this._options=U.mergeDeep(this._options,e)),this.drawChart()},i.prototype.updateBounds=function(e,t){this.LOG.debug(["updateBounds"],e,t,this._options),this._options.bounds.minDate=e,this._options.bounds.maxDate=t,this._options.timeMode&&"timestamp"===this._options.timeMode?this.eventConf.range={start:e,end:t}:this.eventConf.range={start:S.tz(S.utc(this.minTick/this.divider),this._options.timeZone).toDate(),end:S.tz(S.utc(this.maxTick/this.divider),this._options.timeZone).toDate()},this.eventConf=O({},this.eventConf),this.LOG.debug(["updateBounds"],this.eventConf)},i.prototype.drawChart=function(){var e=this;this.initChart(this.el)&&(this.loading=!1,this.LOG.debug(["drawChart","plotlyData"],this.plotlyData,this._type),this.elemChart.nativeElement&&(setTimeout((function(){return u.select(e.elemChart.nativeElement).data([e.plotlyData]).call(y(e.eventConf))})),this.loading=!1,this.chartDraw.emit()))},i.prototype.convert=function(e){var t=this;this.LOG.debug(["convert"],e);var i=V.flatDeep(e.data),a=[];if(this.LOG.debug(["convert","gtsList"],i),i&&0!==i.length&&!(i[0].length<2))return i.forEach((function(i,n){var o=_.getColor(i.id||n,t._options.scheme),r=((e.params||[])[n]||{datasetColor:o}).datasetColor||o,s={name:V.serializeGtsMetadata(i),color:r,data:[]};(i.v||[]).forEach((function(e){var i=e[0];t.minTick=Math.min(t.minTick,i),t.maxTick=Math.max(t.maxTick,i),t._options.timeMode&&"timestamp"===t._options.timeMode?s.data.push({date:i,color:r,value:e[e.length-1]}):s.data.push({date:S.tz(S.utc(i/t.divider),t._options.timeZone).toDate(),color:r,value:e[e.length-1],name:s.name})})),a.push(s)})),this.LOG.debug(["convert","dataList"],a),this.eventConf.range={start:S.tz(S.utc(this.minTick/this.divider),this._options.timeZone).toDate(),end:S.tz(S.utc(this.maxTick/this.divider),this._options.timeZone).toDate()},a},i.decorators=[{type:t.Component,args:[{selector:"warpview-event-drop",template:'\x3c!--\n  ~  Copyright 2020  SenX S.A.S.\n  ~\n  ~  Licensed under the Apache License, Version 2.0 (the "License");\n  ~  you may not use this file except in compliance with the License.\n  ~  You may obtain a copy of the License at\n  ~\n  ~    http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~  Unless required by applicable law or agreed to in writing, software\n  ~  distributed under the License is distributed on an "AS IS" BASIS,\n  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~  See the License for the specific language governing permissions and\n  ~  limitations under the License.\n  ~\n  --\x3e\n\n<div id="chartContainer">\n  <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n  <div #toolTip class="tooltip trimmed"></div>\n  <p class="noData" *ngIf="noData">No data to display</p>\n  <div #elemChart style="width: 100%;height: 100%"></div>\n  <div *ngIf="!loading && !noData">\n  </div>\n</div>\n',encapsulation:t.ViewEncapsulation.None,styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n *//*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */.gts-classname{color:var(--gts-classname-font-color)}.gts-labelname{color:var(--gts-labelname-font-color)}.gts-attrname{color:var(--gts-attrname-font-color)}.gts-separator{color:var(--gts-separator-font-color)}.gts-labelvalue{color:var(--gts-labelvalue-font-color);font-style:italic}.gts-attrvalue{color:var(--gts-attrvalue-font-color);font-style:italic}:host,warp-view-event-drop,warpview-event-drop{display:block;height:100%;width:100%}:host #chartContainer,warp-view-event-drop #chartContainer,warpview-event-drop #chartContainer{height:100%;width:100%;position:relative}:host div.chart,warp-view-event-drop div.chart,warpview-event-drop div.chart{width:var(--warp-view-chart-width);height:var(--warp-view-chart-height)}:host .tooltip,warp-view-event-drop .tooltip,warpview-event-drop .tooltip{position:absolute;background-color:var(--warp-view-chart-legend-bg)!important;color:var(--warp-view-chart-legend-color)!important;line-height:1.4rem;padding:10px;border:1px solid grey;border-radius:5px;box-shadow:none;pointer-events:none;font-size:10px;min-width:100px;width:auto;z-index:999;height:auto!important;opacity:0}:host .tooltip .chip,warp-view-event-drop .tooltip .chip,warpview-event-drop .tooltip .chip{border-radius:50%;background-color:#bbb;display:inline-block;width:5px;height:5px;border:2px solid #454545;margin-top:auto;margin-bottom:auto;vertical-align:middle;cursor:pointer}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={elemChart:[{type:t.ViewChild,args:["elemChart",{static:!0}]}],type:[{type:t.Input,args:["type"]}],hiddenData:[{type:t.Input,args:["hiddenData"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}]},i}(z);var Ie=function(e){function i(a,n,o,r){var s=e.call(this,a,n,o,r)||this;return s.el=a,s.renderer=n,s.sizeService=o,s.ngZone=r,s.standalone=!0,s.pointHover=new t.EventEmitter,s.warpViewChartResize=new t.EventEmitter,s.chartDraw=new t.EventEmitter,s.boundsDidChange=new t.EventEmitter,s.loading=!0,s.graphs={spectrum:["histogram2dcontour","histogram2d"],chart:["line","spline","step","step-after","step-before","area","scatter"],pie:["pie","donut"],polar:["polar"],radar:["radar"],bar:["bar"],bubble:["bubble"],annotation:["annotation"],"gts-tree":["gts-tree"],datagrid:["datagrid"],display:["display"],drilldown:["drilldown"],image:["image"],map:["map"],gauge:["gauge","bullet"],plot:["plot"],box:["box","box-date"],line3d:["line3d"],globe:["globe"],drops:["drops"]},s.LOG=new N(i,s._debug),s}return L(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this.dataModel&&this.dataModel.globalParams?this.dataModel.globalParams.type||this._type||"plot":this._type||"plot"},set:function(e){this._type=e},enumerable:!0,configurable:!0}),i.prototype.update=function(e,t){var i=this;setTimeout((function(){return i.loading=!0})),this.LOG.debug(["parseGTS","data"],this._data),this.dataModel=this._data,this.dataModel&&(this._options=U.mergeDeep(this._options,e),this._options=U.mergeDeep(U.mergeDeep(this.defOptions,e),this._data&&this._data.globalParams||{}),this.LOG.debug(["parseGTS","data"],this._data),this.dataModel=this._data,this._options&&(this._unit=this._options.unit||this._unit,this._type=this._options.type||this._type||"plot"),this.LOG.debug(["parseGTS","_type"],this._type),setTimeout((function(){return i.loading=!1})))},i.prototype.convert=function(e){var t=this;return setTimeout((function(){return t.loading=!0})),this.LOG.debug(["convert","data"],this._data,e),this.dataModel=e,this.dataModel.globalParams&&(this._unit=this.dataModel.globalParams.unit||this._unit,this._type=this.dataModel.globalParams.type||this._type||"plot"),this.LOG.debug(["convert","_type"],this._type),[]},i.prototype.onResized=function(e){this.width=e.newWidth,this.height=e.newHeight,this.LOG.debug(["onResized"],e.newWidth,e.newHeight),this.sizeService.change(new Y(this.width,this.height))},i.prototype.chartDrawn=function(){var e=this;this.LOG.debug(["chartDrawn"]),setTimeout((function(){return e.loading=!1})),this.chartDraw.emit()},i.decorators=[{type:t.Component,args:[{selector:"warpview-result-tile",template:'<div class="wrapper" [ngClass]="{\'full\':  responsive}" (resized)="onResized($event)">\n    <warpview-spinner *ngIf="loading" message="Parsing data"></warpview-spinner>\n    <div style="height: 100%" [hidden]="loading">\n      <warpview-spectrum [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                         [showLegend]="showLegend" [data]="dataModel" (chartDraw)="chartDrawn()"\n                         *ngIf="graphs[\'spectrum\'].indexOf(type) > -1 && dataModel"\n                         [responsive]="true"></warpview-spectrum>\n\n      <warpview-chart [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'chart\'].indexOf(type) > -1 && dataModel"\n                      [responsive]="true"></warpview-chart>\n\n      <warpview-plot [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                     (chartDraw)="chartDrawn()"\n                     [showLegend]="showLegend" [data]="dataModel"\n                     *ngIf="graphs[\'plot\'].indexOf(type) > -1 && dataModel"\n                     [responsive]="true"></warpview-plot>\n\n      <warpview-bar [debug]="debug" [unit]="unit" [options]="_options"\n                    (chartDraw)="chartDrawn()"\n                    [showLegend]="showLegend" [data]="dataModel"\n                    *ngIf="graphs[\'bar\'].indexOf(type) > -1 && dataModel"\n                    [responsive]="true"></warpview-bar>\n\n      <warpview-bubble [debug]="debug" [unit]="unit" [options]="_options"\n                       (chartDraw)="chartDrawn()"\n                       [showLegend]="showLegend" [data]="dataModel"\n                       *ngIf="graphs[\'bubble\'].indexOf(type) > -1 && dataModel"\n                       [responsive]="true"></warpview-bubble>\n\n      <warpview-datagrid [debug]="debug" [options]="_options"\n                         (chartDraw)="chartDrawn()"\n                         [showLegend]="showLegend" [data]="dataModel"\n                         *ngIf="graphs[\'datagrid\'].indexOf(type) > -1 && dataModel"\n                         [responsive]="true"></warpview-datagrid>\n\n      <warpview-display [debug]="debug" [options]="_options"\n                        (chartDraw)="chartDrawn()"\n                        [showLegend]="showLegend" [data]="dataModel" [unit]="unit"\n                        *ngIf="graphs[\'display\'].indexOf(type) > -1 && dataModel"\n                        [responsive]="true"></warpview-display>\n\n      <warpview-drill-down [debug]="debug" [options]="_options"\n                           (chartDraw)="chartDrawn()"\n                           [showLegend]="showLegend" [data]="dataModel" [unit]="unit"\n                           *ngIf="graphs[\'drilldown\'].indexOf(type) > -1 && dataModel"\n                           [responsive]="true"></warpview-drill-down>\n\n      <warpview-gts-tree *ngIf="graphs[\'gts-tree\'].indexOf(type) > -1 && dataModel"\n                         (chartDraw)="chartDrawn()"\n                         [responsive]="true" [debug]="debug" [data]="dataModel"\n                         [options]="_options"></warpview-gts-tree>\n\n      <warpview-image *ngIf="graphs[\'image\'].indexOf(type) > -1 && dataModel"\n                      (chartDraw)="chartDrawn()"\n                      [responsive]="true" [debug]="debug" [data]="dataModel" [options]="_options"></warpview-image>\n\n      <warpview-map *ngIf="graphs[\'map\'].indexOf(type) > -1 && dataModel" [responsive]="true" [debug]="debug"\n                    (chartDraw)="chartDrawn()"\n                    [data]="dataModel" [options]="_options"></warpview-map>\n\n      <warpview-pie [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                    (chartDraw)="chartDrawn()"\n                    [showLegend]="showLegend" [data]="dataModel"\n                    *ngIf="graphs[\'pie\'].indexOf(type) > -1 && dataModel"\n                    [responsive]="true"></warpview-pie>\n\n      <warpview-gauge [debug]="debug" [type]="type" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'gauge\'].indexOf(type) > -1 && dataModel"\n                      [responsive]="true"></warpview-gauge>\n\n      <warpview-annotation [debug]="debug" [unit]="unit" [options]="_options"\n                           (chartDraw)="chartDrawn()"\n                           [showLegend]="showLegend" [data]="dataModel"\n                           [standalone]="true" [type]="type"\n                           *ngIf="graphs[\'annotation\'].indexOf(type) > -1 && dataModel"\n                           [responsive]="true"></warpview-annotation>\n\n      <warpview-event-drop [debug]="debug" [unit]="unit" [options]="_options"\n                           (chartDraw)="chartDrawn()"\n                           [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                           *ngIf="graphs[\'drops\'].indexOf(type) > -1 && dataModel"\n                           [responsive]="true"></warpview-event-drop>\n\n      <warpview-polar [debug]="debug" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'polar\'].indexOf(type) > -1 && dataModel"\n                      [responsive]="true"></warpview-polar>\n\n      <warpview-radar [debug]="debug" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel"\n                      *ngIf="graphs[\'radar\'].indexOf(type) > -1 && dataModel"\n                      [responsive]="true"></warpview-radar>\n\n      <warpview-box [debug]="debug" [unit]="unit" [options]="_options"\n                    (chartDraw)="chartDrawn()"\n                    [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                    *ngIf="graphs[\'box\'].indexOf(type) > -1 && dataModel"\n                    [responsive]="true"></warpview-box>\n\n      <warpview-3d-line [debug]="debug" [unit]="unit" [options]="_options"\n                        (chartDraw)="chartDrawn()"\n                        [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                        *ngIf="graphs[\'line3d\'].indexOf(type) > -1 && dataModel"\n                        [responsive]="true"></warpview-3d-line>\n      <warpview-globe [debug]="debug" [unit]="unit" [options]="_options"\n                      (chartDraw)="chartDrawn()"\n                      [showLegend]="showLegend" [data]="dataModel" [type]="type"\n                      *ngIf="graphs[\'globe\'].indexOf(type) > -1 && dataModel"\n                      [responsive]="true"></warpview-globe>\n    </div>\n</div>\n',styles:['/*!\n *  Copyright 2020  SenX S.A.S.\n *\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n *\n */:root{--warp-view-chart-width:100%;--warp-view-chart-height:100%;--warp-view-datagrid-cell-padding:5px;--warp-view-map-margin:0;--warp-view-switch-height:30px;--warp-view-switch-width:100px;--warp-view-switch-radius:18px;--warp-view-plot-chart-height:100%;--warp-view-slider-pointer-size:65px;--warp-view-resize-handle-height:10px;--warp-view-tile-width:100%;--warp-view-tile-height:100%;--warp-view-font-color:#000000;--warp-view-bar-color:#dc3545;--warp-view-datagrid-odd-bg-color:#ffffff;--warp-view-datagrid-odd-color:#404040;--warp-view-datagrid-even-bg-color:#c0c0c0;--warp-view-datagrid-even-color:#000000;--warp-view-pagination-border-color:#c0c0c0;--warp-view-pagination-bg-color:#ffffff;--warp-view-pagination-active-bg-color:#4CAF50;--warp-view-pagination-active-color:#ffffff;--warp-view-pagination-active-border-color:#4CAF50;--warp-view-pagination-hover-bg-color:#c0c0c0;--warp-view-pagination-hover-color:#000000;--warp-view-pagination-hover-border-color:#c0c0c0;--warp-view-pagination-disabled-color:#c0c0c0;--warp-view-switch-inset-color:#c0c0c0;--warp-view-switch-inset-checked-color:#00cd00;--warp-view-switch-handle-color:radial-gradient(#ffffff 15%, #c0c0c0 100%);--warp-view-switch-handle-checked-color:radial-gradient(#ffffff 15%, #00cd00 100%);--warp-view-resize-handle-color:#c0c0c0;--warp-view-chart-legend-bg:#ffffff;--warp-view-chart-legend-color:#404040;--gts-classname-font-color:#004eff;--gts-labelname-font-color:#19A979;--gts-attrname-font-color:#19A979;--gts-separator-font-color:#a0a0a0;--gts-labelvalue-font-color:#000000;--gts-attrvalue-font-color:#000000;--gts-stack-font-color:#000000;--gts-tree-expanded-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA7klEQVQ4T82TMW7CQBBF/0g+QOpINEkVCmpaLoBm5COk5QYoaeAY3MDSei2LGu4QKakiBA1tCpTK8kS2sLVe2xSh8XSrnf9m/s4s4c6gO/UYGEBEXlT1bK396bFGIjIJguA7iqJLkVNbYOZXItoQ0QHAzBhz9CCFeAVgCeAjy7Jpmqa/NUBEEgDzktqGuOKKO47j+KsGhGH4lOf5HsDIg5ycyqVYVd+steuGheLAzM9EtPMgW1VdVGWJ6N0YU1gpozVGH+K+gy/uBHR1crXUqNzbQXXhduJ69sd7cxOZ+UFVH5Mk+exb+YGt8n9+5h8up1sReYC0WAAAAABJRU5ErkJggg==);--gts-tree-collapsed-icon:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0UlEQVQ4T6WTUW7CQAxEPQdozxYb9Qb94Aj9gQSoVCp6lMr21doDZFCQiFCU3YDY//d2PeOFPHnwJC+zAlVdA/jp+/6YmZ+1S0qCPxF5HUAAO3fvSpKS4ENEvm6gfUS0c5JiBma2Ibm/QiQPmbmdSqohquoA7GqSxRaapmkBjBkAeHP336t0UWBmHcnb+VcR4XcJpjDJLjPHkS4tleqZubmNiDHU6gumDQDYuvvh7hpV9V9EXgaA5Ka2jbMjmNk7yZOIfEfE8eFVfuSDLda4JDsD3FNdEckTC0YAAAAASUVORK5CYII=);--warp-view-popup-bg-color:#ffffff;--warp-view-popup-border-color:rgba(0, 0, 0, .2);--warp-view-popup-header-bg-color:#c0c0c0;--warp-view-popup-title-color:#404040;--warp-view-popup-close-color:#404040;--warp-view-popup-body-bg-color:#ffffff;--warp-view-popup-body-color:#000000;--warp-view-annotationtooltip-value-font-color:#004eff;--warp-view-annotationtooltip-font-color:#404040;--warp-view-spinner-color:#ff9900;--warp-slider-connect-color:#ff9900;--warp-slider-handle-bg-color:#ffffff;--warp-slider-handle-color:#004eff;--warp-slider-handle-shadow:inset 0 0 1px #ffffff,inset 0 1px 7px #c0c0c0,0 3px 6px -3px #a0a0a0}.noData{width:100%;text-align:center;color:var(--warp-view-chart-legend-color);position:relative}:host,warp-view-result-tile,warpview-result-tile{width:var(--warp-view-tile-width,100%);max-height:var(--warp-view-tile-height,100%);overflow:auto;min-width:var(--warp-view-tile-width,100%);min-height:var(--warp-view-tile-height,100%)}:host .error,warp-view-result-tile .error,warpview-result-tile .error{width:100%;text-align:center;color:#dc3545;font-weight:700}:host .wrapper,warp-view-result-tile .wrapper,warpview-result-tile .wrapper{opacity:1;min-height:50px;width:var(--warp-view-tile-width,100%);height:var(--warp-view-tile-height,100%)}:host .wrapper.full,warp-view-result-tile .wrapper.full,warpview-result-tile .wrapper.full{width:100%;height:100%}:host .wrapper .tilewrapper,warp-view-result-tile .wrapper .tilewrapper,warpview-result-tile .wrapper .tilewrapper{width:100%;height:100%}:host .wrapper .tilewrapper .tile,warp-view-result-tile .wrapper .tilewrapper .tile,warpview-result-tile .wrapper .tilewrapper .tile{width:100%;height:calc(var(--warp-view-tile-height,100%) - 40px);overflow-y:auto;overflow-x:hidden}:host .wrapper .tilewrapper .notitle,warp-view-result-tile .wrapper .tilewrapper .notitle,warpview-result-tile .wrapper .tilewrapper .notitle{height:100%;overflow:hidden}:host .wrapper .tilewrapper h1,warp-view-result-tile .wrapper .tilewrapper h1,warpview-result-tile .wrapper .tilewrapper h1{font-size:20px;padding:5px;margin:0;color:var(--warp-view-font-color)}:host .wrapper .tilewrapper h1 small,warp-view-result-tile .wrapper .tilewrapper h1 small,warpview-result-tile .wrapper .tilewrapper h1 small{font-size:10px;margin-left:10px}']}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:M},{type:t.NgZone}]},i.propDecorators={type:[{type:t.Input,args:["type"]}],standalone:[{type:t.Input,args:["standalone"]}],pointHover:[{type:t.Output,args:["pointHover"]}],warpViewChartResize:[{type:t.Output,args:["warpViewChartResize"]}],chartDraw:[{type:t.Output,args:["chartDraw"]}],boundsDidChange:[{type:t.Output,args:["boundsDidChange"]}]},i}(z);var Ee=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[W,H,K,j,q,J,X,Z,$,ee,ie,ne,ae,oe,re,pe,le,he,de,ge,ue,we,fe,ve,me,be,Ae,ye,Se,R,xe,Le,Oe,Ce,Ie],imports:[i.CommonModule,c.HttpClientModule,A.AngularResizedEventModule,b.FormsModule],exports:[W,H,K,j,q,J,X,Z,$,ee,ie,ne,ae,oe,re,pe,le,he,de,ge,ue,we,fe,ve,me,be,Ae,ye,Se,xe,Le,Oe,Ce,Ie],providers:[Q,M],entryComponents:[W,H,K,j,q,J,X,Z,$,ee,ie,ne,ae,oe,re,pe,le,he,de,ge,ue,we,fe,ve,me,be,Ae,ye,Se,R,xe,Le,Oe,Ce,Ie]}]}],e}();e.Param=B,e.WarpViewAngularModule=Ee,e.Éµa=W,e.Éµb=z,e.Éµba=fe,e.Éµbb=ve,e.Éµbc=me,e.Éµbd=be,e.Éµbe=Ae,e.Éµbf=ye,e.Éµbg=Se,e.Éµbh=R,e.Éµbi=xe,e.Éµbj=Le,e.Éµbk=Oe,e.Éµbl=Ce,e.Éµbm=Ie,e.Éµc=M,e.Éµd=Q,e.Éµe=P,e.Éµf=H,e.Éµg=K,e.Éµh=j,e.Éµi=q,e.Éµj=J,e.Éµk=X,e.Éµl=Z,e.Éµm=$,e.Éµn=ee,e.Éµo=ie,e.Éµp=ne,e.Éµq=ae,e.Éµr=oe,e.Éµs=re,e.Éµt=pe,e.Éµu=le,e.Éµv=he,e.Éµw=de,e.Éµx=ge,e.Éµy=ue,e.Éµz=we,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=warpview.umd.min.js.map